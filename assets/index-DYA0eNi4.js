function Oy(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(t,a,u.get?u:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const g of u.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mg={exports:{}},ac={},kg={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ml=Symbol.for("react.element"),by=Symbol.for("react.portal"),Py=Symbol.for("react.fragment"),My=Symbol.for("react.strict_mode"),ky=Symbol.for("react.profiler"),Ly=Symbol.for("react.provider"),By=Symbol.for("react.context"),Fy=Symbol.for("react.forward_ref"),Vy=Symbol.for("react.suspense"),Uy=Symbol.for("react.memo"),zy=Symbol.for("react.lazy"),xd=Symbol.iterator;function Hy(t){return t===null||typeof t!="object"?null:(t=xd&&t[xd]||t["@@iterator"],typeof t=="function"?t:null)}var Lg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bg=Object.assign,Fg={};function $o(t,e,n){this.props=t,this.context=e,this.refs=Fg,this.updater=n||Lg}$o.prototype.isReactComponent={};$o.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vg(){}Vg.prototype=$o.prototype;function jf(t,e,n){this.props=t,this.context=e,this.refs=Fg,this.updater=n||Lg}var Xf=jf.prototype=new Vg;Xf.constructor=jf;Bg(Xf,$o.prototype);Xf.isPureReactComponent=!0;var Ed=Array.isArray,Ug=Object.prototype.hasOwnProperty,Kf={current:null},zg={key:!0,ref:!0,__self:!0,__source:!0};function Hg(t,e,n){var i,a={},u=null,g=null;if(e!=null)for(i in e.ref!==void 0&&(g=e.ref),e.key!==void 0&&(u=""+e.key),e)Ug.call(e,i)&&!zg.hasOwnProperty(i)&&(a[i]=e[i]);var m=arguments.length-2;if(m===1)a.children=n;else if(1<m){for(var x=Array(m),w=0;w<m;w++)x[w]=arguments[w+2];a.children=x}if(t&&t.defaultProps)for(i in m=t.defaultProps,m)a[i]===void 0&&(a[i]=m[i]);return{$$typeof:ml,type:t,key:u,ref:g,props:a,_owner:Kf.current}}function Wy(t,e){return{$$typeof:ml,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qf(t){return typeof t=="object"&&t!==null&&t.$$typeof===ml}function Gy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _d=/\/+/g;function qc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Gy(""+t.key):e.toString(36)}function su(t,e,n,i,a){var u=typeof t;(u==="undefined"||u==="boolean")&&(t=null);var g=!1;if(t===null)g=!0;else switch(u){case"string":case"number":g=!0;break;case"object":switch(t.$$typeof){case ml:case by:g=!0}}if(g)return g=t,a=a(g),t=i===""?"."+qc(g,0):i,Ed(a)?(n="",t!=null&&(n=t.replace(_d,"$&/")+"/"),su(a,e,n,"",function(w){return w})):a!=null&&(qf(a)&&(a=Wy(a,n+(!a.key||g&&g.key===a.key?"":(""+a.key).replace(_d,"$&/")+"/")+t)),e.push(a)),1;if(g=0,i=i===""?".":i+":",Ed(t))for(var m=0;m<t.length;m++){u=t[m];var x=i+qc(u,m);g+=su(u,e,n,x,a)}else if(x=Hy(t),typeof x=="function")for(t=x.call(t),m=0;!(u=t.next()).done;)u=u.value,x=i+qc(u,m++),g+=su(u,e,n,x,a);else if(u==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return g}function Fl(t,e,n){if(t==null)return t;var i=[],a=0;return su(t,i,"","",function(u){return e.call(n,u,a++)}),i}function jy(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fn={current:null},ou={transition:null},Xy={ReactCurrentDispatcher:Fn,ReactCurrentBatchConfig:ou,ReactCurrentOwner:Kf};function Wg(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:Fl,forEach:function(t,e,n){Fl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fl(t,function(){e++}),e},toArray:function(t){return Fl(t,function(e){return e})||[]},only:function(t){if(!qf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fe.Component=$o;Fe.Fragment=Py;Fe.Profiler=ky;Fe.PureComponent=jf;Fe.StrictMode=My;Fe.Suspense=Vy;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xy;Fe.act=Wg;Fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Bg({},t.props),a=t.key,u=t.ref,g=t._owner;if(e!=null){if(e.ref!==void 0&&(u=e.ref,g=Kf.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var m=t.type.defaultProps;for(x in e)Ug.call(e,x)&&!zg.hasOwnProperty(x)&&(i[x]=e[x]===void 0&&m!==void 0?m[x]:e[x])}var x=arguments.length-2;if(x===1)i.children=n;else if(1<x){m=Array(x);for(var w=0;w<x;w++)m[w]=arguments[w+2];i.children=m}return{$$typeof:ml,type:t.type,key:a,ref:u,props:i,_owner:g}};Fe.createContext=function(t){return t={$$typeof:By,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ly,_context:t},t.Consumer=t};Fe.createElement=Hg;Fe.createFactory=function(t){var e=Hg.bind(null,t);return e.type=t,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(t){return{$$typeof:Fy,render:t}};Fe.isValidElement=qf;Fe.lazy=function(t){return{$$typeof:zy,_payload:{_status:-1,_result:t},_init:jy}};Fe.memo=function(t,e){return{$$typeof:Uy,type:t,compare:e===void 0?null:e}};Fe.startTransition=function(t){var e=ou.transition;ou.transition={};try{t()}finally{ou.transition=e}};Fe.unstable_act=Wg;Fe.useCallback=function(t,e){return Fn.current.useCallback(t,e)};Fe.useContext=function(t){return Fn.current.useContext(t)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(t){return Fn.current.useDeferredValue(t)};Fe.useEffect=function(t,e){return Fn.current.useEffect(t,e)};Fe.useId=function(){return Fn.current.useId()};Fe.useImperativeHandle=function(t,e,n){return Fn.current.useImperativeHandle(t,e,n)};Fe.useInsertionEffect=function(t,e){return Fn.current.useInsertionEffect(t,e)};Fe.useLayoutEffect=function(t,e){return Fn.current.useLayoutEffect(t,e)};Fe.useMemo=function(t,e){return Fn.current.useMemo(t,e)};Fe.useReducer=function(t,e,n){return Fn.current.useReducer(t,e,n)};Fe.useRef=function(t){return Fn.current.useRef(t)};Fe.useState=function(t){return Fn.current.useState(t)};Fe.useSyncExternalStore=function(t,e,n){return Fn.current.useSyncExternalStore(t,e,n)};Fe.useTransition=function(){return Fn.current.useTransition()};Fe.version="18.3.1";kg.exports=Fe;var Jr=kg.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky=Jr,qy=Symbol.for("react.element"),Yy=Symbol.for("react.fragment"),Qy=Object.prototype.hasOwnProperty,Zy=Ky.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$y={key:!0,ref:!0,__self:!0,__source:!0};function Gg(t,e,n){var i,a={},u=null,g=null;n!==void 0&&(u=""+n),e.key!==void 0&&(u=""+e.key),e.ref!==void 0&&(g=e.ref);for(i in e)Qy.call(e,i)&&!$y.hasOwnProperty(i)&&(a[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)a[i]===void 0&&(a[i]=e[i]);return{$$typeof:qy,type:t,key:u,ref:g,props:a,_owner:Zy.current}}ac.Fragment=Yy;ac.jsx=Gg;ac.jsxs=Gg;Mg.exports=ac;var bt=Mg.exports,jg={exports:{}},mr={},Xg={exports:{}},Kg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ge,Ce){var Re=ge.length;ge.push(Ce);e:for(;0<Re;){var ft=Re-1>>>1,Me=ge[ft];if(0<a(Me,Ce))ge[ft]=Ce,ge[Re]=Me,Re=ft;else break e}}function n(ge){return ge.length===0?null:ge[0]}function i(ge){if(ge.length===0)return null;var Ce=ge[0],Re=ge.pop();if(Re!==Ce){ge[0]=Re;e:for(var ft=0,Me=ge.length,nt=Me>>>1;ft<nt;){var pt=2*(ft+1)-1,$n=ge[pt],Ee=pt+1,Jn=ge[Ee];if(0>a($n,Re))Ee<Me&&0>a(Jn,$n)?(ge[ft]=Jn,ge[Ee]=Re,ft=Ee):(ge[ft]=$n,ge[pt]=Re,ft=pt);else if(Ee<Me&&0>a(Jn,Re))ge[ft]=Jn,ge[Ee]=Re,ft=Ee;else break e}}return Ce}function a(ge,Ce){var Re=ge.sortIndex-Ce.sortIndex;return Re!==0?Re:ge.id-Ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var g=Date,m=g.now();t.unstable_now=function(){return g.now()-m}}var x=[],w=[],I=1,S=null,P=3,U=!1,Y=!1,q=!1,te=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(ge){for(var Ce=n(w);Ce!==null;){if(Ce.callback===null)i(w);else if(Ce.startTime<=ge)i(w),Ce.sortIndex=Ce.expirationTime,e(x,Ce);else break;Ce=n(w)}}function Q(ge){if(q=!1,B(ge),!Y)if(n(x)!==null)Y=!0,Ct(he);else{var Ce=n(w);Ce!==null&&Se(Q,Ce.startTime-ge)}}function he(ge,Ce){Y=!1,q&&(q=!1,V(O),O=-1),U=!0;var Re=P;try{for(B(Ce),S=n(x);S!==null&&(!(S.expirationTime>Ce)||ge&&!G());){var ft=S.callback;if(typeof ft=="function"){S.callback=null,P=S.priorityLevel;var Me=ft(S.expirationTime<=Ce);Ce=t.unstable_now(),typeof Me=="function"?S.callback=Me:S===n(x)&&i(x),B(Ce)}else i(x);S=n(x)}if(S!==null)var nt=!0;else{var pt=n(w);pt!==null&&Se(Q,pt.startTime-Ce),nt=!1}return nt}finally{S=null,P=Re,U=!1}}var re=!1,D=null,O=-1,N=5,F=-1;function G(){return!(t.unstable_now()-F<N)}function H(){if(D!==null){var ge=t.unstable_now();F=ge;var Ce=!0;try{Ce=D(!0,ge)}finally{Ce?L():(re=!1,D=null)}}else re=!1}var L;if(typeof k=="function")L=function(){k(H)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,ee=$e.port2;$e.port1.onmessage=H,L=function(){ee.postMessage(null)}}else L=function(){te(H,0)};function Ct(ge){D=ge,re||(re=!0,L())}function Se(ge,Ce){O=te(function(){ge(t.unstable_now())},Ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ge){ge.callback=null},t.unstable_continueExecution=function(){Y||U||(Y=!0,Ct(he))},t.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ge?Math.floor(1e3/ge):5},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return n(x)},t.unstable_next=function(ge){switch(P){case 1:case 2:case 3:var Ce=3;break;default:Ce=P}var Re=P;P=Ce;try{return ge()}finally{P=Re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ge,Ce){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var Re=P;P=ge;try{return Ce()}finally{P=Re}},t.unstable_scheduleCallback=function(ge,Ce,Re){var ft=t.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?ft+Re:ft):Re=ft,ge){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=Re+Me,ge={id:I++,callback:Ce,priorityLevel:ge,startTime:Re,expirationTime:Me,sortIndex:-1},Re>ft?(ge.sortIndex=Re,e(w,ge),n(x)===null&&ge===n(w)&&(q?(V(O),O=-1):q=!0,Se(Q,Re-ft))):(ge.sortIndex=Me,e(x,ge),Y||U||(Y=!0,Ct(he))),ge},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(ge){var Ce=P;return function(){var Re=P;P=Ce;try{return ge.apply(this,arguments)}finally{P=Re}}}})(Kg);Xg.exports=Kg;var Jy=Xg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew=Jr,pr=Jy;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qg=new Set,ja={};function Ys(t,e){Fo(t,e),Fo(t+"Capture",e)}function Fo(t,e){for(ja[t]=e,t=0;t<e.length;t++)qg.add(e[t])}var _i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oh=Object.prototype.hasOwnProperty,tw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ad={},Cd={};function nw(t){return Oh.call(Cd,t)?!0:Oh.call(Ad,t)?!1:tw.test(t)?Cd[t]=!0:(Ad[t]=!0,!1)}function rw(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iw(t,e,n,i){if(e===null||typeof e>"u"||rw(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vn(t,e,n,i,a,u,g){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=u,this.removeEmptyString=g}var Cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Cn[t]=new Vn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Cn[e]=new Vn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Cn[t]=new Vn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Cn[t]=new Vn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Cn[t]=new Vn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Cn[t]=new Vn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Cn[t]=new Vn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Cn[t]=new Vn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Cn[t]=new Vn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yf=/[\-:]([a-z])/g;function Qf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yf,Qf);Cn[e]=new Vn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yf,Qf);Cn[e]=new Vn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yf,Qf);Cn[e]=new Vn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Cn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!1,!1)});Cn.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Cn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zf(t,e,n,i){var a=Cn.hasOwnProperty(e)?Cn[e]:null;(a!==null?a.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iw(e,n,a,i)&&(n=null),i||a===null?nw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,i=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Ri=ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vl=Symbol.for("react.element"),yo=Symbol.for("react.portal"),wo=Symbol.for("react.fragment"),$f=Symbol.for("react.strict_mode"),Dh=Symbol.for("react.profiler"),Yg=Symbol.for("react.provider"),Qg=Symbol.for("react.context"),Jf=Symbol.for("react.forward_ref"),bh=Symbol.for("react.suspense"),Ph=Symbol.for("react.suspense_list"),e1=Symbol.for("react.memo"),zi=Symbol.for("react.lazy"),Zg=Symbol.for("react.offscreen"),vd=Symbol.iterator;function pa(t){return t===null||typeof t!="object"?null:(t=vd&&t[vd]||t["@@iterator"],typeof t=="function"?t:null)}var kt=Object.assign,Yc;function va(t){if(Yc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yc=e&&e[1]||""}return`
`+Yc+t}var Qc=!1;function Zc(t,e){if(!t||Qc)return"";Qc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(w){var i=w}Reflect.construct(t,[],e)}else{try{e.call()}catch(w){i=w}t.call(e.prototype)}else{try{throw Error()}catch(w){i=w}t()}}catch(w){if(w&&i&&typeof w.stack=="string"){for(var a=w.stack.split(`
`),u=i.stack.split(`
`),g=a.length-1,m=u.length-1;1<=g&&0<=m&&a[g]!==u[m];)m--;for(;1<=g&&0<=m;g--,m--)if(a[g]!==u[m]){if(g!==1||m!==1)do if(g--,m--,0>m||a[g]!==u[m]){var x=`
`+a[g].replace(" at new "," at ");return t.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",t.displayName)),x}while(1<=g&&0<=m);break}}}finally{Qc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?va(t):""}function sw(t){switch(t.tag){case 5:return va(t.type);case 16:return va("Lazy");case 13:return va("Suspense");case 19:return va("SuspenseList");case 0:case 2:case 15:return t=Zc(t.type,!1),t;case 11:return t=Zc(t.type.render,!1),t;case 1:return t=Zc(t.type,!0),t;default:return""}}function Mh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wo:return"Fragment";case yo:return"Portal";case Dh:return"Profiler";case $f:return"StrictMode";case bh:return"Suspense";case Ph:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Qg:return(t.displayName||"Context")+".Consumer";case Yg:return(t._context.displayName||"Context")+".Provider";case Jf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case e1:return e=t.displayName||null,e!==null?e:Mh(t.type)||"Memo";case zi:e=t._payload,t=t._init;try{return Mh(t(e))}catch{}}return null}function ow(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mh(e);case 8:return e===$f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ss(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $g(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aw(t){var e=$g(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,u=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(g){i=""+g,u.call(this,g)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ul(t){t._valueTracker||(t._valueTracker=aw(t))}function Jg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=$g(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Au(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kh(t,e){var n=e.checked;return kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Id(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ss(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ep(t,e){e=e.checked,e!=null&&Zf(t,"checked",e,!1)}function Lh(t,e){ep(t,e);var n=ss(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bh(t,e.type,ss(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Td(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bh(t,e,n){(e!=="number"||Au(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ia=Array.isArray;function Oo(t,e,n,i){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ss(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,i&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Fh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Ia(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ss(n)}}function tp(t,e){var n=ss(e.value),i=ss(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Rd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function np(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?np(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zl,rp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zl=zl||document.createElement("div"),zl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ba={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lw=["Webkit","ms","Moz","O"];Object.keys(ba).forEach(function(t){lw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ba[e]=ba[t]})});function ip(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ba.hasOwnProperty(t)&&ba[t]?(""+e).trim():e+"px"}function sp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=ip(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,a):t[n]=a}}var uw=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uh(t,e){if(e){if(uw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function zh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hh=null;function t1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wh=null,Do=null,bo=null;function Nd(t){if(t=xl(t)){if(typeof Wh!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=fc(e),Wh(t.stateNode,t.type,e))}}function op(t){Do?bo?bo.push(t):bo=[t]:Do=t}function ap(){if(Do){var t=Do,e=bo;if(bo=Do=null,Nd(t),e)for(t=0;t<e.length;t++)Nd(e[t])}}function lp(t,e){return t(e)}function up(){}var $c=!1;function cp(t,e,n){if($c)return t(e,n);$c=!0;try{return lp(t,e,n)}finally{$c=!1,(Do!==null||bo!==null)&&(up(),ap())}}function Ka(t,e){var n=t.stateNode;if(n===null)return null;var i=fc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var Gh=!1;if(_i)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){Gh=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{Gh=!1}function cw(t,e,n,i,a,u,g,m,x){var w=Array.prototype.slice.call(arguments,3);try{e.apply(n,w)}catch(I){this.onError(I)}}var Pa=!1,Cu=null,vu=!1,jh=null,hw={onError:function(t){Pa=!0,Cu=t}};function fw(t,e,n,i,a,u,g,m,x){Pa=!1,Cu=null,cw.apply(hw,arguments)}function dw(t,e,n,i,a,u,g,m,x){if(fw.apply(this,arguments),Pa){if(Pa){var w=Cu;Pa=!1,Cu=null}else throw Error(ae(198));vu||(vu=!0,jh=w)}}function Qs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Od(t){if(Qs(t)!==t)throw Error(ae(188))}function gw(t){var e=t.alternate;if(!e){if(e=Qs(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,i=e;;){var a=n.return;if(a===null)break;var u=a.alternate;if(u===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===u.child){for(u=a.child;u;){if(u===n)return Od(a),t;if(u===i)return Od(a),e;u=u.sibling}throw Error(ae(188))}if(n.return!==i.return)n=a,i=u;else{for(var g=!1,m=a.child;m;){if(m===n){g=!0,n=a,i=u;break}if(m===i){g=!0,i=a,n=u;break}m=m.sibling}if(!g){for(m=u.child;m;){if(m===n){g=!0,n=u,i=a;break}if(m===i){g=!0,i=u,n=a;break}m=m.sibling}if(!g)throw Error(ae(189))}}if(n.alternate!==i)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function fp(t){return t=gw(t),t!==null?dp(t):null}function dp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dp(t);if(e!==null)return e;t=t.sibling}return null}var gp=pr.unstable_scheduleCallback,Dd=pr.unstable_cancelCallback,pw=pr.unstable_shouldYield,mw=pr.unstable_requestPaint,jt=pr.unstable_now,yw=pr.unstable_getCurrentPriorityLevel,n1=pr.unstable_ImmediatePriority,pp=pr.unstable_UserBlockingPriority,Iu=pr.unstable_NormalPriority,ww=pr.unstable_LowPriority,mp=pr.unstable_IdlePriority,lc=null,ti=null;function xw(t){if(ti&&typeof ti.onCommitFiberRoot=="function")try{ti.onCommitFiberRoot(lc,t,void 0,(t.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:Aw,Ew=Math.log,_w=Math.LN2;function Aw(t){return t>>>=0,t===0?32:31-(Ew(t)/_w|0)|0}var Hl=64,Wl=4194304;function Ta(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,a=t.suspendedLanes,u=t.pingedLanes,g=n&268435455;if(g!==0){var m=g&~a;m!==0?i=Ta(m):(u&=g,u!==0&&(i=Ta(u)))}else g=n&~a,g!==0?i=Ta(g):u!==0&&(i=Ta(u));if(i===0)return 0;if(e!==0&&e!==i&&!(e&a)&&(a=i&-i,u=e&-e,a>=u||a===16&&(u&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Fr(e),a=1<<n,i|=t[n],e&=~a;return i}function Cw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vw(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,a=t.expirationTimes,u=t.pendingLanes;0<u;){var g=31-Fr(u),m=1<<g,x=a[g];x===-1?(!(m&n)||m&i)&&(a[g]=Cw(m,e)):x<=e&&(t.expiredLanes|=m),u&=~m}}function Xh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yp(){var t=Hl;return Hl<<=1,!(Hl&4194240)&&(Hl=64),t}function Jc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fr(e),t[e]=n}function Iw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-Fr(n),u=1<<a;e[a]=0,i[a]=-1,t[a]=-1,n&=~u}}function r1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Fr(n),a=1<<i;a&e|t[i]&e&&(t[i]|=e),n&=~a}}var st=0;function wp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xp,i1,Ep,_p,Ap,Kh=!1,Gl=[],qi=null,Yi=null,Qi=null,qa=new Map,Ya=new Map,Wi=[],Tw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bd(t,e){switch(t){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":qa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ya.delete(e.pointerId)}}function ya(t,e,n,i,a,u){return t===null||t.nativeEvent!==u?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:u,targetContainers:[a]},e!==null&&(e=xl(e),e!==null&&i1(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function Sw(t,e,n,i,a){switch(e){case"focusin":return qi=ya(qi,t,e,n,i,a),!0;case"dragenter":return Yi=ya(Yi,t,e,n,i,a),!0;case"mouseover":return Qi=ya(Qi,t,e,n,i,a),!0;case"pointerover":var u=a.pointerId;return qa.set(u,ya(qa.get(u)||null,t,e,n,i,a)),!0;case"gotpointercapture":return u=a.pointerId,Ya.set(u,ya(Ya.get(u)||null,t,e,n,i,a)),!0}return!1}function Cp(t){var e=Ps(t.target);if(e!==null){var n=Qs(e);if(n!==null){if(e=n.tag,e===13){if(e=hp(n),e!==null){t.blockedOn=e,Ap(t.priority,function(){Ep(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function au(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Hh=i,n.target.dispatchEvent(i),Hh=null}else return e=xl(n),e!==null&&i1(e),t.blockedOn=n,!1;e.shift()}return!0}function Pd(t,e,n){au(t)&&n.delete(e)}function Rw(){Kh=!1,qi!==null&&au(qi)&&(qi=null),Yi!==null&&au(Yi)&&(Yi=null),Qi!==null&&au(Qi)&&(Qi=null),qa.forEach(Pd),Ya.forEach(Pd)}function wa(t,e){t.blockedOn===e&&(t.blockedOn=null,Kh||(Kh=!0,pr.unstable_scheduleCallback(pr.unstable_NormalPriority,Rw)))}function Qa(t){function e(a){return wa(a,t)}if(0<Gl.length){wa(Gl[0],t);for(var n=1;n<Gl.length;n++){var i=Gl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(qi!==null&&wa(qi,t),Yi!==null&&wa(Yi,t),Qi!==null&&wa(Qi,t),qa.forEach(e),Ya.forEach(e),n=0;n<Wi.length;n++)i=Wi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Wi.length&&(n=Wi[0],n.blockedOn===null);)Cp(n),n.blockedOn===null&&Wi.shift()}var Po=Ri.ReactCurrentBatchConfig,Su=!0;function Nw(t,e,n,i){var a=st,u=Po.transition;Po.transition=null;try{st=1,s1(t,e,n,i)}finally{st=a,Po.transition=u}}function Ow(t,e,n,i){var a=st,u=Po.transition;Po.transition=null;try{st=4,s1(t,e,n,i)}finally{st=a,Po.transition=u}}function s1(t,e,n,i){if(Su){var a=qh(t,e,n,i);if(a===null)uh(t,e,i,Ru,n),bd(t,i);else if(Sw(a,t,e,n,i))i.stopPropagation();else if(bd(t,i),e&4&&-1<Tw.indexOf(t)){for(;a!==null;){var u=xl(a);if(u!==null&&xp(u),u=qh(t,e,n,i),u===null&&uh(t,e,i,Ru,n),u===a)break;a=u}a!==null&&i.stopPropagation()}else uh(t,e,i,null,n)}}var Ru=null;function qh(t,e,n,i){if(Ru=null,t=t1(i),t=Ps(t),t!==null)if(e=Qs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ru=t,null}function vp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yw()){case n1:return 1;case pp:return 4;case Iu:case ww:return 16;case mp:return 536870912;default:return 16}default:return 16}}var ji=null,o1=null,lu=null;function Ip(){if(lu)return lu;var t,e=o1,n=e.length,i,a="value"in ji?ji.value:ji.textContent,u=a.length;for(t=0;t<n&&e[t]===a[t];t++);var g=n-t;for(i=1;i<=g&&e[n-i]===a[u-i];i++);return lu=a.slice(t,1<i?1-i:void 0)}function uu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jl(){return!0}function Md(){return!1}function yr(t){function e(n,i,a,u,g){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var m in t)t.hasOwnProperty(m)&&(n=t[m],this[m]=n?n(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?jl:Md,this.isPropagationStopped=Md,this}return kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),e}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},a1=yr(Jo),wl=kt({},Jo,{view:0,detail:0}),Dw=yr(wl),eh,th,xa,uc=kt({},wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:l1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xa&&(xa&&t.type==="mousemove"?(eh=t.screenX-xa.screenX,th=t.screenY-xa.screenY):th=eh=0,xa=t),eh)},movementY:function(t){return"movementY"in t?t.movementY:th}}),kd=yr(uc),bw=kt({},uc,{dataTransfer:0}),Pw=yr(bw),Mw=kt({},wl,{relatedTarget:0}),nh=yr(Mw),kw=kt({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),Lw=yr(kw),Bw=kt({},Jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fw=yr(Bw),Vw=kt({},Jo,{data:0}),Ld=yr(Vw),Uw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ww(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Hw[t])?!!e[t]:!1}function l1(){return Ww}var Gw=kt({},wl,{key:function(t){if(t.key){var e=Uw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:l1,charCode:function(t){return t.type==="keypress"?uu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jw=yr(Gw),Xw=kt({},uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bd=yr(Xw),Kw=kt({},wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:l1}),qw=yr(Kw),Yw=kt({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qw=yr(Yw),Zw=kt({},uc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$w=yr(Zw),Jw=[9,13,27,32],u1=_i&&"CompositionEvent"in window,Ma=null;_i&&"documentMode"in document&&(Ma=document.documentMode);var ex=_i&&"TextEvent"in window&&!Ma,Tp=_i&&(!u1||Ma&&8<Ma&&11>=Ma),Fd=" ",Vd=!1;function Sp(t,e){switch(t){case"keyup":return Jw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xo=!1;function tx(t,e){switch(t){case"compositionend":return Rp(e);case"keypress":return e.which!==32?null:(Vd=!0,Fd);case"textInput":return t=e.data,t===Fd&&Vd?null:t;default:return null}}function nx(t,e){if(xo)return t==="compositionend"||!u1&&Sp(t,e)?(t=Ip(),lu=o1=ji=null,xo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tp&&e.locale!=="ko"?null:e.data;default:return null}}var rx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ud(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rx[t.type]:e==="textarea"}function Np(t,e,n,i){op(i),e=Nu(e,"onChange"),0<e.length&&(n=new a1("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ka=null,Za=null;function ix(t){Up(t,0)}function cc(t){var e=Ao(t);if(Jg(e))return t}function sx(t,e){if(t==="change")return e}var Op=!1;if(_i){var rh;if(_i){var ih="oninput"in document;if(!ih){var zd=document.createElement("div");zd.setAttribute("oninput","return;"),ih=typeof zd.oninput=="function"}rh=ih}else rh=!1;Op=rh&&(!document.documentMode||9<document.documentMode)}function Hd(){ka&&(ka.detachEvent("onpropertychange",Dp),Za=ka=null)}function Dp(t){if(t.propertyName==="value"&&cc(Za)){var e=[];Np(e,Za,t,t1(t)),cp(ix,e)}}function ox(t,e,n){t==="focusin"?(Hd(),ka=e,Za=n,ka.attachEvent("onpropertychange",Dp)):t==="focusout"&&Hd()}function ax(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cc(Za)}function lx(t,e){if(t==="click")return cc(e)}function ux(t,e){if(t==="input"||t==="change")return cc(e)}function cx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ur=typeof Object.is=="function"?Object.is:cx;function $a(t,e){if(Ur(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!Oh.call(e,a)||!Ur(t[a],e[a]))return!1}return!0}function Wd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gd(t,e){var n=Wd(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wd(n)}}function bp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Pp(){for(var t=window,e=Au();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Au(t.document)}return e}function c1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hx(t){var e=Pp(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bp(n.ownerDocument.documentElement,n)){if(i!==null&&c1(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,u=Math.min(i.start,a);i=i.end===void 0?u:Math.min(i.end,a),!t.extend&&u>i&&(a=i,i=u,u=a),a=Gd(n,u);var g=Gd(n,i);a&&g&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==g.node||t.focusOffset!==g.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),u>i?(t.addRange(e),t.extend(g.node,g.offset)):(e.setEnd(g.node,g.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fx=_i&&"documentMode"in document&&11>=document.documentMode,Eo=null,Yh=null,La=null,Qh=!1;function jd(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qh||Eo==null||Eo!==Au(i)||(i=Eo,"selectionStart"in i&&c1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),La&&$a(La,i)||(La=i,i=Nu(Yh,"onSelect"),0<i.length&&(e=new a1("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Eo)))}function Xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _o={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},sh={},Mp={};_i&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function hc(t){if(sh[t])return sh[t];if(!_o[t])return t;var e=_o[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Mp)return sh[t]=e[n];return t}var kp=hc("animationend"),Lp=hc("animationiteration"),Bp=hc("animationstart"),Fp=hc("transitionend"),Vp=new Map,Xd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(t,e){Vp.set(t,e),Ys(e,[t])}for(var oh=0;oh<Xd.length;oh++){var ah=Xd[oh],dx=ah.toLowerCase(),gx=ah[0].toUpperCase()+ah.slice(1);hs(dx,"on"+gx)}hs(kp,"onAnimationEnd");hs(Lp,"onAnimationIteration");hs(Bp,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(Fp,"onTransitionEnd");Fo("onMouseEnter",["mouseout","mouseover"]);Fo("onMouseLeave",["mouseout","mouseover"]);Fo("onPointerEnter",["pointerout","pointerover"]);Fo("onPointerLeave",["pointerout","pointerover"]);Ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),px=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function Kd(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,dw(i,e,void 0,t),t.currentTarget=null}function Up(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],a=i.event;i=i.listeners;e:{var u=void 0;if(e)for(var g=i.length-1;0<=g;g--){var m=i[g],x=m.instance,w=m.currentTarget;if(m=m.listener,x!==u&&a.isPropagationStopped())break e;Kd(a,m,w),u=x}else for(g=0;g<i.length;g++){if(m=i[g],x=m.instance,w=m.currentTarget,m=m.listener,x!==u&&a.isPropagationStopped())break e;Kd(a,m,w),u=x}}}if(vu)throw t=jh,vu=!1,jh=null,t}function Et(t,e){var n=e[tf];n===void 0&&(n=e[tf]=new Set);var i=t+"__bubble";n.has(i)||(zp(e,t,2,!1),n.add(i))}function lh(t,e,n){var i=0;e&&(i|=4),zp(n,t,i,e)}var Kl="_reactListening"+Math.random().toString(36).slice(2);function Ja(t){if(!t[Kl]){t[Kl]=!0,qg.forEach(function(n){n!=="selectionchange"&&(px.has(n)||lh(n,!1,t),lh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kl]||(e[Kl]=!0,lh("selectionchange",!1,e))}}function zp(t,e,n,i){switch(vp(e)){case 1:var a=Nw;break;case 4:a=Ow;break;default:a=s1}n=a.bind(null,e,n,t),a=void 0,!Gh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),i?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function uh(t,e,n,i,a){var u=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var g=i.tag;if(g===3||g===4){var m=i.stateNode.containerInfo;if(m===a||m.nodeType===8&&m.parentNode===a)break;if(g===4)for(g=i.return;g!==null;){var x=g.tag;if((x===3||x===4)&&(x=g.stateNode.containerInfo,x===a||x.nodeType===8&&x.parentNode===a))return;g=g.return}for(;m!==null;){if(g=Ps(m),g===null)return;if(x=g.tag,x===5||x===6){i=u=g;continue e}m=m.parentNode}}i=i.return}cp(function(){var w=u,I=t1(n),S=[];e:{var P=Vp.get(t);if(P!==void 0){var U=a1,Y=t;switch(t){case"keypress":if(uu(n)===0)break e;case"keydown":case"keyup":U=jw;break;case"focusin":Y="focus",U=nh;break;case"focusout":Y="blur",U=nh;break;case"beforeblur":case"afterblur":U=nh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=Pw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=qw;break;case kp:case Lp:case Bp:U=Lw;break;case Fp:U=Qw;break;case"scroll":U=Dw;break;case"wheel":U=$w;break;case"copy":case"cut":case"paste":U=Fw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Bd}var q=(e&4)!==0,te=!q&&t==="scroll",V=q?P!==null?P+"Capture":null:P;q=[];for(var k=w,B;k!==null;){B=k;var Q=B.stateNode;if(B.tag===5&&Q!==null&&(B=Q,V!==null&&(Q=Ka(k,V),Q!=null&&q.push(el(k,Q,B)))),te)break;k=k.return}0<q.length&&(P=new U(P,Y,null,n,I),S.push({event:P,listeners:q}))}}if(!(e&7)){e:{if(P=t==="mouseover"||t==="pointerover",U=t==="mouseout"||t==="pointerout",P&&n!==Hh&&(Y=n.relatedTarget||n.fromElement)&&(Ps(Y)||Y[Ai]))break e;if((U||P)&&(P=I.window===I?I:(P=I.ownerDocument)?P.defaultView||P.parentWindow:window,U?(Y=n.relatedTarget||n.toElement,U=w,Y=Y?Ps(Y):null,Y!==null&&(te=Qs(Y),Y!==te||Y.tag!==5&&Y.tag!==6)&&(Y=null)):(U=null,Y=w),U!==Y)){if(q=kd,Q="onMouseLeave",V="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(q=Bd,Q="onPointerLeave",V="onPointerEnter",k="pointer"),te=U==null?P:Ao(U),B=Y==null?P:Ao(Y),P=new q(Q,k+"leave",U,n,I),P.target=te,P.relatedTarget=B,Q=null,Ps(I)===w&&(q=new q(V,k+"enter",Y,n,I),q.target=B,q.relatedTarget=te,Q=q),te=Q,U&&Y)t:{for(q=U,V=Y,k=0,B=q;B;B=fo(B))k++;for(B=0,Q=V;Q;Q=fo(Q))B++;for(;0<k-B;)q=fo(q),k--;for(;0<B-k;)V=fo(V),B--;for(;k--;){if(q===V||V!==null&&q===V.alternate)break t;q=fo(q),V=fo(V)}q=null}else q=null;U!==null&&qd(S,P,U,q,!1),Y!==null&&te!==null&&qd(S,te,Y,q,!0)}}e:{if(P=w?Ao(w):window,U=P.nodeName&&P.nodeName.toLowerCase(),U==="select"||U==="input"&&P.type==="file")var he=sx;else if(Ud(P))if(Op)he=ux;else{he=ax;var re=ox}else(U=P.nodeName)&&U.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(he=lx);if(he&&(he=he(t,w))){Np(S,he,n,I);break e}re&&re(t,P,w),t==="focusout"&&(re=P._wrapperState)&&re.controlled&&P.type==="number"&&Bh(P,"number",P.value)}switch(re=w?Ao(w):window,t){case"focusin":(Ud(re)||re.contentEditable==="true")&&(Eo=re,Yh=w,La=null);break;case"focusout":La=Yh=Eo=null;break;case"mousedown":Qh=!0;break;case"contextmenu":case"mouseup":case"dragend":Qh=!1,jd(S,n,I);break;case"selectionchange":if(fx)break;case"keydown":case"keyup":jd(S,n,I)}var D;if(u1)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else xo?Sp(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(Tp&&n.locale!=="ko"&&(xo||O!=="onCompositionStart"?O==="onCompositionEnd"&&xo&&(D=Ip()):(ji=I,o1="value"in ji?ji.value:ji.textContent,xo=!0)),re=Nu(w,O),0<re.length&&(O=new Ld(O,t,null,n,I),S.push({event:O,listeners:re}),D?O.data=D:(D=Rp(n),D!==null&&(O.data=D)))),(D=ex?tx(t,n):nx(t,n))&&(w=Nu(w,"onBeforeInput"),0<w.length&&(I=new Ld("onBeforeInput","beforeinput",null,n,I),S.push({event:I,listeners:w}),I.data=D))}Up(S,e)})}function el(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nu(t,e){for(var n=e+"Capture",i=[];t!==null;){var a=t,u=a.stateNode;a.tag===5&&u!==null&&(a=u,u=Ka(t,n),u!=null&&i.unshift(el(t,u,a)),u=Ka(t,e),u!=null&&i.push(el(t,u,a))),t=t.return}return i}function fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qd(t,e,n,i,a){for(var u=e._reactName,g=[];n!==null&&n!==i;){var m=n,x=m.alternate,w=m.stateNode;if(x!==null&&x===i)break;m.tag===5&&w!==null&&(m=w,a?(x=Ka(n,u),x!=null&&g.unshift(el(n,x,m))):a||(x=Ka(n,u),x!=null&&g.push(el(n,x,m)))),n=n.return}g.length!==0&&t.push({event:e,listeners:g})}var mx=/\r\n?/g,yx=/\u0000|\uFFFD/g;function Yd(t){return(typeof t=="string"?t:""+t).replace(mx,`
`).replace(yx,"")}function ql(t,e,n){if(e=Yd(e),Yd(t)!==e&&n)throw Error(ae(425))}function Ou(){}var Zh=null,$h=null;function Jh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ef=typeof setTimeout=="function"?setTimeout:void 0,wx=typeof clearTimeout=="function"?clearTimeout:void 0,Qd=typeof Promise=="function"?Promise:void 0,xx=typeof queueMicrotask=="function"?queueMicrotask:typeof Qd<"u"?function(t){return Qd.resolve(null).then(t).catch(Ex)}:ef;function Ex(t){setTimeout(function(){throw t})}function ch(t,e){var n=e,i=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){t.removeChild(a),Qa(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);Qa(e)}function Zi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ea=Math.random().toString(36).slice(2),ei="__reactFiber$"+ea,tl="__reactProps$"+ea,Ai="__reactContainer$"+ea,tf="__reactEvents$"+ea,_x="__reactListeners$"+ea,Ax="__reactHandles$"+ea;function Ps(t){var e=t[ei];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ai]||n[ei]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zd(t);t!==null;){if(n=t[ei])return n;t=Zd(t)}return e}t=n,n=t.parentNode}return null}function xl(t){return t=t[ei]||t[Ai],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ao(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function fc(t){return t[tl]||null}var nf=[],Co=-1;function fs(t){return{current:t}}function At(t){0>Co||(t.current=nf[Co],nf[Co]=null,Co--)}function gt(t,e){Co++,nf[Co]=t.current,t.current=e}var os={},bn=fs(os),Yn=fs(!1),Us=os;function Vo(t,e){var n=t.type.contextTypes;if(!n)return os;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var a={},u;for(u in n)a[u]=e[u];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Qn(t){return t=t.childContextTypes,t!=null}function Du(){At(Yn),At(bn)}function $d(t,e,n){if(bn.current!==os)throw Error(ae(168));gt(bn,e),gt(Yn,n)}function Hp(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in e))throw Error(ae(108,ow(t)||"Unknown",a));return kt({},n,i)}function bu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||os,Us=bn.current,gt(bn,t),gt(Yn,Yn.current),!0}function Jd(t,e,n){var i=t.stateNode;if(!i)throw Error(ae(169));n?(t=Hp(t,e,Us),i.__reactInternalMemoizedMergedChildContext=t,At(Yn),At(bn),gt(bn,t)):At(Yn),gt(Yn,n)}var pi=null,dc=!1,hh=!1;function Wp(t){pi===null?pi=[t]:pi.push(t)}function Cx(t){dc=!0,Wp(t)}function ds(){if(!hh&&pi!==null){hh=!0;var t=0,e=st;try{var n=pi;for(st=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}pi=null,dc=!1}catch(a){throw pi!==null&&(pi=pi.slice(t+1)),gp(n1,ds),a}finally{st=e,hh=!1}}return null}var vo=[],Io=0,Pu=null,Mu=0,Ar=[],Cr=0,zs=null,mi=1,yi="";function Os(t,e){vo[Io++]=Mu,vo[Io++]=Pu,Pu=t,Mu=e}function Gp(t,e,n){Ar[Cr++]=mi,Ar[Cr++]=yi,Ar[Cr++]=zs,zs=t;var i=mi;t=yi;var a=32-Fr(i)-1;i&=~(1<<a),n+=1;var u=32-Fr(e)+a;if(30<u){var g=a-a%5;u=(i&(1<<g)-1).toString(32),i>>=g,a-=g,mi=1<<32-Fr(e)+a|n<<a|i,yi=u+t}else mi=1<<u|n<<a|i,yi=t}function h1(t){t.return!==null&&(Os(t,1),Gp(t,1,0))}function f1(t){for(;t===Pu;)Pu=vo[--Io],vo[Io]=null,Mu=vo[--Io],vo[Io]=null;for(;t===zs;)zs=Ar[--Cr],Ar[Cr]=null,yi=Ar[--Cr],Ar[Cr]=null,mi=Ar[--Cr],Ar[Cr]=null}var dr=null,fr=null,Tt=!1,Lr=null;function jp(t,e){var n=vr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function e0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,dr=t,fr=Zi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,dr=t,fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zs!==null?{id:mi,overflow:yi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,dr=t,fr=null,!0):!1;default:return!1}}function rf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sf(t){if(Tt){var e=fr;if(e){var n=e;if(!e0(t,e)){if(rf(t))throw Error(ae(418));e=Zi(n.nextSibling);var i=dr;e&&e0(t,e)?jp(i,n):(t.flags=t.flags&-4097|2,Tt=!1,dr=t)}}else{if(rf(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Tt=!1,dr=t}}}function t0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;dr=t}function Yl(t){if(t!==dr)return!1;if(!Tt)return t0(t),Tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jh(t.type,t.memoizedProps)),e&&(e=fr)){if(rf(t))throw Xp(),Error(ae(418));for(;e;)jp(t,e),e=Zi(e.nextSibling)}if(t0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fr=Zi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fr=null}}else fr=dr?Zi(t.stateNode.nextSibling):null;return!0}function Xp(){for(var t=fr;t;)t=Zi(t.nextSibling)}function Uo(){fr=dr=null,Tt=!1}function d1(t){Lr===null?Lr=[t]:Lr.push(t)}var vx=Ri.ReactCurrentBatchConfig;function Ea(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var i=n.stateNode}if(!i)throw Error(ae(147,t));var a=i,u=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===u?e.ref:(e=function(g){var m=a.refs;g===null?delete m[u]:m[u]=g},e._stringRef=u,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Ql(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function n0(t){var e=t._init;return e(t._payload)}function Kp(t){function e(V,k){if(t){var B=V.deletions;B===null?(V.deletions=[k],V.flags|=16):B.push(k)}}function n(V,k){if(!t)return null;for(;k!==null;)e(V,k),k=k.sibling;return null}function i(V,k){for(V=new Map;k!==null;)k.key!==null?V.set(k.key,k):V.set(k.index,k),k=k.sibling;return V}function a(V,k){return V=ts(V,k),V.index=0,V.sibling=null,V}function u(V,k,B){return V.index=B,t?(B=V.alternate,B!==null?(B=B.index,B<k?(V.flags|=2,k):B):(V.flags|=2,k)):(V.flags|=1048576,k)}function g(V){return t&&V.alternate===null&&(V.flags|=2),V}function m(V,k,B,Q){return k===null||k.tag!==6?(k=wh(B,V.mode,Q),k.return=V,k):(k=a(k,B),k.return=V,k)}function x(V,k,B,Q){var he=B.type;return he===wo?I(V,k,B.props.children,Q,B.key):k!==null&&(k.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===zi&&n0(he)===k.type)?(Q=a(k,B.props),Q.ref=Ea(V,k,B),Q.return=V,Q):(Q=mu(B.type,B.key,B.props,null,V.mode,Q),Q.ref=Ea(V,k,B),Q.return=V,Q)}function w(V,k,B,Q){return k===null||k.tag!==4||k.stateNode.containerInfo!==B.containerInfo||k.stateNode.implementation!==B.implementation?(k=xh(B,V.mode,Q),k.return=V,k):(k=a(k,B.children||[]),k.return=V,k)}function I(V,k,B,Q,he){return k===null||k.tag!==7?(k=Fs(B,V.mode,Q,he),k.return=V,k):(k=a(k,B),k.return=V,k)}function S(V,k,B){if(typeof k=="string"&&k!==""||typeof k=="number")return k=wh(""+k,V.mode,B),k.return=V,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Vl:return B=mu(k.type,k.key,k.props,null,V.mode,B),B.ref=Ea(V,null,k),B.return=V,B;case yo:return k=xh(k,V.mode,B),k.return=V,k;case zi:var Q=k._init;return S(V,Q(k._payload),B)}if(Ia(k)||pa(k))return k=Fs(k,V.mode,B,null),k.return=V,k;Ql(V,k)}return null}function P(V,k,B,Q){var he=k!==null?k.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return he!==null?null:m(V,k,""+B,Q);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Vl:return B.key===he?x(V,k,B,Q):null;case yo:return B.key===he?w(V,k,B,Q):null;case zi:return he=B._init,P(V,k,he(B._payload),Q)}if(Ia(B)||pa(B))return he!==null?null:I(V,k,B,Q,null);Ql(V,B)}return null}function U(V,k,B,Q,he){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return V=V.get(B)||null,m(k,V,""+Q,he);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Vl:return V=V.get(Q.key===null?B:Q.key)||null,x(k,V,Q,he);case yo:return V=V.get(Q.key===null?B:Q.key)||null,w(k,V,Q,he);case zi:var re=Q._init;return U(V,k,B,re(Q._payload),he)}if(Ia(Q)||pa(Q))return V=V.get(B)||null,I(k,V,Q,he,null);Ql(k,Q)}return null}function Y(V,k,B,Q){for(var he=null,re=null,D=k,O=k=0,N=null;D!==null&&O<B.length;O++){D.index>O?(N=D,D=null):N=D.sibling;var F=P(V,D,B[O],Q);if(F===null){D===null&&(D=N);break}t&&D&&F.alternate===null&&e(V,D),k=u(F,k,O),re===null?he=F:re.sibling=F,re=F,D=N}if(O===B.length)return n(V,D),Tt&&Os(V,O),he;if(D===null){for(;O<B.length;O++)D=S(V,B[O],Q),D!==null&&(k=u(D,k,O),re===null?he=D:re.sibling=D,re=D);return Tt&&Os(V,O),he}for(D=i(V,D);O<B.length;O++)N=U(D,V,O,B[O],Q),N!==null&&(t&&N.alternate!==null&&D.delete(N.key===null?O:N.key),k=u(N,k,O),re===null?he=N:re.sibling=N,re=N);return t&&D.forEach(function(G){return e(V,G)}),Tt&&Os(V,O),he}function q(V,k,B,Q){var he=pa(B);if(typeof he!="function")throw Error(ae(150));if(B=he.call(B),B==null)throw Error(ae(151));for(var re=he=null,D=k,O=k=0,N=null,F=B.next();D!==null&&!F.done;O++,F=B.next()){D.index>O?(N=D,D=null):N=D.sibling;var G=P(V,D,F.value,Q);if(G===null){D===null&&(D=N);break}t&&D&&G.alternate===null&&e(V,D),k=u(G,k,O),re===null?he=G:re.sibling=G,re=G,D=N}if(F.done)return n(V,D),Tt&&Os(V,O),he;if(D===null){for(;!F.done;O++,F=B.next())F=S(V,F.value,Q),F!==null&&(k=u(F,k,O),re===null?he=F:re.sibling=F,re=F);return Tt&&Os(V,O),he}for(D=i(V,D);!F.done;O++,F=B.next())F=U(D,V,O,F.value,Q),F!==null&&(t&&F.alternate!==null&&D.delete(F.key===null?O:F.key),k=u(F,k,O),re===null?he=F:re.sibling=F,re=F);return t&&D.forEach(function(H){return e(V,H)}),Tt&&Os(V,O),he}function te(V,k,B,Q){if(typeof B=="object"&&B!==null&&B.type===wo&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case Vl:e:{for(var he=B.key,re=k;re!==null;){if(re.key===he){if(he=B.type,he===wo){if(re.tag===7){n(V,re.sibling),k=a(re,B.props.children),k.return=V,V=k;break e}}else if(re.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===zi&&n0(he)===re.type){n(V,re.sibling),k=a(re,B.props),k.ref=Ea(V,re,B),k.return=V,V=k;break e}n(V,re);break}else e(V,re);re=re.sibling}B.type===wo?(k=Fs(B.props.children,V.mode,Q,B.key),k.return=V,V=k):(Q=mu(B.type,B.key,B.props,null,V.mode,Q),Q.ref=Ea(V,k,B),Q.return=V,V=Q)}return g(V);case yo:e:{for(re=B.key;k!==null;){if(k.key===re)if(k.tag===4&&k.stateNode.containerInfo===B.containerInfo&&k.stateNode.implementation===B.implementation){n(V,k.sibling),k=a(k,B.children||[]),k.return=V,V=k;break e}else{n(V,k);break}else e(V,k);k=k.sibling}k=xh(B,V.mode,Q),k.return=V,V=k}return g(V);case zi:return re=B._init,te(V,k,re(B._payload),Q)}if(Ia(B))return Y(V,k,B,Q);if(pa(B))return q(V,k,B,Q);Ql(V,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,k!==null&&k.tag===6?(n(V,k.sibling),k=a(k,B),k.return=V,V=k):(n(V,k),k=wh(B,V.mode,Q),k.return=V,V=k),g(V)):n(V,k)}return te}var zo=Kp(!0),qp=Kp(!1),ku=fs(null),Lu=null,To=null,g1=null;function p1(){g1=To=Lu=null}function m1(t){var e=ku.current;At(ku),t._currentValue=e}function of(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Mo(t,e){Lu=t,g1=To=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qn=!0),t.firstContext=null)}function Tr(t){var e=t._currentValue;if(g1!==t)if(t={context:t,memoizedValue:e,next:null},To===null){if(Lu===null)throw Error(ae(308));To=t,Lu.dependencies={lanes:0,firstContext:t}}else To=To.next=t;return e}var Ms=null;function y1(t){Ms===null?Ms=[t]:Ms.push(t)}function Yp(t,e,n,i){var a=e.interleaved;return a===null?(n.next=n,y1(e)):(n.next=a.next,a.next=n),e.interleaved=n,Ci(t,i)}function Ci(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hi=!1;function w1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $i(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Qe&2){var a=i.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),i.pending=e,Ci(t,n)}return a=i.interleaved,a===null?(e.next=e,y1(i)):(e.next=a.next,a.next=e),i.interleaved=e,Ci(t,n)}function cu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,r1(t,n)}}function r0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var g={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?a=u=g:u=u.next=g,n=n.next}while(n!==null);u===null?a=u=e:u=u.next=e}else a=u=e;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:u,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bu(t,e,n,i){var a=t.updateQueue;Hi=!1;var u=a.firstBaseUpdate,g=a.lastBaseUpdate,m=a.shared.pending;if(m!==null){a.shared.pending=null;var x=m,w=x.next;x.next=null,g===null?u=w:g.next=w,g=x;var I=t.alternate;I!==null&&(I=I.updateQueue,m=I.lastBaseUpdate,m!==g&&(m===null?I.firstBaseUpdate=w:m.next=w,I.lastBaseUpdate=x))}if(u!==null){var S=a.baseState;g=0,I=w=x=null,m=u;do{var P=m.lane,U=m.eventTime;if((i&P)===P){I!==null&&(I=I.next={eventTime:U,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var Y=t,q=m;switch(P=e,U=n,q.tag){case 1:if(Y=q.payload,typeof Y=="function"){S=Y.call(U,S,P);break e}S=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=q.payload,P=typeof Y=="function"?Y.call(U,S,P):Y,P==null)break e;S=kt({},S,P);break e;case 2:Hi=!0}}m.callback!==null&&m.lane!==0&&(t.flags|=64,P=a.effects,P===null?a.effects=[m]:P.push(m))}else U={eventTime:U,lane:P,tag:m.tag,payload:m.payload,callback:m.callback,next:null},I===null?(w=I=U,x=S):I=I.next=U,g|=P;if(m=m.next,m===null){if(m=a.shared.pending,m===null)break;P=m,m=P.next,P.next=null,a.lastBaseUpdate=P,a.shared.pending=null}}while(!0);if(I===null&&(x=S),a.baseState=x,a.firstBaseUpdate=w,a.lastBaseUpdate=I,e=a.shared.interleaved,e!==null){a=e;do g|=a.lane,a=a.next;while(a!==e)}else u===null&&(a.shared.lanes=0);Ws|=g,t.lanes=g,t.memoizedState=S}}function i0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(ae(191,a));a.call(i)}}}var El={},ni=fs(El),nl=fs(El),rl=fs(El);function ks(t){if(t===El)throw Error(ae(174));return t}function x1(t,e){switch(gt(rl,e),gt(nl,t),gt(ni,El),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vh(e,t)}At(ni),gt(ni,e)}function Ho(){At(ni),At(nl),At(rl)}function Zp(t){ks(rl.current);var e=ks(ni.current),n=Vh(e,t.type);e!==n&&(gt(nl,t),gt(ni,n))}function E1(t){nl.current===t&&(At(ni),At(nl))}var Pt=fs(0);function Fu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fh=[];function _1(){for(var t=0;t<fh.length;t++)fh[t]._workInProgressVersionPrimary=null;fh.length=0}var hu=Ri.ReactCurrentDispatcher,dh=Ri.ReactCurrentBatchConfig,Hs=0,Mt=null,rn=null,dn=null,Vu=!1,Ba=!1,il=0,Ix=0;function Tn(){throw Error(ae(321))}function A1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ur(t[n],e[n]))return!1;return!0}function C1(t,e,n,i,a,u){if(Hs=u,Mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hu.current=t===null||t.memoizedState===null?Nx:Ox,t=n(i,a),Ba){u=0;do{if(Ba=!1,il=0,25<=u)throw Error(ae(301));u+=1,dn=rn=null,e.updateQueue=null,hu.current=Dx,t=n(i,a)}while(Ba)}if(hu.current=Uu,e=rn!==null&&rn.next!==null,Hs=0,dn=rn=Mt=null,Vu=!1,e)throw Error(ae(300));return t}function v1(){var t=il!==0;return il=0,t}function $r(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Mt.memoizedState=dn=t:dn=dn.next=t,dn}function Sr(){if(rn===null){var t=Mt.alternate;t=t!==null?t.memoizedState:null}else t=rn.next;var e=dn===null?Mt.memoizedState:dn.next;if(e!==null)dn=e,rn=t;else{if(t===null)throw Error(ae(310));rn=t,t={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},dn===null?Mt.memoizedState=dn=t:dn=dn.next=t}return dn}function sl(t,e){return typeof e=="function"?e(t):e}function gh(t){var e=Sr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=rn,a=i.baseQueue,u=n.pending;if(u!==null){if(a!==null){var g=a.next;a.next=u.next,u.next=g}i.baseQueue=a=u,n.pending=null}if(a!==null){u=a.next,i=i.baseState;var m=g=null,x=null,w=u;do{var I=w.lane;if((Hs&I)===I)x!==null&&(x=x.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),i=w.hasEagerState?w.eagerState:t(i,w.action);else{var S={lane:I,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};x===null?(m=x=S,g=i):x=x.next=S,Mt.lanes|=I,Ws|=I}w=w.next}while(w!==null&&w!==u);x===null?g=i:x.next=m,Ur(i,e.memoizedState)||(qn=!0),e.memoizedState=i,e.baseState=g,e.baseQueue=x,n.lastRenderedState=i}if(t=n.interleaved,t!==null){a=t;do u=a.lane,Mt.lanes|=u,Ws|=u,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ph(t){var e=Sr(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=n.dispatch,a=n.pending,u=e.memoizedState;if(a!==null){n.pending=null;var g=a=a.next;do u=t(u,g.action),g=g.next;while(g!==a);Ur(u,e.memoizedState)||(qn=!0),e.memoizedState=u,e.baseQueue===null&&(e.baseState=u),n.lastRenderedState=u}return[u,i]}function $p(){}function Jp(t,e){var n=Mt,i=Sr(),a=e(),u=!Ur(i.memoizedState,a);if(u&&(i.memoizedState=a,qn=!0),i=i.queue,I1(nm.bind(null,n,i,t),[t]),i.getSnapshot!==e||u||dn!==null&&dn.memoizedState.tag&1){if(n.flags|=2048,ol(9,tm.bind(null,n,i,a,e),void 0,null),gn===null)throw Error(ae(349));Hs&30||em(n,e,a)}return a}function em(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tm(t,e,n,i){e.value=n,e.getSnapshot=i,rm(e)&&im(t)}function nm(t,e,n){return n(function(){rm(e)&&im(t)})}function rm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ur(t,n)}catch{return!0}}function im(t){var e=Ci(t,1);e!==null&&Vr(e,t,1,-1)}function s0(t){var e=$r();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:t},e.queue=t,t=t.dispatch=Rx.bind(null,Mt,t),[e.memoizedState,t]}function ol(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function sm(){return Sr().memoizedState}function fu(t,e,n,i){var a=$r();Mt.flags|=t,a.memoizedState=ol(1|e,n,void 0,i===void 0?null:i)}function gc(t,e,n,i){var a=Sr();i=i===void 0?null:i;var u=void 0;if(rn!==null){var g=rn.memoizedState;if(u=g.destroy,i!==null&&A1(i,g.deps)){a.memoizedState=ol(e,n,u,i);return}}Mt.flags|=t,a.memoizedState=ol(1|e,n,u,i)}function o0(t,e){return fu(8390656,8,t,e)}function I1(t,e){return gc(2048,8,t,e)}function om(t,e){return gc(4,2,t,e)}function am(t,e){return gc(4,4,t,e)}function lm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function um(t,e,n){return n=n!=null?n.concat([t]):null,gc(4,4,lm.bind(null,e,t),n)}function T1(){}function cm(t,e){var n=Sr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&A1(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function hm(t,e){var n=Sr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&A1(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function fm(t,e,n){return Hs&21?(Ur(n,e)||(n=yp(),Mt.lanes|=n,Ws|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qn=!0),t.memoizedState=n)}function Tx(t,e){var n=st;st=n!==0&&4>n?n:4,t(!0);var i=dh.transition;dh.transition={};try{t(!1),e()}finally{st=n,dh.transition=i}}function dm(){return Sr().memoizedState}function Sx(t,e,n){var i=es(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},gm(t))pm(e,n);else if(n=Yp(t,e,n,i),n!==null){var a=Bn();Vr(n,t,i,a),mm(n,e,i)}}function Rx(t,e,n){var i=es(t),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(gm(t))pm(e,a);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=e.lastRenderedReducer,u!==null))try{var g=e.lastRenderedState,m=u(g,n);if(a.hasEagerState=!0,a.eagerState=m,Ur(m,g)){var x=e.interleaved;x===null?(a.next=a,y1(e)):(a.next=x.next,x.next=a),e.interleaved=a;return}}catch{}finally{}n=Yp(t,e,a,i),n!==null&&(a=Bn(),Vr(n,t,i,a),mm(n,e,i))}}function gm(t){var e=t.alternate;return t===Mt||e!==null&&e===Mt}function pm(t,e){Ba=Vu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mm(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,r1(t,n)}}var Uu={readContext:Tr,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useInsertionEffect:Tn,useLayoutEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useMutableSource:Tn,useSyncExternalStore:Tn,useId:Tn,unstable_isNewReconciler:!1},Nx={readContext:Tr,useCallback:function(t,e){return $r().memoizedState=[t,e===void 0?null:e],t},useContext:Tr,useEffect:o0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fu(4194308,4,lm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fu(4194308,4,t,e)},useInsertionEffect:function(t,e){return fu(4,2,t,e)},useMemo:function(t,e){var n=$r();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=$r();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Sx.bind(null,Mt,t),[i.memoizedState,t]},useRef:function(t){var e=$r();return t={current:t},e.memoizedState=t},useState:s0,useDebugValue:T1,useDeferredValue:function(t){return $r().memoizedState=t},useTransition:function(){var t=s0(!1),e=t[0];return t=Tx.bind(null,t[1]),$r().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Mt,a=$r();if(Tt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),gn===null)throw Error(ae(349));Hs&30||em(i,e,n)}a.memoizedState=n;var u={value:n,getSnapshot:e};return a.queue=u,o0(nm.bind(null,i,u,t),[t]),i.flags|=2048,ol(9,tm.bind(null,i,u,n,e),void 0,null),n},useId:function(){var t=$r(),e=gn.identifierPrefix;if(Tt){var n=yi,i=mi;n=(i&~(1<<32-Fr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=il++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ix++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ox={readContext:Tr,useCallback:cm,useContext:Tr,useEffect:I1,useImperativeHandle:um,useInsertionEffect:om,useLayoutEffect:am,useMemo:hm,useReducer:gh,useRef:sm,useState:function(){return gh(sl)},useDebugValue:T1,useDeferredValue:function(t){var e=Sr();return fm(e,rn.memoizedState,t)},useTransition:function(){var t=gh(sl)[0],e=Sr().memoizedState;return[t,e]},useMutableSource:$p,useSyncExternalStore:Jp,useId:dm,unstable_isNewReconciler:!1},Dx={readContext:Tr,useCallback:cm,useContext:Tr,useEffect:I1,useImperativeHandle:um,useInsertionEffect:om,useLayoutEffect:am,useMemo:hm,useReducer:ph,useRef:sm,useState:function(){return ph(sl)},useDebugValue:T1,useDeferredValue:function(t){var e=Sr();return rn===null?e.memoizedState=t:fm(e,rn.memoizedState,t)},useTransition:function(){var t=ph(sl)[0],e=Sr().memoizedState;return[t,e]},useMutableSource:$p,useSyncExternalStore:Jp,useId:dm,unstable_isNewReconciler:!1};function Mr(t,e){if(t&&t.defaultProps){e=kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function af(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pc={isMounted:function(t){return(t=t._reactInternals)?Qs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Bn(),a=es(t),u=wi(i,a);u.payload=e,n!=null&&(u.callback=n),e=$i(t,u,a),e!==null&&(Vr(e,t,a,i),cu(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Bn(),a=es(t),u=wi(i,a);u.tag=1,u.payload=e,n!=null&&(u.callback=n),e=$i(t,u,a),e!==null&&(Vr(e,t,a,i),cu(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bn(),i=es(t),a=wi(n,i);a.tag=2,e!=null&&(a.callback=e),e=$i(t,a,i),e!==null&&(Vr(e,t,i,n),cu(e,t,i))}};function a0(t,e,n,i,a,u,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,u,g):e.prototype&&e.prototype.isPureReactComponent?!$a(n,i)||!$a(a,u):!0}function ym(t,e,n){var i=!1,a=os,u=e.contextType;return typeof u=="object"&&u!==null?u=Tr(u):(a=Qn(e)?Us:bn.current,i=e.contextTypes,u=(i=i!=null)?Vo(t,a):os),e=new e(n,u),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=u),e}function l0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&pc.enqueueReplaceState(e,e.state,null)}function lf(t,e,n,i){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},w1(t);var u=e.contextType;typeof u=="object"&&u!==null?a.context=Tr(u):(u=Qn(e)?Us:bn.current,a.context=Vo(t,u)),a.state=t.memoizedState,u=e.getDerivedStateFromProps,typeof u=="function"&&(af(t,e,u,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&pc.enqueueReplaceState(a,a.state,null),Bu(t,n,a,i),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Wo(t,e){try{var n="",i=e;do n+=sw(i),i=i.return;while(i);var a=n}catch(u){a=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:e,stack:a,digest:null}}function mh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bx=typeof WeakMap=="function"?WeakMap:Map;function wm(t,e,n){n=wi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Hu||(Hu=!0,xf=i),uf(t,e)},n}function xm(t,e,n){n=wi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var a=e.value;n.payload=function(){return i(a)},n.callback=function(){uf(t,e)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){uf(t,e),typeof i!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var g=e.stack;this.componentDidCatch(e.value,{componentStack:g!==null?g:""})}),n}function u0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new bx;var a=new Set;i.set(e,a)}else a=i.get(e),a===void 0&&(a=new Set,i.set(e,a));a.has(n)||(a.add(n),t=Xx.bind(null,t,e,n),e.then(t,t))}function c0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function h0(t,e,n,i,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wi(-1,1),e.tag=2,$i(n,e,1))),n.lanes|=1),t)}var Px=Ri.ReactCurrentOwner,qn=!1;function Ln(t,e,n,i){e.child=t===null?qp(e,null,n,i):zo(e,t.child,n,i)}function f0(t,e,n,i,a){n=n.render;var u=e.ref;return Mo(e,a),i=C1(t,e,n,i,u,a),n=v1(),t!==null&&!qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,vi(t,e,a)):(Tt&&n&&h1(e),e.flags|=1,Ln(t,e,i,a),e.child)}function d0(t,e,n,i,a){if(t===null){var u=n.type;return typeof u=="function"&&!M1(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=u,Em(t,e,u,i,a)):(t=mu(n.type,null,i,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(u=t.child,!(t.lanes&a)){var g=u.memoizedProps;if(n=n.compare,n=n!==null?n:$a,n(g,i)&&t.ref===e.ref)return vi(t,e,a)}return e.flags|=1,t=ts(u,i),t.ref=e.ref,t.return=e,e.child=t}function Em(t,e,n,i,a){if(t!==null){var u=t.memoizedProps;if($a(u,i)&&t.ref===e.ref)if(qn=!1,e.pendingProps=i=u,(t.lanes&a)!==0)t.flags&131072&&(qn=!0);else return e.lanes=t.lanes,vi(t,e,a)}return cf(t,e,n,i,a)}function _m(t,e,n){var i=e.pendingProps,a=i.children,u=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(Ro,cr),cr|=n;else{if(!(n&1073741824))return t=u!==null?u.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,gt(Ro,cr),cr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=u!==null?u.baseLanes:n,gt(Ro,cr),cr|=i}else u!==null?(i=u.baseLanes|n,e.memoizedState=null):i=n,gt(Ro,cr),cr|=i;return Ln(t,e,a,n),e.child}function Am(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cf(t,e,n,i,a){var u=Qn(n)?Us:bn.current;return u=Vo(e,u),Mo(e,a),n=C1(t,e,n,i,u,a),i=v1(),t!==null&&!qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,vi(t,e,a)):(Tt&&i&&h1(e),e.flags|=1,Ln(t,e,n,a),e.child)}function g0(t,e,n,i,a){if(Qn(n)){var u=!0;bu(e)}else u=!1;if(Mo(e,a),e.stateNode===null)du(t,e),ym(e,n,i),lf(e,n,i,a),i=!0;else if(t===null){var g=e.stateNode,m=e.memoizedProps;g.props=m;var x=g.context,w=n.contextType;typeof w=="object"&&w!==null?w=Tr(w):(w=Qn(n)?Us:bn.current,w=Vo(e,w));var I=n.getDerivedStateFromProps,S=typeof I=="function"||typeof g.getSnapshotBeforeUpdate=="function";S||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(m!==i||x!==w)&&l0(e,g,i,w),Hi=!1;var P=e.memoizedState;g.state=P,Bu(e,i,g,a),x=e.memoizedState,m!==i||P!==x||Yn.current||Hi?(typeof I=="function"&&(af(e,n,I,i),x=e.memoizedState),(m=Hi||a0(e,n,m,i,P,x,w))?(S||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(e.flags|=4194308)):(typeof g.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=x),g.props=i,g.state=x,g.context=w,i=m):(typeof g.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{g=e.stateNode,Qp(t,e),m=e.memoizedProps,w=e.type===e.elementType?m:Mr(e.type,m),g.props=w,S=e.pendingProps,P=g.context,x=n.contextType,typeof x=="object"&&x!==null?x=Tr(x):(x=Qn(n)?Us:bn.current,x=Vo(e,x));var U=n.getDerivedStateFromProps;(I=typeof U=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(m!==S||P!==x)&&l0(e,g,i,x),Hi=!1,P=e.memoizedState,g.state=P,Bu(e,i,g,a);var Y=e.memoizedState;m!==S||P!==Y||Yn.current||Hi?(typeof U=="function"&&(af(e,n,U,i),Y=e.memoizedState),(w=Hi||a0(e,n,w,i,P,Y,x)||!1)?(I||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(i,Y,x),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(i,Y,x)),typeof g.componentDidUpdate=="function"&&(e.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof g.componentDidUpdate!="function"||m===t.memoizedProps&&P===t.memoizedState||(e.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&P===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=Y),g.props=i,g.state=Y,g.context=x,i=w):(typeof g.componentDidUpdate!="function"||m===t.memoizedProps&&P===t.memoizedState||(e.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&P===t.memoizedState||(e.flags|=1024),i=!1)}return hf(t,e,n,i,u,a)}function hf(t,e,n,i,a,u){Am(t,e);var g=(e.flags&128)!==0;if(!i&&!g)return a&&Jd(e,n,!1),vi(t,e,u);i=e.stateNode,Px.current=e;var m=g&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&g?(e.child=zo(e,t.child,null,u),e.child=zo(e,null,m,u)):Ln(t,e,m,u),e.memoizedState=i.state,a&&Jd(e,n,!0),e.child}function Cm(t){var e=t.stateNode;e.pendingContext?$d(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$d(t,e.context,!1),x1(t,e.containerInfo)}function p0(t,e,n,i,a){return Uo(),d1(a),e.flags|=256,Ln(t,e,n,i),e.child}var ff={dehydrated:null,treeContext:null,retryLane:0};function df(t){return{baseLanes:t,cachePool:null,transitions:null}}function vm(t,e,n){var i=e.pendingProps,a=Pt.current,u=!1,g=(e.flags&128)!==0,m;if((m=g)||(m=t!==null&&t.memoizedState===null?!1:(a&2)!==0),m?(u=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),gt(Pt,a&1),t===null)return sf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(g=i.children,t=i.fallback,u?(i=e.mode,u=e.child,g={mode:"hidden",children:g},!(i&1)&&u!==null?(u.childLanes=0,u.pendingProps=g):u=wc(g,i,0,null),t=Fs(t,i,n,null),u.return=e,t.return=e,u.sibling=t,e.child=u,e.child.memoizedState=df(n),e.memoizedState=ff,t):S1(e,g));if(a=t.memoizedState,a!==null&&(m=a.dehydrated,m!==null))return Mx(t,e,g,i,m,a,n);if(u){u=i.fallback,g=e.mode,a=t.child,m=a.sibling;var x={mode:"hidden",children:i.children};return!(g&1)&&e.child!==a?(i=e.child,i.childLanes=0,i.pendingProps=x,e.deletions=null):(i=ts(a,x),i.subtreeFlags=a.subtreeFlags&14680064),m!==null?u=ts(m,u):(u=Fs(u,g,n,null),u.flags|=2),u.return=e,i.return=e,i.sibling=u,e.child=i,i=u,u=e.child,g=t.child.memoizedState,g=g===null?df(n):{baseLanes:g.baseLanes|n,cachePool:null,transitions:g.transitions},u.memoizedState=g,u.childLanes=t.childLanes&~n,e.memoizedState=ff,i}return u=t.child,t=u.sibling,i=ts(u,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function S1(t,e){return e=wc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zl(t,e,n,i){return i!==null&&d1(i),zo(e,t.child,null,n),t=S1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mx(t,e,n,i,a,u,g){if(n)return e.flags&256?(e.flags&=-257,i=mh(Error(ae(422))),Zl(t,e,g,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(u=i.fallback,a=e.mode,i=wc({mode:"visible",children:i.children},a,0,null),u=Fs(u,a,g,null),u.flags|=2,i.return=e,u.return=e,i.sibling=u,e.child=i,e.mode&1&&zo(e,t.child,null,g),e.child.memoizedState=df(g),e.memoizedState=ff,u);if(!(e.mode&1))return Zl(t,e,g,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var m=i.dgst;return i=m,u=Error(ae(419)),i=mh(u,i,void 0),Zl(t,e,g,i)}if(m=(g&t.childLanes)!==0,qn||m){if(i=gn,i!==null){switch(g&-g){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|g)?0:a,a!==0&&a!==u.retryLane&&(u.retryLane=a,Ci(t,a),Vr(i,t,a,-1))}return P1(),i=mh(Error(ae(421))),Zl(t,e,g,i)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Kx.bind(null,t),a._reactRetry=e,null):(t=u.treeContext,fr=Zi(a.nextSibling),dr=e,Tt=!0,Lr=null,t!==null&&(Ar[Cr++]=mi,Ar[Cr++]=yi,Ar[Cr++]=zs,mi=t.id,yi=t.overflow,zs=e),e=S1(e,i.children),e.flags|=4096,e)}function m0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),of(t.return,e,n)}function yh(t,e,n,i,a){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(u.isBackwards=e,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=n,u.tailMode=a)}function Im(t,e,n){var i=e.pendingProps,a=i.revealOrder,u=i.tail;if(Ln(t,e,i.children,n),i=Pt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&m0(t,n,e);else if(t.tag===19)m0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(gt(Pt,i),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&Fu(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),yh(e,!1,a,n,u);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&Fu(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}yh(e,!0,n,null,u);break;case"together":yh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function du(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ws|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=ts(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ts(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kx(t,e,n){switch(e.tag){case 3:Cm(e),Uo();break;case 5:Zp(e);break;case 1:Qn(e.type)&&bu(e);break;case 4:x1(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,a=e.memoizedProps.value;gt(ku,i._currentValue),i._currentValue=a;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(gt(Pt,Pt.current&1),e.flags|=128,null):n&e.child.childLanes?vm(t,e,n):(gt(Pt,Pt.current&1),t=vi(t,e,n),t!==null?t.sibling:null);gt(Pt,Pt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Im(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),gt(Pt,Pt.current),i)break;return null;case 22:case 23:return e.lanes=0,_m(t,e,n)}return vi(t,e,n)}var Tm,gf,Sm,Rm;Tm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gf=function(){};Sm=function(t,e,n,i){var a=t.memoizedProps;if(a!==i){t=e.stateNode,ks(ni.current);var u=null;switch(n){case"input":a=kh(t,a),i=kh(t,i),u=[];break;case"select":a=kt({},a,{value:void 0}),i=kt({},i,{value:void 0}),u=[];break;case"textarea":a=Fh(t,a),i=Fh(t,i),u=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ou)}Uh(n,i);var g;n=null;for(w in a)if(!i.hasOwnProperty(w)&&a.hasOwnProperty(w)&&a[w]!=null)if(w==="style"){var m=a[w];for(g in m)m.hasOwnProperty(g)&&(n||(n={}),n[g]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(ja.hasOwnProperty(w)?u||(u=[]):(u=u||[]).push(w,null));for(w in i){var x=i[w];if(m=a!=null?a[w]:void 0,i.hasOwnProperty(w)&&x!==m&&(x!=null||m!=null))if(w==="style")if(m){for(g in m)!m.hasOwnProperty(g)||x&&x.hasOwnProperty(g)||(n||(n={}),n[g]="");for(g in x)x.hasOwnProperty(g)&&m[g]!==x[g]&&(n||(n={}),n[g]=x[g])}else n||(u||(u=[]),u.push(w,n)),n=x;else w==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,m=m?m.__html:void 0,x!=null&&m!==x&&(u=u||[]).push(w,x)):w==="children"?typeof x!="string"&&typeof x!="number"||(u=u||[]).push(w,""+x):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(ja.hasOwnProperty(w)?(x!=null&&w==="onScroll"&&Et("scroll",t),u||m===x||(u=[])):(u=u||[]).push(w,x))}n&&(u=u||[]).push("style",n);var w=u;(e.updateQueue=w)&&(e.flags|=4)}};Rm=function(t,e,n,i){n!==i&&(e.flags|=4)};function _a(t,e){if(!Tt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Lx(t,e,n){var i=e.pendingProps;switch(f1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(e),null;case 1:return Qn(e.type)&&Du(),Sn(e),null;case 3:return i=e.stateNode,Ho(),At(Yn),At(bn),_1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Yl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lr!==null&&(Af(Lr),Lr=null))),gf(t,e),Sn(e),null;case 5:E1(e);var a=ks(rl.current);if(n=e.type,t!==null&&e.stateNode!=null)Sm(t,e,n,i,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ae(166));return Sn(e),null}if(t=ks(ni.current),Yl(e)){i=e.stateNode,n=e.type;var u=e.memoizedProps;switch(i[ei]=e,i[tl]=u,t=(e.mode&1)!==0,n){case"dialog":Et("cancel",i),Et("close",i);break;case"iframe":case"object":case"embed":Et("load",i);break;case"video":case"audio":for(a=0;a<Sa.length;a++)Et(Sa[a],i);break;case"source":Et("error",i);break;case"img":case"image":case"link":Et("error",i),Et("load",i);break;case"details":Et("toggle",i);break;case"input":Id(i,u),Et("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!u.multiple},Et("invalid",i);break;case"textarea":Sd(i,u),Et("invalid",i)}Uh(n,u),a=null;for(var g in u)if(u.hasOwnProperty(g)){var m=u[g];g==="children"?typeof m=="string"?i.textContent!==m&&(u.suppressHydrationWarning!==!0&&ql(i.textContent,m,t),a=["children",m]):typeof m=="number"&&i.textContent!==""+m&&(u.suppressHydrationWarning!==!0&&ql(i.textContent,m,t),a=["children",""+m]):ja.hasOwnProperty(g)&&m!=null&&g==="onScroll"&&Et("scroll",i)}switch(n){case"input":Ul(i),Td(i,u,!0);break;case"textarea":Ul(i),Rd(i);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(i.onclick=Ou)}i=a,e.updateQueue=i,i!==null&&(e.flags|=4)}else{g=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=np(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=g.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=g.createElement(n,{is:i.is}):(t=g.createElement(n),n==="select"&&(g=t,i.multiple?g.multiple=!0:i.size&&(g.size=i.size))):t=g.createElementNS(t,n),t[ei]=e,t[tl]=i,Tm(t,e,!1,!1),e.stateNode=t;e:{switch(g=zh(n,i),n){case"dialog":Et("cancel",t),Et("close",t),a=i;break;case"iframe":case"object":case"embed":Et("load",t),a=i;break;case"video":case"audio":for(a=0;a<Sa.length;a++)Et(Sa[a],t);a=i;break;case"source":Et("error",t),a=i;break;case"img":case"image":case"link":Et("error",t),Et("load",t),a=i;break;case"details":Et("toggle",t),a=i;break;case"input":Id(t,i),a=kh(t,i),Et("invalid",t);break;case"option":a=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},a=kt({},i,{value:void 0}),Et("invalid",t);break;case"textarea":Sd(t,i),a=Fh(t,i),Et("invalid",t);break;default:a=i}Uh(n,a),m=a;for(u in m)if(m.hasOwnProperty(u)){var x=m[u];u==="style"?sp(t,x):u==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&rp(t,x)):u==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&Xa(t,x):typeof x=="number"&&Xa(t,""+x):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ja.hasOwnProperty(u)?x!=null&&u==="onScroll"&&Et("scroll",t):x!=null&&Zf(t,u,x,g))}switch(n){case"input":Ul(t),Td(t,i,!1);break;case"textarea":Ul(t),Rd(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ss(i.value));break;case"select":t.multiple=!!i.multiple,u=i.value,u!=null?Oo(t,!!i.multiple,u,!1):i.defaultValue!=null&&Oo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Ou)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Sn(e),null;case 6:if(t&&e.stateNode!=null)Rm(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ae(166));if(n=ks(rl.current),ks(ni.current),Yl(e)){if(i=e.stateNode,n=e.memoizedProps,i[ei]=e,(u=i.nodeValue!==n)&&(t=dr,t!==null))switch(t.tag){case 3:ql(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ql(i.nodeValue,n,(t.mode&1)!==0)}u&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ei]=e,e.stateNode=i}return Sn(e),null;case 13:if(At(Pt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Tt&&fr!==null&&e.mode&1&&!(e.flags&128))Xp(),Uo(),e.flags|=98560,u=!1;else if(u=Yl(e),i!==null&&i.dehydrated!==null){if(t===null){if(!u)throw Error(ae(318));if(u=e.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(ae(317));u[ei]=e}else Uo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Sn(e),u=!1}else Lr!==null&&(Af(Lr),Lr=null),u=!0;if(!u)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Pt.current&1?on===0&&(on=3):P1())),e.updateQueue!==null&&(e.flags|=4),Sn(e),null);case 4:return Ho(),gf(t,e),t===null&&Ja(e.stateNode.containerInfo),Sn(e),null;case 10:return m1(e.type._context),Sn(e),null;case 17:return Qn(e.type)&&Du(),Sn(e),null;case 19:if(At(Pt),u=e.memoizedState,u===null)return Sn(e),null;if(i=(e.flags&128)!==0,g=u.rendering,g===null)if(i)_a(u,!1);else{if(on!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(g=Fu(t),g!==null){for(e.flags|=128,_a(u,!1),i=g.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)u=n,t=i,u.flags&=14680066,g=u.alternate,g===null?(u.childLanes=0,u.lanes=t,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,t=g.dependencies,u.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return gt(Pt,Pt.current&1|2),e.child}t=t.sibling}u.tail!==null&&jt()>Go&&(e.flags|=128,i=!0,_a(u,!1),e.lanes=4194304)}else{if(!i)if(t=Fu(g),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_a(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Tt)return Sn(e),null}else 2*jt()-u.renderingStartTime>Go&&n!==1073741824&&(e.flags|=128,i=!0,_a(u,!1),e.lanes=4194304);u.isBackwards?(g.sibling=e.child,e.child=g):(n=u.last,n!==null?n.sibling=g:e.child=g,u.last=g)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=jt(),e.sibling=null,n=Pt.current,gt(Pt,i?n&1|2:n&1),e):(Sn(e),null);case 22:case 23:return b1(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?cr&1073741824&&(Sn(e),e.subtreeFlags&6&&(e.flags|=8192)):Sn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function Bx(t,e){switch(f1(e),e.tag){case 1:return Qn(e.type)&&Du(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ho(),At(Yn),At(bn),_1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return E1(e),null;case 13:if(At(Pt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));Uo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return At(Pt),null;case 4:return Ho(),null;case 10:return m1(e.type._context),null;case 22:case 23:return b1(),null;case 24:return null;default:return null}}var $l=!1,On=!1,Fx=typeof WeakSet=="function"?WeakSet:Set,ye=null;function So(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ut(t,e,i)}else n.current=null}function pf(t,e,n){try{n()}catch(i){Ut(t,e,i)}}var y0=!1;function Vx(t,e){if(Zh=Su,t=Pp(),c1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var g=0,m=-1,x=-1,w=0,I=0,S=t,P=null;t:for(;;){for(var U;S!==n||a!==0&&S.nodeType!==3||(m=g+a),S!==u||i!==0&&S.nodeType!==3||(x=g+i),S.nodeType===3&&(g+=S.nodeValue.length),(U=S.firstChild)!==null;)P=S,S=U;for(;;){if(S===t)break t;if(P===n&&++w===a&&(m=g),P===u&&++I===i&&(x=g),(U=S.nextSibling)!==null)break;S=P,P=S.parentNode}S=U}n=m===-1||x===-1?null:{start:m,end:x}}else n=null}n=n||{start:0,end:0}}else n=null;for($h={focusedElem:t,selectionRange:n},Su=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var Y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var q=Y.memoizedProps,te=Y.memoizedState,V=e.stateNode,k=V.getSnapshotBeforeUpdate(e.elementType===e.type?q:Mr(e.type,q),te);V.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var B=e.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(Q){Ut(e,e.return,Q)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return Y=y0,y0=!1,Y}function Fa(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&t)===t){var u=a.destroy;a.destroy=void 0,u!==void 0&&pf(e,n,u)}a=a.next}while(a!==i)}}function mc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function mf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Nm(t){var e=t.alternate;e!==null&&(t.alternate=null,Nm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ei],delete e[tl],delete e[tf],delete e[_x],delete e[Ax])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Om(t){return t.tag===5||t.tag===3||t.tag===4}function w0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Om(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ou));else if(i!==4&&(t=t.child,t!==null))for(yf(t,e,n),t=t.sibling;t!==null;)yf(t,e,n),t=t.sibling}function wf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(wf(t,e,n),t=t.sibling;t!==null;)wf(t,e,n),t=t.sibling}var wn=null,kr=!1;function Ui(t,e,n){for(n=n.child;n!==null;)Dm(t,e,n),n=n.sibling}function Dm(t,e,n){if(ti&&typeof ti.onCommitFiberUnmount=="function")try{ti.onCommitFiberUnmount(lc,n)}catch{}switch(n.tag){case 5:On||So(n,e);case 6:var i=wn,a=kr;wn=null,Ui(t,e,n),wn=i,kr=a,wn!==null&&(kr?(t=wn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wn.removeChild(n.stateNode));break;case 18:wn!==null&&(kr?(t=wn,n=n.stateNode,t.nodeType===8?ch(t.parentNode,n):t.nodeType===1&&ch(t,n),Qa(t)):ch(wn,n.stateNode));break;case 4:i=wn,a=kr,wn=n.stateNode.containerInfo,kr=!0,Ui(t,e,n),wn=i,kr=a;break;case 0:case 11:case 14:case 15:if(!On&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var u=a,g=u.destroy;u=u.tag,g!==void 0&&(u&2||u&4)&&pf(n,e,g),a=a.next}while(a!==i)}Ui(t,e,n);break;case 1:if(!On&&(So(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(m){Ut(n,e,m)}Ui(t,e,n);break;case 21:Ui(t,e,n);break;case 22:n.mode&1?(On=(i=On)||n.memoizedState!==null,Ui(t,e,n),On=i):Ui(t,e,n);break;default:Ui(t,e,n)}}function x0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Fx),e.forEach(function(i){var a=qx.bind(null,t,i);n.has(i)||(n.add(i),i.then(a,a))})}}function Pr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var u=t,g=e,m=g;e:for(;m!==null;){switch(m.tag){case 5:wn=m.stateNode,kr=!1;break e;case 3:wn=m.stateNode.containerInfo,kr=!0;break e;case 4:wn=m.stateNode.containerInfo,kr=!0;break e}m=m.return}if(wn===null)throw Error(ae(160));Dm(u,g,a),wn=null,kr=!1;var x=a.alternate;x!==null&&(x.return=null),a.return=null}catch(w){Ut(a,e,w)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bm(e,t),e=e.sibling}function bm(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pr(e,t),Zr(t),i&4){try{Fa(3,t,t.return),mc(3,t)}catch(q){Ut(t,t.return,q)}try{Fa(5,t,t.return)}catch(q){Ut(t,t.return,q)}}break;case 1:Pr(e,t),Zr(t),i&512&&n!==null&&So(n,n.return);break;case 5:if(Pr(e,t),Zr(t),i&512&&n!==null&&So(n,n.return),t.flags&32){var a=t.stateNode;try{Xa(a,"")}catch(q){Ut(t,t.return,q)}}if(i&4&&(a=t.stateNode,a!=null)){var u=t.memoizedProps,g=n!==null?n.memoizedProps:u,m=t.type,x=t.updateQueue;if(t.updateQueue=null,x!==null)try{m==="input"&&u.type==="radio"&&u.name!=null&&ep(a,u),zh(m,g);var w=zh(m,u);for(g=0;g<x.length;g+=2){var I=x[g],S=x[g+1];I==="style"?sp(a,S):I==="dangerouslySetInnerHTML"?rp(a,S):I==="children"?Xa(a,S):Zf(a,I,S,w)}switch(m){case"input":Lh(a,u);break;case"textarea":tp(a,u);break;case"select":var P=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!u.multiple;var U=u.value;U!=null?Oo(a,!!u.multiple,U,!1):P!==!!u.multiple&&(u.defaultValue!=null?Oo(a,!!u.multiple,u.defaultValue,!0):Oo(a,!!u.multiple,u.multiple?[]:"",!1))}a[tl]=u}catch(q){Ut(t,t.return,q)}}break;case 6:if(Pr(e,t),Zr(t),i&4){if(t.stateNode===null)throw Error(ae(162));a=t.stateNode,u=t.memoizedProps;try{a.nodeValue=u}catch(q){Ut(t,t.return,q)}}break;case 3:if(Pr(e,t),Zr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Qa(e.containerInfo)}catch(q){Ut(t,t.return,q)}break;case 4:Pr(e,t),Zr(t);break;case 13:Pr(e,t),Zr(t),a=t.child,a.flags&8192&&(u=a.memoizedState!==null,a.stateNode.isHidden=u,!u||a.alternate!==null&&a.alternate.memoizedState!==null||(O1=jt())),i&4&&x0(t);break;case 22:if(I=n!==null&&n.memoizedState!==null,t.mode&1?(On=(w=On)||I,Pr(e,t),On=w):Pr(e,t),Zr(t),i&8192){if(w=t.memoizedState!==null,(t.stateNode.isHidden=w)&&!I&&t.mode&1)for(ye=t,I=t.child;I!==null;){for(S=ye=I;ye!==null;){switch(P=ye,U=P.child,P.tag){case 0:case 11:case 14:case 15:Fa(4,P,P.return);break;case 1:So(P,P.return);var Y=P.stateNode;if(typeof Y.componentWillUnmount=="function"){i=P,n=P.return;try{e=i,Y.props=e.memoizedProps,Y.state=e.memoizedState,Y.componentWillUnmount()}catch(q){Ut(i,n,q)}}break;case 5:So(P,P.return);break;case 22:if(P.memoizedState!==null){_0(S);continue}}U!==null?(U.return=P,ye=U):_0(S)}I=I.sibling}e:for(I=null,S=t;;){if(S.tag===5){if(I===null){I=S;try{a=S.stateNode,w?(u=a.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(m=S.stateNode,x=S.memoizedProps.style,g=x!=null&&x.hasOwnProperty("display")?x.display:null,m.style.display=ip("display",g))}catch(q){Ut(t,t.return,q)}}}else if(S.tag===6){if(I===null)try{S.stateNode.nodeValue=w?"":S.memoizedProps}catch(q){Ut(t,t.return,q)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===t)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===t)break e;for(;S.sibling===null;){if(S.return===null||S.return===t)break e;I===S&&(I=null),S=S.return}I===S&&(I=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:Pr(e,t),Zr(t),i&4&&x0(t);break;case 21:break;default:Pr(e,t),Zr(t)}}function Zr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Om(n)){var i=n;break e}n=n.return}throw Error(ae(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(Xa(a,""),i.flags&=-33);var u=w0(t);wf(t,u,a);break;case 3:case 4:var g=i.stateNode.containerInfo,m=w0(t);yf(t,m,g);break;default:throw Error(ae(161))}}catch(x){Ut(t,t.return,x)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ux(t,e,n){ye=t,Pm(t)}function Pm(t,e,n){for(var i=(t.mode&1)!==0;ye!==null;){var a=ye,u=a.child;if(a.tag===22&&i){var g=a.memoizedState!==null||$l;if(!g){var m=a.alternate,x=m!==null&&m.memoizedState!==null||On;m=$l;var w=On;if($l=g,(On=x)&&!w)for(ye=a;ye!==null;)g=ye,x=g.child,g.tag===22&&g.memoizedState!==null?A0(a):x!==null?(x.return=g,ye=x):A0(a);for(;u!==null;)ye=u,Pm(u),u=u.sibling;ye=a,$l=m,On=w}E0(t)}else a.subtreeFlags&8772&&u!==null?(u.return=a,ye=u):E0(t)}}function E0(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:On||mc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!On)if(n===null)i.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:Mr(e.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=e.updateQueue;u!==null&&i0(e,u,i);break;case 3:var g=e.updateQueue;if(g!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}i0(e,g,n)}break;case 5:var m=e.stateNode;if(n===null&&e.flags&4){n=m;var x=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&n.focus();break;case"img":x.src&&(n.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var w=e.alternate;if(w!==null){var I=w.memoizedState;if(I!==null){var S=I.dehydrated;S!==null&&Qa(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}On||e.flags&512&&mf(e)}catch(P){Ut(e,e.return,P)}}if(e===t){ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}}function _0(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ye=n;break}ye=e.return}}function A0(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mc(4,e)}catch(x){Ut(e,n,x)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var a=e.return;try{i.componentDidMount()}catch(x){Ut(e,a,x)}}var u=e.return;try{mf(e)}catch(x){Ut(e,u,x)}break;case 5:var g=e.return;try{mf(e)}catch(x){Ut(e,g,x)}}}catch(x){Ut(e,e.return,x)}if(e===t){ye=null;break}var m=e.sibling;if(m!==null){m.return=e.return,ye=m;break}ye=e.return}}var zx=Math.ceil,zu=Ri.ReactCurrentDispatcher,R1=Ri.ReactCurrentOwner,Ir=Ri.ReactCurrentBatchConfig,Qe=0,gn=null,Yt=null,_n=0,cr=0,Ro=fs(0),on=0,al=null,Ws=0,yc=0,N1=0,Va=null,Kn=null,O1=0,Go=1/0,gi=null,Hu=!1,xf=null,Ji=null,Jl=!1,Xi=null,Wu=0,Ua=0,Ef=null,gu=-1,pu=0;function Bn(){return Qe&6?jt():gu!==-1?gu:gu=jt()}function es(t){return t.mode&1?Qe&2&&_n!==0?_n&-_n:vx.transition!==null?(pu===0&&(pu=yp()),pu):(t=st,t!==0||(t=window.event,t=t===void 0?16:vp(t.type)),t):1}function Vr(t,e,n,i){if(50<Ua)throw Ua=0,Ef=null,Error(ae(185));yl(t,n,i),(!(Qe&2)||t!==gn)&&(t===gn&&(!(Qe&2)&&(yc|=n),on===4&&Gi(t,_n)),Zn(t,i),n===1&&Qe===0&&!(e.mode&1)&&(Go=jt()+500,dc&&ds()))}function Zn(t,e){var n=t.callbackNode;vw(t,e);var i=Tu(t,t===gn?_n:0);if(i===0)n!==null&&Dd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Dd(n),e===1)t.tag===0?Cx(C0.bind(null,t)):Wp(C0.bind(null,t)),xx(function(){!(Qe&6)&&ds()}),n=null;else{switch(wp(i)){case 1:n=n1;break;case 4:n=pp;break;case 16:n=Iu;break;case 536870912:n=mp;break;default:n=Iu}n=zm(n,Mm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Mm(t,e){if(gu=-1,pu=0,Qe&6)throw Error(ae(327));var n=t.callbackNode;if(ko()&&t.callbackNode!==n)return null;var i=Tu(t,t===gn?_n:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Gu(t,i);else{e=i;var a=Qe;Qe|=2;var u=Lm();(gn!==t||_n!==e)&&(gi=null,Go=jt()+500,Bs(t,e));do try{Gx();break}catch(m){km(t,m)}while(!0);p1(),zu.current=u,Qe=a,Yt!==null?e=0:(gn=null,_n=0,e=on)}if(e!==0){if(e===2&&(a=Xh(t),a!==0&&(i=a,e=_f(t,a))),e===1)throw n=al,Bs(t,0),Gi(t,i),Zn(t,jt()),n;if(e===6)Gi(t,i);else{if(a=t.current.alternate,!(i&30)&&!Hx(a)&&(e=Gu(t,i),e===2&&(u=Xh(t),u!==0&&(i=u,e=_f(t,u))),e===1))throw n=al,Bs(t,0),Gi(t,i),Zn(t,jt()),n;switch(t.finishedWork=a,t.finishedLanes=i,e){case 0:case 1:throw Error(ae(345));case 2:Ds(t,Kn,gi);break;case 3:if(Gi(t,i),(i&130023424)===i&&(e=O1+500-jt(),10<e)){if(Tu(t,0)!==0)break;if(a=t.suspendedLanes,(a&i)!==i){Bn(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=ef(Ds.bind(null,t,Kn,gi),e);break}Ds(t,Kn,gi);break;case 4:if(Gi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,a=-1;0<i;){var g=31-Fr(i);u=1<<g,g=e[g],g>a&&(a=g),i&=~u}if(i=a,i=jt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*zx(i/1960))-i,10<i){t.timeoutHandle=ef(Ds.bind(null,t,Kn,gi),i);break}Ds(t,Kn,gi);break;case 5:Ds(t,Kn,gi);break;default:throw Error(ae(329))}}}return Zn(t,jt()),t.callbackNode===n?Mm.bind(null,t):null}function _f(t,e){var n=Va;return t.current.memoizedState.isDehydrated&&(Bs(t,e).flags|=256),t=Gu(t,e),t!==2&&(e=Kn,Kn=n,e!==null&&Af(e)),t}function Af(t){Kn===null?Kn=t:Kn.push.apply(Kn,t)}function Hx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],u=a.getSnapshot;a=a.value;try{if(!Ur(u(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gi(t,e){for(e&=~N1,e&=~yc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fr(e),i=1<<n;t[n]=-1,e&=~i}}function C0(t){if(Qe&6)throw Error(ae(327));ko();var e=Tu(t,0);if(!(e&1))return Zn(t,jt()),null;var n=Gu(t,e);if(t.tag!==0&&n===2){var i=Xh(t);i!==0&&(e=i,n=_f(t,i))}if(n===1)throw n=al,Bs(t,0),Gi(t,e),Zn(t,jt()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ds(t,Kn,gi),Zn(t,jt()),null}function D1(t,e){var n=Qe;Qe|=1;try{return t(e)}finally{Qe=n,Qe===0&&(Go=jt()+500,dc&&ds())}}function Gs(t){Xi!==null&&Xi.tag===0&&!(Qe&6)&&ko();var e=Qe;Qe|=1;var n=Ir.transition,i=st;try{if(Ir.transition=null,st=1,t)return t()}finally{st=i,Ir.transition=n,Qe=e,!(Qe&6)&&ds()}}function b1(){cr=Ro.current,At(Ro)}function Bs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wx(n)),Yt!==null)for(n=Yt.return;n!==null;){var i=n;switch(f1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Du();break;case 3:Ho(),At(Yn),At(bn),_1();break;case 5:E1(i);break;case 4:Ho();break;case 13:At(Pt);break;case 19:At(Pt);break;case 10:m1(i.type._context);break;case 22:case 23:b1()}n=n.return}if(gn=t,Yt=t=ts(t.current,null),_n=cr=e,on=0,al=null,N1=yc=Ws=0,Kn=Va=null,Ms!==null){for(e=0;e<Ms.length;e++)if(n=Ms[e],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,u=n.pending;if(u!==null){var g=u.next;u.next=a,i.next=g}n.pending=i}Ms=null}return t}function km(t,e){do{var n=Yt;try{if(p1(),hu.current=Uu,Vu){for(var i=Mt.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Vu=!1}if(Hs=0,dn=rn=Mt=null,Ba=!1,il=0,R1.current=null,n===null||n.return===null){on=1,al=e,Yt=null;break}e:{var u=t,g=n.return,m=n,x=e;if(e=_n,m.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var w=x,I=m,S=I.tag;if(!(I.mode&1)&&(S===0||S===11||S===15)){var P=I.alternate;P?(I.updateQueue=P.updateQueue,I.memoizedState=P.memoizedState,I.lanes=P.lanes):(I.updateQueue=null,I.memoizedState=null)}var U=c0(g);if(U!==null){U.flags&=-257,h0(U,g,m,u,e),U.mode&1&&u0(u,w,e),e=U,x=w;var Y=e.updateQueue;if(Y===null){var q=new Set;q.add(x),e.updateQueue=q}else Y.add(x);break e}else{if(!(e&1)){u0(u,w,e),P1();break e}x=Error(ae(426))}}else if(Tt&&m.mode&1){var te=c0(g);if(te!==null){!(te.flags&65536)&&(te.flags|=256),h0(te,g,m,u,e),d1(Wo(x,m));break e}}u=x=Wo(x,m),on!==4&&(on=2),Va===null?Va=[u]:Va.push(u),u=g;do{switch(u.tag){case 3:u.flags|=65536,e&=-e,u.lanes|=e;var V=wm(u,x,e);r0(u,V);break e;case 1:m=x;var k=u.type,B=u.stateNode;if(!(u.flags&128)&&(typeof k.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Ji===null||!Ji.has(B)))){u.flags|=65536,e&=-e,u.lanes|=e;var Q=xm(u,m,e);r0(u,Q);break e}}u=u.return}while(u!==null)}Fm(n)}catch(he){e=he,Yt===n&&n!==null&&(Yt=n=n.return);continue}break}while(!0)}function Lm(){var t=zu.current;return zu.current=Uu,t===null?Uu:t}function P1(){(on===0||on===3||on===2)&&(on=4),gn===null||!(Ws&268435455)&&!(yc&268435455)||Gi(gn,_n)}function Gu(t,e){var n=Qe;Qe|=2;var i=Lm();(gn!==t||_n!==e)&&(gi=null,Bs(t,e));do try{Wx();break}catch(a){km(t,a)}while(!0);if(p1(),Qe=n,zu.current=i,Yt!==null)throw Error(ae(261));return gn=null,_n=0,on}function Wx(){for(;Yt!==null;)Bm(Yt)}function Gx(){for(;Yt!==null&&!pw();)Bm(Yt)}function Bm(t){var e=Um(t.alternate,t,cr);t.memoizedProps=t.pendingProps,e===null?Fm(t):Yt=e,R1.current=null}function Fm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Bx(n,e),n!==null){n.flags&=32767,Yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{on=6,Yt=null;return}}else if(n=Lx(n,e,cr),n!==null){Yt=n;return}if(e=e.sibling,e!==null){Yt=e;return}Yt=e=t}while(e!==null);on===0&&(on=5)}function Ds(t,e,n){var i=st,a=Ir.transition;try{Ir.transition=null,st=1,jx(t,e,n,i)}finally{Ir.transition=a,st=i}return null}function jx(t,e,n,i){do ko();while(Xi!==null);if(Qe&6)throw Error(ae(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var u=n.lanes|n.childLanes;if(Iw(t,u),t===gn&&(Yt=gn=null,_n=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jl||(Jl=!0,zm(Iu,function(){return ko(),null})),u=(n.flags&15990)!==0,n.subtreeFlags&15990||u){u=Ir.transition,Ir.transition=null;var g=st;st=1;var m=Qe;Qe|=4,R1.current=null,Vx(t,n),bm(n,t),hx($h),Su=!!Zh,$h=Zh=null,t.current=n,Ux(n),mw(),Qe=m,st=g,Ir.transition=u}else t.current=n;if(Jl&&(Jl=!1,Xi=t,Wu=a),u=t.pendingLanes,u===0&&(Ji=null),xw(n.stateNode),Zn(t,jt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(Hu)throw Hu=!1,t=xf,xf=null,t;return Wu&1&&t.tag!==0&&ko(),u=t.pendingLanes,u&1?t===Ef?Ua++:(Ua=0,Ef=t):Ua=0,ds(),null}function ko(){if(Xi!==null){var t=wp(Wu),e=Ir.transition,n=st;try{if(Ir.transition=null,st=16>t?16:t,Xi===null)var i=!1;else{if(t=Xi,Xi=null,Wu=0,Qe&6)throw Error(ae(331));var a=Qe;for(Qe|=4,ye=t.current;ye!==null;){var u=ye,g=u.child;if(ye.flags&16){var m=u.deletions;if(m!==null){for(var x=0;x<m.length;x++){var w=m[x];for(ye=w;ye!==null;){var I=ye;switch(I.tag){case 0:case 11:case 15:Fa(8,I,u)}var S=I.child;if(S!==null)S.return=I,ye=S;else for(;ye!==null;){I=ye;var P=I.sibling,U=I.return;if(Nm(I),I===w){ye=null;break}if(P!==null){P.return=U,ye=P;break}ye=U}}}var Y=u.alternate;if(Y!==null){var q=Y.child;if(q!==null){Y.child=null;do{var te=q.sibling;q.sibling=null,q=te}while(q!==null)}}ye=u}}if(u.subtreeFlags&2064&&g!==null)g.return=u,ye=g;else e:for(;ye!==null;){if(u=ye,u.flags&2048)switch(u.tag){case 0:case 11:case 15:Fa(9,u,u.return)}var V=u.sibling;if(V!==null){V.return=u.return,ye=V;break e}ye=u.return}}var k=t.current;for(ye=k;ye!==null;){g=ye;var B=g.child;if(g.subtreeFlags&2064&&B!==null)B.return=g,ye=B;else e:for(g=k;ye!==null;){if(m=ye,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:mc(9,m)}}catch(he){Ut(m,m.return,he)}if(m===g){ye=null;break e}var Q=m.sibling;if(Q!==null){Q.return=m.return,ye=Q;break e}ye=m.return}}if(Qe=a,ds(),ti&&typeof ti.onPostCommitFiberRoot=="function")try{ti.onPostCommitFiberRoot(lc,t)}catch{}i=!0}return i}finally{st=n,Ir.transition=e}}return!1}function v0(t,e,n){e=Wo(n,e),e=wm(t,e,1),t=$i(t,e,1),e=Bn(),t!==null&&(yl(t,1,e),Zn(t,e))}function Ut(t,e,n){if(t.tag===3)v0(t,t,n);else for(;e!==null;){if(e.tag===3){v0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ji===null||!Ji.has(i))){t=Wo(n,t),t=xm(e,t,1),e=$i(e,t,1),t=Bn(),e!==null&&(yl(e,1,t),Zn(e,t));break}}e=e.return}}function Xx(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Bn(),t.pingedLanes|=t.suspendedLanes&n,gn===t&&(_n&n)===n&&(on===4||on===3&&(_n&130023424)===_n&&500>jt()-O1?Bs(t,0):N1|=n),Zn(t,e)}function Vm(t,e){e===0&&(t.mode&1?(e=Wl,Wl<<=1,!(Wl&130023424)&&(Wl=4194304)):e=1);var n=Bn();t=Ci(t,e),t!==null&&(yl(t,e,n),Zn(t,n))}function Kx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Vm(t,n)}function qx(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ae(314))}i!==null&&i.delete(e),Vm(t,n)}var Um;Um=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yn.current)qn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qn=!1,kx(t,e,n);qn=!!(t.flags&131072)}else qn=!1,Tt&&e.flags&1048576&&Gp(e,Mu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;du(t,e),t=e.pendingProps;var a=Vo(e,bn.current);Mo(e,n),a=C1(null,e,i,t,a,n);var u=v1();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qn(i)?(u=!0,bu(e)):u=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,w1(e),a.updater=pc,e.stateNode=a,a._reactInternals=e,lf(e,i,t,n),e=hf(null,e,i,!0,u,n)):(e.tag=0,Tt&&u&&h1(e),Ln(null,e,a,n),e=e.child),e;case 16:i=e.elementType;e:{switch(du(t,e),t=e.pendingProps,a=i._init,i=a(i._payload),e.type=i,a=e.tag=Qx(i),t=Mr(i,t),a){case 0:e=cf(null,e,i,t,n);break e;case 1:e=g0(null,e,i,t,n);break e;case 11:e=f0(null,e,i,t,n);break e;case 14:e=d0(null,e,i,Mr(i.type,t),n);break e}throw Error(ae(306,i,""))}return e;case 0:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Mr(i,a),cf(t,e,i,a,n);case 1:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Mr(i,a),g0(t,e,i,a,n);case 3:e:{if(Cm(e),t===null)throw Error(ae(387));i=e.pendingProps,u=e.memoizedState,a=u.element,Qp(t,e),Bu(e,i,null,n);var g=e.memoizedState;if(i=g.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},e.updateQueue.baseState=u,e.memoizedState=u,e.flags&256){a=Wo(Error(ae(423)),e),e=p0(t,e,i,n,a);break e}else if(i!==a){a=Wo(Error(ae(424)),e),e=p0(t,e,i,n,a);break e}else for(fr=Zi(e.stateNode.containerInfo.firstChild),dr=e,Tt=!0,Lr=null,n=qp(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Uo(),i===a){e=vi(t,e,n);break e}Ln(t,e,i,n)}e=e.child}return e;case 5:return Zp(e),t===null&&sf(e),i=e.type,a=e.pendingProps,u=t!==null?t.memoizedProps:null,g=a.children,Jh(i,a)?g=null:u!==null&&Jh(i,u)&&(e.flags|=32),Am(t,e),Ln(t,e,g,n),e.child;case 6:return t===null&&sf(e),null;case 13:return vm(t,e,n);case 4:return x1(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=zo(e,null,i,n):Ln(t,e,i,n),e.child;case 11:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Mr(i,a),f0(t,e,i,a,n);case 7:return Ln(t,e,e.pendingProps,n),e.child;case 8:return Ln(t,e,e.pendingProps.children,n),e.child;case 12:return Ln(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,a=e.pendingProps,u=e.memoizedProps,g=a.value,gt(ku,i._currentValue),i._currentValue=g,u!==null)if(Ur(u.value,g)){if(u.children===a.children&&!Yn.current){e=vi(t,e,n);break e}}else for(u=e.child,u!==null&&(u.return=e);u!==null;){var m=u.dependencies;if(m!==null){g=u.child;for(var x=m.firstContext;x!==null;){if(x.context===i){if(u.tag===1){x=wi(-1,n&-n),x.tag=2;var w=u.updateQueue;if(w!==null){w=w.shared;var I=w.pending;I===null?x.next=x:(x.next=I.next,I.next=x),w.pending=x}}u.lanes|=n,x=u.alternate,x!==null&&(x.lanes|=n),of(u.return,n,e),m.lanes|=n;break}x=x.next}}else if(u.tag===10)g=u.type===e.type?null:u.child;else if(u.tag===18){if(g=u.return,g===null)throw Error(ae(341));g.lanes|=n,m=g.alternate,m!==null&&(m.lanes|=n),of(g,n,e),g=u.sibling}else g=u.child;if(g!==null)g.return=u;else for(g=u;g!==null;){if(g===e){g=null;break}if(u=g.sibling,u!==null){u.return=g.return,g=u;break}g=g.return}u=g}Ln(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,i=e.pendingProps.children,Mo(e,n),a=Tr(a),i=i(a),e.flags|=1,Ln(t,e,i,n),e.child;case 14:return i=e.type,a=Mr(i,e.pendingProps),a=Mr(i.type,a),d0(t,e,i,a,n);case 15:return Em(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Mr(i,a),du(t,e),e.tag=1,Qn(i)?(t=!0,bu(e)):t=!1,Mo(e,n),ym(e,i,a),lf(e,i,a,n),hf(null,e,i,!0,t,n);case 19:return Im(t,e,n);case 22:return _m(t,e,n)}throw Error(ae(156,e.tag))};function zm(t,e){return gp(t,e)}function Yx(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(t,e,n,i){return new Yx(t,e,n,i)}function M1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qx(t){if(typeof t=="function")return M1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jf)return 11;if(t===e1)return 14}return 2}function ts(t,e){var n=t.alternate;return n===null?(n=vr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mu(t,e,n,i,a,u){var g=2;if(i=t,typeof t=="function")M1(t)&&(g=1);else if(typeof t=="string")g=5;else e:switch(t){case wo:return Fs(n.children,a,u,e);case $f:g=8,a|=8;break;case Dh:return t=vr(12,n,e,a|2),t.elementType=Dh,t.lanes=u,t;case bh:return t=vr(13,n,e,a),t.elementType=bh,t.lanes=u,t;case Ph:return t=vr(19,n,e,a),t.elementType=Ph,t.lanes=u,t;case Zg:return wc(n,a,u,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Yg:g=10;break e;case Qg:g=9;break e;case Jf:g=11;break e;case e1:g=14;break e;case zi:g=16,i=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=vr(g,n,e,a),e.elementType=t,e.type=i,e.lanes=u,e}function Fs(t,e,n,i){return t=vr(7,t,i,e),t.lanes=n,t}function wc(t,e,n,i){return t=vr(22,t,i,e),t.elementType=Zg,t.lanes=n,t.stateNode={isHidden:!1},t}function wh(t,e,n){return t=vr(6,t,null,e),t.lanes=n,t}function xh(t,e,n){return e=vr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zx(t,e,n,i,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jc(0),this.expirationTimes=Jc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jc(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function k1(t,e,n,i,a,u,g,m,x){return t=new Zx(t,e,n,m,x),e===1?(e=1,u===!0&&(e|=8)):e=0,u=vr(3,null,null,e),t.current=u,u.stateNode=t,u.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},w1(u),t}function $x(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Hm(t){if(!t)return os;t=t._reactInternals;e:{if(Qs(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Qn(n))return Hp(t,n,e)}return e}function Wm(t,e,n,i,a,u,g,m,x){return t=k1(n,i,!0,t,a,u,g,m,x),t.context=Hm(null),n=t.current,i=Bn(),a=es(n),u=wi(i,a),u.callback=e??null,$i(n,u,a),t.current.lanes=a,yl(t,a,i),Zn(t,i),t}function xc(t,e,n,i){var a=e.current,u=Bn(),g=es(a);return n=Hm(n),e.context===null?e.context=n:e.pendingContext=n,e=wi(u,g),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=$i(a,e,g),t!==null&&(Vr(t,a,g,u),cu(t,a,g)),g}function ju(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function I0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function L1(t,e){I0(t,e),(t=t.alternate)&&I0(t,e)}function Jx(){return null}var Gm=typeof reportError=="function"?reportError:function(t){console.error(t)};function B1(t){this._internalRoot=t}Ec.prototype.render=B1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));xc(t,e,null,null)};Ec.prototype.unmount=B1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gs(function(){xc(null,t,null,null)}),e[Ai]=null}};function Ec(t){this._internalRoot=t}Ec.prototype.unstable_scheduleHydration=function(t){if(t){var e=_p();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wi.length&&e!==0&&e<Wi[n].priority;n++);Wi.splice(n,0,t),n===0&&Cp(t)}};function F1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function T0(){}function eE(t,e,n,i,a){if(a){if(typeof i=="function"){var u=i;i=function(){var w=ju(g);u.call(w)}}var g=Wm(e,i,t,0,null,!1,!1,"",T0);return t._reactRootContainer=g,t[Ai]=g.current,Ja(t.nodeType===8?t.parentNode:t),Gs(),g}for(;a=t.lastChild;)t.removeChild(a);if(typeof i=="function"){var m=i;i=function(){var w=ju(x);m.call(w)}}var x=k1(t,0,!1,null,null,!1,!1,"",T0);return t._reactRootContainer=x,t[Ai]=x.current,Ja(t.nodeType===8?t.parentNode:t),Gs(function(){xc(e,x,n,i)}),x}function Ac(t,e,n,i,a){var u=n._reactRootContainer;if(u){var g=u;if(typeof a=="function"){var m=a;a=function(){var x=ju(g);m.call(x)}}xc(e,g,t,a)}else g=eE(n,e,t,a,i);return ju(g)}xp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ta(e.pendingLanes);n!==0&&(r1(e,n|1),Zn(e,jt()),!(Qe&6)&&(Go=jt()+500,ds()))}break;case 13:Gs(function(){var i=Ci(t,1);if(i!==null){var a=Bn();Vr(i,t,1,a)}}),L1(t,1)}};i1=function(t){if(t.tag===13){var e=Ci(t,134217728);if(e!==null){var n=Bn();Vr(e,t,134217728,n)}L1(t,134217728)}};Ep=function(t){if(t.tag===13){var e=es(t),n=Ci(t,e);if(n!==null){var i=Bn();Vr(n,t,e,i)}L1(t,e)}};_p=function(){return st};Ap=function(t,e){var n=st;try{return st=t,e()}finally{st=n}};Wh=function(t,e,n){switch(e){case"input":if(Lh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var a=fc(i);if(!a)throw Error(ae(90));Jg(i),Lh(i,a)}}}break;case"textarea":tp(t,n);break;case"select":e=n.value,e!=null&&Oo(t,!!n.multiple,e,!1)}};lp=D1;up=Gs;var tE={usingClientEntryPoint:!1,Events:[xl,Ao,fc,op,ap,D1]},Aa={findFiberByHostInstance:Ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nE={bundleType:Aa.bundleType,version:Aa.version,rendererPackageName:Aa.rendererPackageName,rendererConfig:Aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fp(t),t===null?null:t.stateNode},findFiberByHostInstance:Aa.findFiberByHostInstance||Jx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{lc=eu.inject(nE),ti=eu}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tE;mr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!F1(e))throw Error(ae(200));return $x(t,e,null,n)};mr.createRoot=function(t,e){if(!F1(t))throw Error(ae(299));var n=!1,i="",a=Gm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=k1(t,1,!1,null,null,n,!1,i,a),t[Ai]=e.current,Ja(t.nodeType===8?t.parentNode:t),new B1(e)};mr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=fp(e),t=t===null?null:t.stateNode,t};mr.flushSync=function(t){return Gs(t)};mr.hydrate=function(t,e,n){if(!_c(e))throw Error(ae(200));return Ac(null,t,e,!0,n)};mr.hydrateRoot=function(t,e,n){if(!F1(t))throw Error(ae(405));var i=n!=null&&n.hydratedSources||null,a=!1,u="",g=Gm;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),e=Wm(e,null,t,1,n??null,a,!1,u,g),t[Ai]=e.current,Ja(t),i)for(t=0;t<i.length;t++)n=i[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new Ec(e)};mr.render=function(t,e,n){if(!_c(e))throw Error(ae(200));return Ac(null,t,e,!1,n)};mr.unmountComponentAtNode=function(t){if(!_c(t))throw Error(ae(40));return t._reactRootContainer?(Gs(function(){Ac(null,null,t,!1,function(){t._reactRootContainer=null,t[Ai]=null})}),!0):!1};mr.unstable_batchedUpdates=D1;mr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!_c(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Ac(t,e,n,!1,i)};mr.version="18.3.1-next-f1338f8080-20240426";function jm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jm)}catch(t){console.error(t)}}jm(),jg.exports=mr;var rE=jg.exports,Xm,S0=rE;Xm=S0.createRoot,S0.hydrateRoot;var me;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(me||(me={}));var R0=new Map([[me.QR_CODE,"QR_CODE"],[me.AZTEC,"AZTEC"],[me.CODABAR,"CODABAR"],[me.CODE_39,"CODE_39"],[me.CODE_93,"CODE_93"],[me.CODE_128,"CODE_128"],[me.DATA_MATRIX,"DATA_MATRIX"],[me.MAXICODE,"MAXICODE"],[me.ITF,"ITF"],[me.EAN_13,"EAN_13"],[me.EAN_8,"EAN_8"],[me.PDF_417,"PDF_417"],[me.RSS_14,"RSS_14"],[me.RSS_EXPANDED,"RSS_EXPANDED"],[me.UPC_A,"UPC_A"],[me.UPC_E,"UPC_E"],[me.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),N0;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(N0||(N0={}));function iE(t){return Object.values(me).includes(t)}var Xu;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Xu||(Xu={}));var sE=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Xu.SCAN_TYPE_CAMERA,Xu.SCAN_TYPE_FILE],t}(),Km=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!R0.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,R0.get(e))},t}(),O0=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Cf;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Cf||(Cf={}));var oE=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Cf.UNKWOWN_ERROR}},t}(),aE=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function di(t){return typeof t>"u"||t===null}var No=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),qm=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],u=new Set(a),g=Object.keys(e),m=0,x=g;m<x.length;m++){var w=x[m];if(u.has(w))return n.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},t}(),vf={exports:{}};(function(t,e){(function(n,i){i(e)})(ga,function(n){function i(C){return C==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,r){C.__proto__=r}||function(C,r){for(var s in r)r.hasOwnProperty(s)&&(C[s]=r[s])};function u(C,r){a(C,r);function s(){this.constructor=C}C.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function g(C,r){var s=Object.setPrototypeOf;s?s(C,r):C.__proto__=r}function m(C,r){r===void 0&&(r=C.constructor);var s=Error.captureStackTrace;s&&s(C,r)}var x=function(C){u(r,C);function r(s){var o=this.constructor,l=C.call(this,s)||this;return Object.defineProperty(l,"name",{value:o.name,enumerable:!1}),g(l,o.prototype),m(l),l}return r}(Error);class w extends x{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}w.kind="Exception";class I extends w{}I.kind="ArgumentException";class S extends w{}S.kind="IllegalArgumentException";class P{constructor(r){if(this.binarizer=r,r===null)throw new S("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,o,l){const c=this.binarizer.getLuminanceSource().crop(r,s,o,l);return new P(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new P(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new P(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class U extends w{static getChecksumInstance(){return new U}}U.kind="ChecksumException";class Y{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class q{static arraycopy(r,s,o,l,c){for(;c--;)o[l++]=r[s++]}static currentTimeMillis(){return Date.now()}}class te extends w{}te.kind="IndexOutOfBoundsException";class V extends te{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}V.kind="ArrayIndexOutOfBoundsException";class k{static fill(r,s){for(let o=0,l=r.length;o<l;o++)r[o]=s}static fillWithin(r,s,o,l){k.rangeCheck(r.length,s,o);for(let c=s;c<o;c++)r[c]=l}static rangeCheck(r,s,o){if(s>o)throw new S("fromIndex("+s+") > toIndex("+o+")");if(s<0)throw new V(s);if(o>r)throw new V(o)}static asList(...r){return r}static create(r,s,o){return Array.from({length:r}).map(c=>Array.from({length:s}).fill(o))}static createInt32Array(r,s,o){return Array.from({length:r}).map(c=>Int32Array.from({length:s}).fill(o))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let o=0,l=r.length;o<l;o++)if(r[o]!==s[o])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const o of r)s=31*s+o;return s}static fillUint8Array(r,s){for(let o=0;o!==r.length;o++)r[o]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const o=new Uint8Array(s);return o.set(r),o}return r.slice(0,s)}static copyOfRange(r,s,o){const l=o-s,c=new Int32Array(l);return q.arraycopy(r,s,c,0,l),c}static binarySearch(r,s,o){o===void 0&&(o=k.numberComparator);let l=0,c=r.length-1;for(;l<=c;){const h=c+l>>1,f=o(s,r[h]);if(f>0)l=h+1;else if(f<0)c=h-1;else return h}return-l-1}static numberComparator(r,s){return r-s}}class B{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let o=31;return s=r<<16,s!==0&&(o-=16,r=s),s=r<<8,s!==0&&(o-=8,r=s),s=r<<4,s!==0&&(o-=4,r=s),s=r<<2,s!==0&&(o-=2,r=s),o-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}B.MIN_VALUE_32_BITS=-2147483648,B.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Q{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=Q.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=Q.makeArray(r);q.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const o=this.bits;let l=Math.floor(r/32),c=o[l];c&=~((1<<(r&31))-1);const h=o.length;for(;c===0;){if(++l===h)return s;c=o[l]}const f=l*32+B.numberOfTrailingZeros(c);return f>s?s:f}getNextUnset(r){const s=this.size;if(r>=s)return s;const o=this.bits;let l=Math.floor(r/32),c=~o[l];c&=~((1<<(r&31))-1);const h=o.length;for(;c===0;){if(++l===h)return s;c=~o[l]}const f=l*32+B.numberOfTrailingZeros(c);return f>s?s:f}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new S;if(s===r)return;s--;const o=Math.floor(r/32),l=Math.floor(s/32),c=this.bits;for(let h=o;h<=l;h++){const f=h>o?0:r&31,y=(2<<(h<l?31:s&31))-(1<<f);c[h]|=y}}clear(){const r=this.bits.length,s=this.bits;for(let o=0;o<r;o++)s[o]=0}isRange(r,s,o){if(s<r||r<0||s>this.size)throw new S;if(s===r)return!0;s--;const l=Math.floor(r/32),c=Math.floor(s/32),h=this.bits;for(let f=l;f<=c;f++){const p=f>l?0:r&31,_=(2<<(f<c?31:s&31))-(1<<p)&4294967295;if((h[f]&_)!==(o?_:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new S("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let o=s;o>0;o--)this.appendBit((r>>o-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let o=0;o<s;o++)this.appendBit(r.get(o))}xor(r){if(this.size!==r.size)throw new S("Sizes don't match");const s=this.bits;for(let o=0,l=s.length;o<l;o++)s[o]^=r.bits[o]}toBytes(r,s,o,l){for(let c=0;c<l;c++){let h=0;for(let f=0;f<8;f++)this.get(r)&&(h|=1<<7-f),r++;s[o+c]=h}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),o=s+1,l=this.bits;for(let c=0;c<o;c++){let h=l[c];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,r[s-c]=h}if(this.size!==o*32){const c=o*32-this.size;let h=r[0]>>>c;for(let f=1;f<o;f++){const p=r[f];h|=p<<32-c,r[f-1]=h,h=p>>>c}r[o-1]=h}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof Q))return!1;const s=r;return this.size===s.size&&k.equals(this.bits,s.bits)}hashCode(){return 31*this.size+k.hashCode(this.bits)}toString(){let r="";for(let s=0,o=this.size;s<o;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new Q(this.size,this.bits.slice())}}var he;(function(C){C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(he||(he={}));var re=he;class D extends w{static getFormatInstance(){return new D}}D.kind="FormatException";var O;(function(C){C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR"})(O||(O={}));class N{constructor(r,s,o,...l){this.valueIdentifier=r,this.name=o,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=l,N.VALUE_IDENTIFIER_TO_ECI.set(r,this),N.NAME_TO_ECI.set(o,this);const c=this.values;for(let h=0,f=c.length;h!==f;h++){const p=c[h];N.VALUES_TO_ECI.set(p,this)}for(const h of l)N.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new D("incorect value");const s=N.VALUES_TO_ECI.get(r);if(s===void 0)throw new D("incorect value");return s}static getCharacterSetECIByName(r){const s=N.NAME_TO_ECI.get(r);if(s===void 0)throw new D("incorect value");return s}equals(r){if(!(r instanceof N))return!1;const s=r;return this.getName()===s.getName()}}N.VALUE_IDENTIFIER_TO_ECI=new Map,N.VALUES_TO_ECI=new Map,N.NAME_TO_ECI=new Map,N.Cp437=new N(O.Cp437,Int32Array.from([0,2]),"Cp437"),N.ISO8859_1=new N(O.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),N.ISO8859_2=new N(O.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),N.ISO8859_3=new N(O.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),N.ISO8859_4=new N(O.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),N.ISO8859_5=new N(O.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),N.ISO8859_6=new N(O.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),N.ISO8859_7=new N(O.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),N.ISO8859_8=new N(O.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),N.ISO8859_9=new N(O.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),N.ISO8859_10=new N(O.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),N.ISO8859_11=new N(O.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),N.ISO8859_13=new N(O.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),N.ISO8859_14=new N(O.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),N.ISO8859_15=new N(O.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),N.ISO8859_16=new N(O.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),N.SJIS=new N(O.SJIS,20,"SJIS","Shift_JIS"),N.Cp1250=new N(O.Cp1250,21,"Cp1250","windows-1250"),N.Cp1251=new N(O.Cp1251,22,"Cp1251","windows-1251"),N.Cp1252=new N(O.Cp1252,23,"Cp1252","windows-1252"),N.Cp1256=new N(O.Cp1256,24,"Cp1256","windows-1256"),N.UnicodeBigUnmarked=new N(O.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),N.UTF8=new N(O.UTF8,26,"UTF8","UTF-8"),N.ASCII=new N(O.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),N.Big5=new N(O.Big5,28,"Big5"),N.GB18030=new N(O.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),N.EUC_KR=new N(O.EUC_KR,30,"EUC_KR","EUC-KR");class F extends w{}F.kind="UnsupportedOperationException";class G{static decode(r,s){const o=this.encodingName(s);return this.customDecoder?this.customDecoder(r,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(r,o):new TextDecoder(o).decode(r)}static shouldDecodeOnFallback(r){return!G.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const o=this.encodingName(s);return this.customEncoder?this.customEncoder(r,o):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof N?r:N.getCharacterSetECIByName(r)}static decodeFallback(r,s){const o=this.encodingCharacterSet(s);if(G.isDecodeFallbackSupported(o)){let l="";for(let c=0,h=r.length;c<h;c++){let f=r[c].toString(16);f.length<2&&(f="0"+f),l+="%"+f}return decodeURIComponent(l)}if(o.equals(N.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new F(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(N.UTF8)||r.equals(N.ISO8859_1)||r.equals(N.ASCII)}static encodeFallback(r){const o=btoa(unescape(encodeURIComponent(r))).split(""),l=[];for(let c=0;c<o.length;c++)l.push(o[c].charCodeAt(0));return new Uint8Array(l)}}class H{static castAsNonUtf8Char(r,s=null){const o=s?s.getName():this.ISO88591;return G.decode(new Uint8Array([r]),o)}static guessEncoding(r,s){if(s!=null&&s.get(re.CHARACTER_SET)!==void 0)return s.get(re.CHARACTER_SET).toString();const o=r.length;let l=!0,c=!0,h=!0,f=0,p=0,y=0,_=0,v=0,T=0,M=0,z=0,W=0,K=0,J=0;const le=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let ue=0;ue<o&&(l||c||h);ue++){const ie=r[ue]&255;h&&(f>0?ie&128?f--:h=!1:ie&128&&(ie&64?(f++,ie&32?(f++,ie&16?(f++,ie&8?h=!1:_++):y++):p++):h=!1)),l&&(ie>127&&ie<160?l=!1:ie>159&&(ie<192||ie===215||ie===247)&&J++),c&&(v>0?ie<64||ie===127||ie>252?c=!1:v--:ie===128||ie===160||ie>239?c=!1:ie>160&&ie<224?(T++,z=0,M++,M>W&&(W=M)):ie>127?(v++,M=0,z++,z>K&&(K=z)):(M=0,z=0))}return h&&f>0&&(h=!1),c&&v>0&&(c=!1),h&&(le||p+y+_>0)?H.UTF8:c&&(H.ASSUME_SHIFT_JIS||W>=3||K>=3)?H.SHIFT_JIS:l&&c?W===2&&T===2||J*10>=o?H.SHIFT_JIS:H.ISO88591:l?H.ISO88591:c?H.SHIFT_JIS:h?H.UTF8:H.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let o=-1;function l(h,f,p,y,_,v){if(h==="%%")return"%";if(s[++o]===void 0)return;h=y?parseInt(y.substr(1)):void 0;let T=_?parseInt(_.substr(1)):void 0,M;switch(v){case"s":M=s[o];break;case"c":M=s[o][0];break;case"f":M=parseFloat(s[o]).toFixed(h);break;case"p":M=parseFloat(s[o]).toPrecision(h);break;case"e":M=parseFloat(s[o]).toExponential(h);break;case"x":M=parseInt(s[o]).toString(T||16);break;case"d":M=parseFloat(parseInt(s[o],T||10).toPrecision(h)).toFixed(0);break}M=typeof M=="object"?JSON.stringify(M):(+M).toString(T);let z=parseInt(p),W=p&&p[0]+""=="0"?"0":" ";for(;M.length<z;)M=f!==void 0?M+W:W+M;return M}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(c,l)}static getBytes(r,s){return G.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}H.SHIFT_JIS=N.SJIS.getName(),H.GB2312="GB2312",H.ISO88591=N.ISO8859_1.getName(),H.EUC_JP="EUC_JP",H.UTF8=N.UTF8.getName(),H.PLATFORM_DEFAULT_ENCODING=H.UTF8,H.ASSUME_SHIFT_JIS=!1;class L{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=H.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,o){for(let l=s;s<s+o;l++)this.append(r[l]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class $e{constructor(r,s,o,l){if(this.width=r,this.height=s,this.rowSize=o,this.bits=l,s==null&&(s=r),this.height=s,r<1||s<1)throw new S("Both dimensions must be greater than 0");o==null&&(o=Math.floor((r+31)/32)),this.rowSize=o,l==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,o=r[0].length,l=new $e(o,s);for(let c=0;c<s;c++){const h=r[c];for(let f=0;f<o;f++)h[f]&&l.set(f,c)}return l}static parseFromString(r,s,o){if(r===null)throw new S("stringRepresentation cannot be null");const l=new Array(r.length);let c=0,h=0,f=-1,p=0,y=0;for(;y<r.length;)if(r.charAt(y)===`
`||r.charAt(y)==="\r"){if(c>h){if(f===-1)f=c-h;else if(c-h!==f)throw new S("row lengths do not match");h=c,p++}y++}else if(r.substring(y,y+s.length)===s)y+=s.length,l[c]=!0,c++;else if(r.substring(y,y+o.length)===o)y+=o.length,l[c]=!1,c++;else throw new S("illegal character encountered: "+r.substring(y));if(c>h){if(f===-1)f=c-h;else if(c-h!==f)throw new S("row lengths do not match");p++}const _=new $e(f,p);for(let v=0;v<c;v++)l[v]&&_.set(Math.floor(v%f),Math.floor(v/f));return _}get(r,s){const o=s*this.rowSize+Math.floor(r/32);return(this.bits[o]>>>(r&31)&1)!==0}set(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]|=1<<(r&31)&4294967295}unset(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]&=~(1<<(r&31)&4294967295)}flip(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new S("input matrix dimensions do not match");const s=new Q(Math.floor(this.width/32)+1),o=this.rowSize,l=this.bits;for(let c=0,h=this.height;c<h;c++){const f=c*o,p=r.getRow(c,s).getBitArray();for(let y=0;y<o;y++)l[f+y]^=p[y]}}clear(){const r=this.bits,s=r.length;for(let o=0;o<s;o++)r[o]=0}setRegion(r,s,o,l){if(s<0||r<0)throw new S("Left and top must be nonnegative");if(l<1||o<1)throw new S("Height and width must be at least 1");const c=r+o,h=s+l;if(h>this.height||c>this.width)throw new S("The region must fit inside the matrix");const f=this.rowSize,p=this.bits;for(let y=s;y<h;y++){const _=y*f;for(let v=r;v<c;v++)p[_+Math.floor(v/32)]|=1<<(v&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new Q(this.width):s.clear();const o=this.rowSize,l=this.bits,c=r*o;for(let h=0;h<o;h++)s.setBulk(h*32,l[c+h]);return s}setRow(r,s){q.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let o=new Q(r),l=new Q(r);for(let c=0,h=Math.floor((s+1)/2);c<h;c++)o=this.getRow(c,o),l=this.getRow(s-1-c,l),o.reverse(),l.reverse(),this.setRow(c,l),this.setRow(s-1-c,o)}getEnclosingRectangle(){const r=this.width,s=this.height,o=this.rowSize,l=this.bits;let c=r,h=s,f=-1,p=-1;for(let y=0;y<s;y++)for(let _=0;_<o;_++){const v=l[y*o+_];if(v!==0){if(y<h&&(h=y),y>p&&(p=y),_*32<c){let T=0;for(;!(v<<31-T&4294967295);)T++;_*32+T<c&&(c=_*32+T)}if(_*32+31>f){let T=31;for(;!(v>>>T);)T--;_*32+T>f&&(f=_*32+T)}}}return f<c||p<h?null:Int32Array.from([c,h,f-c+1,p-h+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let o=0;for(;o<s.length&&s[o]===0;)o++;if(o===s.length)return null;const l=o/r;let c=o%r*32;const h=s[o];let f=0;for(;!(h<<31-f&4294967295);)f++;return c+=f,Int32Array.from([c,l])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let o=s.length-1;for(;o>=0&&s[o]===0;)o--;if(o<0)return null;const l=Math.floor(o/r);let c=Math.floor(o%r)*32;const h=s[o];let f=31;for(;!(h>>>f);)f--;return c+=f,Int32Array.from([c,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof $e))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&k.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+k.hashCode(this.bits),r}toString(r="X ",s="  ",o=`
`){return this.buildToString(r,s,o)}buildToString(r,s,o){let l=new L;for(let c=0,h=this.height;c<h;c++){for(let f=0,p=this.width;f<p;f++)l.append(this.get(f,c)?r:s);l.append(o)}return l.toString()}clone(){return new $e(this.width,this.height,this.rowSize,this.bits.slice())}}class ee extends w{static getNotFoundInstance(){return new ee}}ee.kind="NotFoundException";class Ct extends Y{constructor(r){super(r),this.luminances=Ct.EMPTY,this.buckets=new Int32Array(Ct.LUMINANCE_BUCKETS)}getBlackRow(r,s){const o=this.getLuminanceSource(),l=o.getWidth();s==null||s.getSize()<l?s=new Q(l):s.clear(),this.initArrays(l);const c=o.getRow(r,this.luminances),h=this.buckets;for(let p=0;p<l;p++)h[(c[p]&255)>>Ct.LUMINANCE_SHIFT]++;const f=Ct.estimateBlackPoint(h);if(l<3)for(let p=0;p<l;p++)(c[p]&255)<f&&s.set(p);else{let p=c[0]&255,y=c[1]&255;for(let _=1;_<l-1;_++){const v=c[_+1]&255;(y*4-p-v)/2<f&&s.set(_),p=y,y=v}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight(),l=new $e(s,o);this.initArrays(s);const c=this.buckets;for(let p=1;p<5;p++){const y=Math.floor(o*p/5),_=r.getRow(y,this.luminances),v=Math.floor(s*4/5);for(let T=Math.floor(s/5);T<v;T++){const M=_[T]&255;c[M>>Ct.LUMINANCE_SHIFT]++}}const h=Ct.estimateBlackPoint(c),f=r.getMatrix();for(let p=0;p<o;p++){const y=p*s;for(let _=0;_<s;_++)(f[y+_]&255)<h&&l.set(_,p)}return l}createBinarizer(r){return new Ct(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let o=0;o<Ct.LUMINANCE_BUCKETS;o++)s[o]=0}static estimateBlackPoint(r){const s=r.length;let o=0,l=0,c=0;for(let _=0;_<s;_++)r[_]>c&&(l=_,c=r[_]),r[_]>o&&(o=r[_]);let h=0,f=0;for(let _=0;_<s;_++){const v=_-l,T=r[_]*v*v;T>f&&(h=_,f=T)}if(l>h){const _=l;l=h,h=_}if(h-l<=s/16)throw new ee;let p=h-1,y=-1;for(let _=h-1;_>l;_--){const v=_-l,T=v*v*(h-_)*(o-r[_]);T>y&&(p=_,y=T)}return p<<Ct.LUMINANCE_SHIFT}}Ct.LUMINANCE_BITS=5,Ct.LUMINANCE_SHIFT=8-Ct.LUMINANCE_BITS,Ct.LUMINANCE_BUCKETS=1<<Ct.LUMINANCE_BITS,Ct.EMPTY=Uint8ClampedArray.from([0]);class Se extends Ct{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight();if(s>=Se.MINIMUM_DIMENSION&&o>=Se.MINIMUM_DIMENSION){const l=r.getMatrix();let c=s>>Se.BLOCK_SIZE_POWER;s&Se.BLOCK_SIZE_MASK&&c++;let h=o>>Se.BLOCK_SIZE_POWER;o&Se.BLOCK_SIZE_MASK&&h++;const f=Se.calculateBlackPoints(l,c,h,s,o),p=new $e(s,o);Se.calculateThresholdForBlock(l,c,h,s,o,f,p),this.matrix=p}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new Se(r)}static calculateThresholdForBlock(r,s,o,l,c,h,f){const p=c-Se.BLOCK_SIZE,y=l-Se.BLOCK_SIZE;for(let _=0;_<o;_++){let v=_<<Se.BLOCK_SIZE_POWER;v>p&&(v=p);const T=Se.cap(_,2,o-3);for(let M=0;M<s;M++){let z=M<<Se.BLOCK_SIZE_POWER;z>y&&(z=y);const W=Se.cap(M,2,s-3);let K=0;for(let le=-2;le<=2;le++){const ue=h[T+le];K+=ue[W-2]+ue[W-1]+ue[W]+ue[W+1]+ue[W+2]}const J=K/25;Se.thresholdBlock(r,z,v,J,l,f)}}}static cap(r,s,o){return r<s?s:r>o?o:r}static thresholdBlock(r,s,o,l,c,h){for(let f=0,p=o*c+s;f<Se.BLOCK_SIZE;f++,p+=c)for(let y=0;y<Se.BLOCK_SIZE;y++)(r[p+y]&255)<=l&&h.set(s+y,o+f)}static calculateBlackPoints(r,s,o,l,c){const h=c-Se.BLOCK_SIZE,f=l-Se.BLOCK_SIZE,p=new Array(o);for(let y=0;y<o;y++){p[y]=new Int32Array(s);let _=y<<Se.BLOCK_SIZE_POWER;_>h&&(_=h);for(let v=0;v<s;v++){let T=v<<Se.BLOCK_SIZE_POWER;T>f&&(T=f);let M=0,z=255,W=0;for(let J=0,le=_*l+T;J<Se.BLOCK_SIZE;J++,le+=l){for(let ue=0;ue<Se.BLOCK_SIZE;ue++){const ie=r[le+ue]&255;M+=ie,ie<z&&(z=ie),ie>W&&(W=ie)}if(W-z>Se.MIN_DYNAMIC_RANGE)for(J++,le+=l;J<Se.BLOCK_SIZE;J++,le+=l)for(let ue=0;ue<Se.BLOCK_SIZE;ue++)M+=r[le+ue]&255}let K=M>>Se.BLOCK_SIZE_POWER*2;if(W-z<=Se.MIN_DYNAMIC_RANGE&&(K=z/2,y>0&&v>0)){const J=(p[y-1][v]+2*p[y][v-1]+p[y-1][v-1])/4;z<J&&(K=J)}p[y][v]=K}}return p}}Se.BLOCK_SIZE_POWER=3,Se.BLOCK_SIZE=1<<Se.BLOCK_SIZE_POWER,Se.BLOCK_SIZE_MASK=Se.BLOCK_SIZE-1,Se.MINIMUM_DIMENSION=Se.BLOCK_SIZE*5,Se.MIN_DYNAMIC_RANGE=24;class ge{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,o,l){throw new F("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new F("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new F("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new L;for(let o=0;o<this.height;o++){const l=this.getRow(o,r);for(let c=0;c<this.width;c++){const h=l[c]&255;let f;h<64?f="#":h<128?f="+":h<192?f=".":f=" ",s.append(f)}s.append(`
`)}return s.toString()}}class Ce extends ge{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const o=this.delegate.getRow(r,s),l=this.getWidth();for(let c=0;c<l;c++)o[c]=255-(o[c]&255);return o}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(s);for(let l=0;l<s;l++)o[l]=255-(r[l]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,o,l){return new Ce(this.delegate.crop(r,s,o,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ce(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ce(this.delegate.rotateCounterClockwise45())}}class Re extends ge{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=Re.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return Re.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,o){const l=new Uint8ClampedArray(s*o);for(let c=0,h=0,f=r.length;c<f;c+=4,h++){let p;if(r[c+3]===0)p=255;else{const _=r[c],v=r[c+1],T=r[c+2];p=306*_+601*v+117*T+512>>10}l[h]=p}return l}getRow(r,s){if(r<0||r>=this.getHeight())throw new S("Requested row is outside the image: "+r);const o=this.getWidth(),l=r*o;return s===null?s=this.buffer.slice(l,l+o):(s.length<o&&(s=new Uint8ClampedArray(o)),s.set(this.buffer.slice(l,l+o))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,o,l){return super.crop(r,s,o,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),o=s.getContext("2d"),l=r*Re.DEGREE_TO_RADIANS,c=this.canvas.width,h=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(l))*c+Math.abs(Math.sin(l))*h),p=Math.ceil(Math.abs(Math.sin(l))*c+Math.abs(Math.cos(l))*h);return s.width=f,s.height=p,o.translate(f/2,p/2),o.rotate(l),o.drawImage(this.canvas,c/-2,h/-2),this.buffer=Re.makeBufferFromCanvasImageData(s),this}invert(){return new Ce(this)}}Re.DEGREE_TO_RADIANS=Math.PI/180;class ft{constructor(r,s,o){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Me=(globalThis||ga||self||window||void 0)&&(globalThis||ga||self||window||void 0).__awaiter||function(C,r,s,o){function l(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function f(_){try{y(o.next(_))}catch(v){h(v)}}function p(_){try{y(o.throw(_))}catch(v){h(v)}}function y(_){_.done?c(_.value):l(_.value).then(f,p)}y((o=o.apply(C,r||[])).next())})};class nt{constructor(r,s=500,o){this.reader=r,this.timeBetweenScansMillis=s,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Me(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const o of r){const l=o.kind==="video"?"videoinput":o.kind;if(l!=="videoinput")continue;const c=o.deviceId||o.id,h=o.label||`Video device ${s.length+1}`,f=o.groupId,p={deviceId:c,label:h,kind:l,groupId:f};s.push(p)}return s})}getVideoInputDevices(){return Me(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new ft(s.deviceId,s.label))})}findDeviceById(r){return Me(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(o=>o.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return Me(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return Me(this,void 0,void 0,function*(){this.reset();let o;r?o={deviceId:{exact:r}}:o={facingMode:"environment"};const l={video:o};return yield this.decodeOnceFromConstraints(l,s)})}decodeOnceFromConstraints(r,s){return Me(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(o,s)})}decodeOnceFromStream(r,s){return Me(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(r,s,o){return Me(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,o)})}decodeFromVideoDevice(r,s,o){return Me(this,void 0,void 0,function*(){let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeFromConstraints(c,s,o)})}decodeFromConstraints(r,s,o){return Me(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(l,s,o)})}decodeFromStream(r,s,o){return Me(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(l,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return Me(this,void 0,void 0,function*(){const o=this.prepareVideoElement(s);return this.addVideoSource(o,r),this.videoElement=o,this.stream=r,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(r){return new Promise((s,o)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Me(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const o=document.getElementById(r);if(!o)throw new I(`element with id '${r}' not found`);if(o.nodeName.toLowerCase()!==s.toLowerCase())throw new I(`element with id '${r}' must be an ${s} element`);return o}decodeFromImage(r,s){if(!r&&!s)throw new I("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new I("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,o){if(r===void 0&&s===void 0)throw new I("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,o):this.decodeFromVideoElementContinuously(r,o)}decodeFromImageElement(r){if(!r)throw new I("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let o;return this.isImageLoaded(s)?o=this.decodeOnce(s,!1,!0):o=this._decodeOnLoadImage(s),o}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(o,s)}_decodeFromVideoElementSetup(r){if(!r)throw new I("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new I("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const o=this._decodeOnLoadImage(s);return s.src=r,o}decodeFromVideoUrl(r){if(!r)throw new I("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),o=this.decodeFromVideoElement(s);return s.src=r,o}decodeFromVideoUrlContinuously(r,s){if(!r)throw new I("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(o,s);return o.src=r,l}_decodeOnLoadImage(r){return new Promise((s,o)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,o),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Me(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return Me(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,o=!0){this._stopAsyncDecode=!1;const l=(c,h)=>{if(this._stopAsyncDecode){h(new ee("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(r);c(f)}catch(f){const p=s&&f instanceof ee,_=(f instanceof U||f instanceof D)&&o;if(p||_)return setTimeout(l,this._timeBetweenDecodingAttempts,c,h);h(f)}};return new Promise((c,h)=>l(c,h))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const l=this.decode(r);s(l,null),setTimeout(o,this.timeBetweenScansMillis)}catch(l){s(null,l);const c=l instanceof U||l instanceof D,h=l instanceof ee;(c||h)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,o){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,o=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),o=new Re(s),l=new Se(o);return new P(l)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let o,l;return typeof r<"u"&&(r instanceof HTMLVideoElement?(o=r.videoWidth,l=r.videoHeight):r instanceof HTMLImageElement&&(o=r.naturalWidth||r.width,l=r.naturalHeight||r.height)),s.style.width=o+"px",s.style.height=l+"px",s.width=o,s.height=l,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class pt{constructor(r,s,o=s==null?0:8*s.length,l,c,h=q.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=o,this.resultPoints=l,this.format=c,this.timestamp=h,this.text=r,this.rawBytes=s,o==null?this.numBits=s==null?0:8*s.length:this.numBits=o,this.resultPoints=l,this.format=c,this.resultMetadata=null,h==null?this.timestamp=q.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const o=new Array(s.length+r.length);q.arraycopy(s,0,o,0,s.length),q.arraycopy(r,0,o,s.length,r.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var $n;(function(C){C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})($n||($n={}));var Ee=$n,Jn;(function(C){C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Jn||(Jn={}));var Xt=Jn;class gs{constructor(r,s,o,l,c=-1,h=-1){this.rawBytes=r,this.text=s,this.byteSegments=o,this.ecLevel=l,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=h,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class zr{exp(r){return this.expTable[r]}log(r){if(r===0)throw new S;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class Qt{constructor(r,s){if(s.length===0)throw new S;this.field=r;const o=s.length;if(o>1&&s[0]===0){let l=1;for(;l<o&&s[l]===0;)l++;l===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-l),q.arraycopy(s,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let o;if(r===1){o=0;for(let h=0,f=s.length;h!==f;h++){const p=s[h];o=zr.addOrSubtract(o,p)}return o}o=s[0];const l=s.length,c=this.field;for(let h=1;h<l;h++)o=zr.addOrSubtract(c.multiply(r,o),s[h]);return o}addOrSubtract(r){if(!this.field.equals(r.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){const h=s;s=o,o=h}let l=new Int32Array(o.length);const c=o.length-s.length;q.arraycopy(o,0,l,0,c);for(let h=c;h<o.length;h++)l[h]=zr.addOrSubtract(s[h-c],o[h]);return new Qt(this.field,l)}multiply(r){if(!this.field.equals(r.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,o=s.length,l=r.coefficients,c=l.length,h=new Int32Array(o+c-1),f=this.field;for(let p=0;p<o;p++){const y=s[p];for(let _=0;_<c;_++)h[p+_]=zr.addOrSubtract(h[p+_],f.multiply(y,l[_]))}return new Qt(f,h)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,o=this.field,l=new Int32Array(s),c=this.coefficients;for(let h=0;h<s;h++)l[h]=o.multiply(c[h],r);return new Qt(o,l)}multiplyByMonomial(r,s){if(r<0)throw new S;if(s===0)return this.field.getZero();const o=this.coefficients,l=o.length,c=new Int32Array(l+r),h=this.field;for(let f=0;f<l;f++)c[f]=h.multiply(o[f],s);return new Qt(h,c)}divide(r){if(!this.field.equals(r.field))throw new S("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new S("Divide by 0");const s=this.field;let o=s.getZero(),l=this;const c=r.getCoefficient(r.getDegree()),h=s.inverse(c);for(;l.getDegree()>=r.getDegree()&&!l.isZero();){const f=l.getDegree()-r.getDegree(),p=s.multiply(l.getCoefficient(l.getDegree()),h),y=r.multiplyByMonomial(f,p),_=s.buildMonomial(f,p);o=o.addOrSubtract(_),l=l.addOrSubtract(y)}return[o,l]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);if(o!==0){if(o<0?(r+=" - ",o=-o):r.length>0&&(r+=" + "),s===0||o!==1){const l=this.field.log(o);l===0?r+="1":l===1?r+="a":(r+="a^",r+=l)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class Ni extends w{}Ni.kind="ArithmeticException";class We extends zr{constructor(r,s,o){super(),this.primitive=r,this.size=s,this.generatorBase=o;const l=new Int32Array(s);let c=1;for(let f=0;f<s;f++)l[f]=c,c*=2,c>=s&&(c^=r,c&=s-1);this.expTable=l;const h=new Int32Array(s);for(let f=0;f<s-1;f++)h[l[f]]=f;this.logTable=h,this.zero=new Qt(this,Int32Array.from([0])),this.one=new Qt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new S;if(s===0)return this.zero;const o=new Int32Array(r+1);return o[0]=s,new Qt(this,o)}inverse(r){if(r===0)throw new Ni;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+B.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}We.AZTEC_DATA_12=new We(4201,4096,1),We.AZTEC_DATA_10=new We(1033,1024,1),We.AZTEC_DATA_6=new We(67,64,1),We.AZTEC_PARAM=new We(19,16,1),We.QR_CODE_FIELD_256=new We(285,256,0),We.DATA_MATRIX_FIELD_256=new We(301,256,1),We.AZTEC_DATA_8=We.DATA_MATRIX_FIELD_256,We.MAXICODE_FIELD_64=We.AZTEC_DATA_6;class Hr extends w{}Hr.kind="ReedSolomonException";class Un extends w{}Un.kind="IllegalStateException";class Oi{constructor(r){this.field=r}decode(r,s){const o=this.field,l=new Qt(o,r),c=new Int32Array(s);let h=!0;for(let M=0;M<s;M++){const z=l.evaluateAt(o.exp(M+o.getGeneratorBase()));c[c.length-1-M]=z,z!==0&&(h=!1)}if(h)return;const f=new Qt(o,c),p=this.runEuclideanAlgorithm(o.buildMonomial(s,1),f,s),y=p[0],_=p[1],v=this.findErrorLocations(y),T=this.findErrorMagnitudes(_,v);for(let M=0;M<v.length;M++){const z=r.length-1-o.log(v[M]);if(z<0)throw new Hr("Bad error location");r[z]=We.addOrSubtract(r[z],T[M])}}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){const M=r;r=s,s=M}const l=this.field;let c=r,h=s,f=l.getZero(),p=l.getOne();for(;h.getDegree()>=(o/2|0);){let M=c,z=f;if(c=h,f=p,c.isZero())throw new Hr("r_{i-1} was zero");h=M;let W=l.getZero();const K=c.getCoefficient(c.getDegree()),J=l.inverse(K);for(;h.getDegree()>=c.getDegree()&&!h.isZero();){const le=h.getDegree()-c.getDegree(),ue=l.multiply(h.getCoefficient(h.getDegree()),J);W=W.addOrSubtract(l.buildMonomial(le,ue)),h=h.addOrSubtract(c.multiplyByMonomial(le,ue))}if(p=W.multiply(f).addOrSubtract(z),h.getDegree()>=c.getDegree())throw new Un("Division algorithm failed to reduce polynomial?")}const y=p.getCoefficient(0);if(y===0)throw new Hr("sigmaTilde(0) was zero");const _=l.inverse(y),v=p.multiplyScalar(_),T=h.multiplyScalar(_);return[v,T]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const o=new Int32Array(s);let l=0;const c=this.field;for(let h=1;h<c.getSize()&&l<s;h++)r.evaluateAt(h)===0&&(o[l]=c.inverse(h),l++);if(l!==s)throw new Hr("Error locator degree does not match number of roots");return o}findErrorMagnitudes(r,s){const o=s.length,l=new Int32Array(o),c=this.field;for(let h=0;h<o;h++){const f=c.inverse(s[h]);let p=1;for(let y=0;y<o;y++)if(h!==y){const _=c.multiply(s[y],f),v=_&1?_&-2:_|1;p=c.multiply(p,v)}l[h]=c.multiply(r.evaluateAt(f),c.inverse(p)),c.getGeneratorBase()!==0&&(l[h]=c.multiply(l[h],f))}return l}}var Zt;(function(C){C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY"})(Zt||(Zt={}));class at{decode(r){this.ddata=r;let s=r.getBits(),o=this.extractBits(s),l=this.correctBits(o),c=at.convertBoolArrayToByteArray(l),h=at.getEncodedData(l),f=new gs(c,h,null,null);return f.setNumBits(l.length),f}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,o=Zt.UPPER,l=Zt.UPPER,c="",h=0;for(;h<s;)if(l===Zt.BINARY){if(s-h<5)break;let f=at.readCode(r,h,5);if(h+=5,f===0){if(s-h<11)break;f=at.readCode(r,h,11)+31,h+=11}for(let p=0;p<f;p++){if(s-h<8){h=s;break}const y=at.readCode(r,h,8);c+=H.castAsNonUtf8Char(y),h+=8}l=o}else{let f=l===Zt.DIGIT?4:5;if(s-h<f)break;let p=at.readCode(r,h,f);h+=f;let y=at.getCharacter(l,p);y.startsWith("CTRL_")?(o=l,l=at.getTable(y.charAt(5)),y.charAt(6)==="L"&&(o=l)):(c+=y,l=o)}return c}static getTable(r){switch(r){case"L":return Zt.LOWER;case"P":return Zt.PUNCT;case"M":return Zt.MIXED;case"D":return Zt.DIGIT;case"B":return Zt.BINARY;case"U":default:return Zt.UPPER}}static getCharacter(r,s){switch(r){case Zt.UPPER:return at.UPPER_TABLE[s];case Zt.LOWER:return at.LOWER_TABLE[s];case Zt.MIXED:return at.MIXED_TABLE[s];case Zt.PUNCT:return at.PUNCT_TABLE[s];case Zt.DIGIT:return at.DIGIT_TABLE[s];default:throw new Un("Bad table")}}correctBits(r){let s,o;this.ddata.getNbLayers()<=2?(o=6,s=We.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,s=We.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,s=We.AZTEC_DATA_10):(o=12,s=We.AZTEC_DATA_12);let l=this.ddata.getNbDatablocks(),c=r.length/o;if(c<l)throw new D;let h=r.length%o,f=new Int32Array(c);for(let T=0;T<c;T++,h+=o)f[T]=at.readCode(r,h,o);try{new Oi(s).decode(f,c-l)}catch(T){throw new D(T)}let p=(1<<o)-1,y=0;for(let T=0;T<l;T++){let M=f[T];if(M===0||M===p)throw new D;(M===1||M===p-1)&&y++}let _=new Array(l*o-y),v=0;for(let T=0;T<l;T++){let M=f[T];if(M===1||M===p-1)_.fill(M>1,v,v+o-1),v+=o-1;else for(let z=o-1;z>=0;--z)_[v++]=(M&1<<z)!==0}return _}extractBits(r){let s=this.ddata.isCompact(),o=this.ddata.getNbLayers(),l=(s?11:14)+o*4,c=new Int32Array(l),h=new Array(this.totalBitsInLayer(o,s));if(s)for(let f=0;f<c.length;f++)c[f]=f;else{let f=l+1+2*B.truncDivision(B.truncDivision(l,2)-1,15),p=l/2,y=B.truncDivision(f,2);for(let _=0;_<p;_++){let v=_+B.truncDivision(_,15);c[p-_-1]=y-v-1,c[p+_]=y+v+1}}for(let f=0,p=0;f<o;f++){let y=(o-f)*4+(s?9:12),_=f*2,v=l-1-_;for(let T=0;T<y;T++){let M=T*2;for(let z=0;z<2;z++)h[p+M+z]=r.get(c[_+z],c[_+T]),h[p+2*y+M+z]=r.get(c[_+T],c[v-z]),h[p+4*y+M+z]=r.get(c[v-z],c[v-T]),h[p+6*y+M+z]=r.get(c[v-T],c[_+z])}p+=y*8}return h}static readCode(r,s,o){let l=0;for(let c=s;c<s+o;c++)l<<=1,r[c]&&(l|=1);return l}static readByte(r,s){let o=r.length-s;return o>=8?at.readCode(r,s,8):at.readCode(r,s,o)<<8-o}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let o=0;o<s.length;o++)s[o]=at.readByte(r,8*o);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}at.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],at.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],at.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],at.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],at.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ve{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,o,l){const c=r-o,h=s-l;return Math.sqrt(c*c+h*h)}static sum(r){let s=0;for(let o=0,l=r.length;o!==l;o++){const c=r[o];s+=c}return s}}class Di{static floatToIntBits(r){return r}}Di.MAX_VALUE=Number.MAX_SAFE_INTEGER;class we{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof we){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Di.floatToIntBits(this.x)+Di.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),o=this.distance(r[1],r[2]),l=this.distance(r[0],r[2]);let c,h,f;if(o>=s&&o>=l?(h=r[0],c=r[1],f=r[2]):l>=o&&l>=s?(h=r[1],c=r[0],f=r[2]):(h=r[2],c=r[0],f=r[1]),this.crossProductZ(c,h,f)<0){const p=c;c=f,f=p}r[0]=c,r[1]=h,r[2]=f}static distance(r,s){return Ve.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,o){const l=s.x,c=s.y;return(o.x-l)*(r.y-c)-(o.y-c)*(r.x-l)}}class eo{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class to extends eo{constructor(r,s,o,l,c){super(r,s),this.compact=o,this.nbDatablocks=l,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class er{constructor(r,s,o,l){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=er.INIT_SIZE),o==null&&(o=r.getWidth()/2|0),l==null&&(l=r.getHeight()/2|0);const c=s/2|0;if(this.leftInit=o-c,this.rightInit=o+c,this.upInit=l-c,this.downInit=l+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}detect(){let r=this.leftInit,s=this.rightInit,o=this.upInit,l=this.downInit,c=!1,h=!0,f=!1,p=!1,y=!1,_=!1,v=!1;const T=this.width,M=this.height;for(;h;){h=!1;let z=!0;for(;(z||!p)&&s<T;)z=this.containsBlackPoint(o,l,s,!1),z?(s++,h=!0,p=!0):p||s++;if(s>=T){c=!0;break}let W=!0;for(;(W||!y)&&l<M;)W=this.containsBlackPoint(r,s,l,!0),W?(l++,h=!0,y=!0):y||l++;if(l>=M){c=!0;break}let K=!0;for(;(K||!_)&&r>=0;)K=this.containsBlackPoint(o,l,r,!1),K?(r--,h=!0,_=!0):_||r--;if(r<0){c=!0;break}let J=!0;for(;(J||!v)&&o>=0;)J=this.containsBlackPoint(r,s,o,!0),J?(o--,h=!0,v=!0):v||o--;if(o<0){c=!0;break}h&&(f=!0)}if(!c&&f){const z=s-r;let W=null;for(let ue=1;W===null&&ue<z;ue++)W=this.getBlackPointOnSegment(r,l-ue,r+ue,l);if(W==null)throw new ee;let K=null;for(let ue=1;K===null&&ue<z;ue++)K=this.getBlackPointOnSegment(r,o+ue,r+ue,o);if(K==null)throw new ee;let J=null;for(let ue=1;J===null&&ue<z;ue++)J=this.getBlackPointOnSegment(s,o+ue,s-ue,o);if(J==null)throw new ee;let le=null;for(let ue=1;le===null&&ue<z;ue++)le=this.getBlackPointOnSegment(s,l-ue,s-ue,l);if(le==null)throw new ee;return this.centerEdges(le,W,J,K)}else throw new ee}getBlackPointOnSegment(r,s,o,l){const c=Ve.round(Ve.distance(r,s,o,l)),h=(o-r)/c,f=(l-s)/c,p=this.image;for(let y=0;y<c;y++){const _=Ve.round(r+y*h),v=Ve.round(s+y*f);if(p.get(_,v))return new we(_,v)}return null}centerEdges(r,s,o,l){const c=r.getX(),h=r.getY(),f=s.getX(),p=s.getY(),y=o.getX(),_=o.getY(),v=l.getX(),T=l.getY(),M=er.CORR;return c<this.width/2?[new we(v-M,T+M),new we(f+M,p+M),new we(y-M,_-M),new we(c+M,h-M)]:[new we(v+M,T+M),new we(f+M,p-M),new we(y-M,_+M),new we(c-M,h-M)]}containsBlackPoint(r,s,o,l){const c=this.image;if(l){for(let h=r;h<=s;h++)if(c.get(h,o))return!0}else for(let h=r;h<=s;h++)if(c.get(o,h))return!0;return!1}}er.INIT_SIZE=10,er.CORR=1;class no{static checkAndNudgePoints(r,s){const o=r.getWidth(),l=r.getHeight();let c=!0;for(let h=0;h<s.length&&c;h+=2){const f=Math.floor(s[h]),p=Math.floor(s[h+1]);if(f<-1||f>o||p<-1||p>l)throw new ee;c=!1,f===-1?(s[h]=0,c=!0):f===o&&(s[h]=o-1,c=!0),p===-1?(s[h+1]=0,c=!0):p===l&&(s[h+1]=l-1,c=!0)}c=!0;for(let h=s.length-2;h>=0&&c;h-=2){const f=Math.floor(s[h]),p=Math.floor(s[h+1]);if(f<-1||f>o||p<-1||p>l)throw new ee;c=!1,f===-1?(s[h]=0,c=!0):f===o&&(s[h]=o-1,c=!0),p===-1?(s[h+1]=0,c=!0):p===l&&(s[h+1]=l-1,c=!0)}}}class lt{constructor(r,s,o,l,c,h,f,p,y){this.a11=r,this.a21=s,this.a31=o,this.a12=l,this.a22=c,this.a32=h,this.a13=f,this.a23=p,this.a33=y}static quadrilateralToQuadrilateral(r,s,o,l,c,h,f,p,y,_,v,T,M,z,W,K){const J=lt.quadrilateralToSquare(r,s,o,l,c,h,f,p);return lt.squareToQuadrilateral(y,_,v,T,M,z,W,K).times(J)}transformPoints(r){const s=r.length,o=this.a11,l=this.a12,c=this.a13,h=this.a21,f=this.a22,p=this.a23,y=this.a31,_=this.a32,v=this.a33;for(let T=0;T<s;T+=2){const M=r[T],z=r[T+1],W=c*M+p*z+v;r[T]=(o*M+h*z+y)/W,r[T+1]=(l*M+f*z+_)/W}}transformPointsWithValues(r,s){const o=this.a11,l=this.a12,c=this.a13,h=this.a21,f=this.a22,p=this.a23,y=this.a31,_=this.a32,v=this.a33,T=r.length;for(let M=0;M<T;M++){const z=r[M],W=s[M],K=c*z+p*W+v;r[M]=(o*z+h*W+y)/K,s[M]=(l*z+f*W+_)/K}}static squareToQuadrilateral(r,s,o,l,c,h,f,p){const y=r-o+c-f,_=s-l+h-p;if(y===0&&_===0)return new lt(o-r,c-o,r,l-s,h-l,s,0,0,1);{const v=o-c,T=f-c,M=l-h,z=p-h,W=v*z-T*M,K=(y*z-T*_)/W,J=(v*_-y*M)/W;return new lt(o-r+K*o,f-r+J*f,r,l-s+K*l,p-s+J*p,s,K,J,1)}}static quadrilateralToSquare(r,s,o,l,c,h,f,p){return lt.squareToQuadrilateral(r,s,o,l,c,h,f,p).buildAdjoint()}buildAdjoint(){return new lt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new lt(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class ln extends no{sampleGrid(r,s,o,l,c,h,f,p,y,_,v,T,M,z,W,K,J,le,ue){const ie=lt.quadrilateralToQuadrilateral(l,c,h,f,p,y,_,v,T,M,z,W,K,J,le,ue);return this.sampleGridWithTransform(r,s,o,ie)}sampleGridWithTransform(r,s,o,l){if(s<=0||o<=0)throw new ee;const c=new $e(s,o),h=new Float32Array(2*s);for(let f=0;f<o;f++){const p=h.length,y=f+.5;for(let _=0;_<p;_+=2)h[_]=_/2+.5,h[_+1]=y;l.transformPoints(h),no.checkAndNudgePoints(r,h);try{for(let _=0;_<p;_+=2)r.get(Math.floor(h[_]),Math.floor(h[_+1]))&&c.set(_/2,f)}catch{throw new ee}}return c}}class tr{static setGridSampler(r){tr.gridSampler=r}static getInstance(){return tr.gridSampler}}tr.gridSampler=new ln;class un{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new we(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class sa{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),o=this.getBullsEyeCorners(s);if(r){let h=o[0];o[0]=o[2],o[2]=h}this.extractParameters(o);let l=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),c=this.getMatrixCornerPoints(o);return new to(l,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new ee;let s=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(o,s);let l=0;for(let h=0;h<4;h++){let f=o[(this.shift+h)%4];this.compact?(l<<=7,l+=f>>1&127):(l<<=10,l+=(f>>2&992)+(f>>1&31))}let c=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(r,s){let o=0;r.forEach((l,c,h)=>{let f=(l>>s-2<<1)+(l&1);o=(o<<3)+f}),o=((o&1)<<11)+(o>>1);for(let l=0;l<4;l++)if(B.bitCount(o^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new ee}getCorrectedParameterData(r,s){let o,l;s?(o=7,l=2):(o=10,l=4);let c=o-l,h=new Int32Array(o);for(let p=o-1;p>=0;--p)h[p]=r&15,r>>=4;try{new Oi(We.AZTEC_PARAM).decode(h,c)}catch{throw new ee}let f=0;for(let p=0;p<l;p++)f=(f<<4)+h[p];return f}getBullsEyeCorners(r){let s=r,o=r,l=r,c=r,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let v=this.getFirstDifferent(s,h,1,-1),T=this.getFirstDifferent(o,h,1,1),M=this.getFirstDifferent(l,h,-1,1),z=this.getFirstDifferent(c,h,-1,-1);if(this.nbCenterLayers>2){let W=this.distancePoint(z,v)*this.nbCenterLayers/(this.distancePoint(c,s)*(this.nbCenterLayers+2));if(W<.75||W>1.25||!this.isWhiteOrBlackRectangle(v,T,M,z))break}s=v,o=T,l=M,c=z,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;let f=new we(s.getX()+.5,s.getY()-.5),p=new we(o.getX()+.5,o.getY()+.5),y=new we(l.getX()-.5,l.getY()+.5),_=new we(c.getX()-.5,c.getY()-.5);return this.expandSquare([f,p,y,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,o,l;try{let f=new er(this.image).detect();r=f[0],s=f[1],o=f[2],l=f[3]}catch{let p=this.image.getWidth()/2,y=this.image.getHeight()/2;r=this.getFirstDifferent(new un(p+7,y-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new un(p+7,y+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new un(p-7,y+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new un(p-7,y-7),!1,-1,-1).toResultPoint()}let c=Ve.round((r.getX()+l.getX()+s.getX()+o.getX())/4),h=Ve.round((r.getY()+l.getY()+s.getY()+o.getY())/4);try{let f=new er(this.image,15,c,h).detect();r=f[0],s=f[1],o=f[2],l=f[3]}catch{r=this.getFirstDifferent(new un(c+7,h-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new un(c+7,h+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new un(c-7,h+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new un(c-7,h-7),!1,-1,-1).toResultPoint()}return c=Ve.round((r.getX()+l.getX()+s.getX()+o.getX())/4),h=Ve.round((r.getY()+l.getY()+s.getY()+o.getY())/4),new un(c,h)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,o,l,c){let h=tr.getInstance(),f=this.getDimension(),p=f/2-this.nbCenterLayers,y=f/2+this.nbCenterLayers;return h.sampleGrid(r,f,f,p,p,y,p,y,y,p,y,s.getX(),s.getY(),o.getX(),o.getY(),l.getX(),l.getY(),c.getX(),c.getY())}sampleLine(r,s,o){let l=0,c=this.distanceResultPoint(r,s),h=c/o,f=r.getX(),p=r.getY(),y=h*(s.getX()-r.getX())/c,_=h*(s.getY()-r.getY())/c;for(let v=0;v<o;v++)this.image.get(Ve.round(f+v*y),Ve.round(p+v*_))&&(l|=1<<o-v-1);return l}isWhiteOrBlackRectangle(r,s,o,l){let c=3;r=new un(r.getX()-c,r.getY()+c),s=new un(s.getX()-c,s.getY()-c),o=new un(o.getX()+c,o.getY()-c),l=new un(l.getX()+c,l.getY()+c);let h=this.getColor(l,r);if(h===0)return!1;let f=this.getColor(r,s);return f!==h||(f=this.getColor(s,o),f!==h)?!1:(f=this.getColor(o,l),f===h)}getColor(r,s){let o=this.distancePoint(r,s),l=(s.getX()-r.getX())/o,c=(s.getY()-r.getY())/o,h=0,f=r.getX(),p=r.getY(),y=this.image.get(r.getX(),r.getY()),_=Math.ceil(o);for(let T=0;T<_;T++)f+=l,p+=c,this.image.get(Ve.round(f),Ve.round(p))!==y&&h++;let v=h/o;return v>.1&&v<.9?0:v<=.1===y?1:-1}getFirstDifferent(r,s,o,l){let c=r.getX()+o,h=r.getY()+l;for(;this.isValid(c,h)&&this.image.get(c,h)===s;)c+=o,h+=l;for(c-=o,h-=l;this.isValid(c,h)&&this.image.get(c,h)===s;)c+=o;for(c-=o;this.isValid(c,h)&&this.image.get(c,h)===s;)h+=l;return h-=l,new un(c,h)}expandSquare(r,s,o){let l=o/(2*s),c=r[0].getX()-r[2].getX(),h=r[0].getY()-r[2].getY(),f=(r[0].getX()+r[2].getX())/2,p=(r[0].getY()+r[2].getY())/2,y=new we(f+l*c,p+l*h),_=new we(f-l*c,p-l*h);c=r[1].getX()-r[3].getX(),h=r[1].getY()-r[3].getY(),f=(r[1].getX()+r[3].getX())/2,p=(r[1].getY()+r[3].getY())/2;let v=new we(f+l*c,p+l*h),T=new we(f-l*c,p-l*h);return[y,v,_,T]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=Ve.round(r.getX()),o=Ve.round(r.getY());return this.isValid(s,o)}distancePoint(r,s){return Ve.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return Ve.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(B.truncDivision(this.nbLayers-4,8)+1)+15}}class ro{decode(r,s=null){let o=null,l=new sa(r.getBlackMatrix()),c=null,h=null;try{let _=l.detectMirror(!1);c=_.getPoints(),this.reportFoundResultPoints(s,c),h=new at().decode(_)}catch(_){o=_}if(h==null)try{let _=l.detectMirror(!0);c=_.getPoints(),this.reportFoundResultPoints(s,c),h=new at().decode(_)}catch(_){throw o??_}let f=new pt(h.getText(),h.getRawBytes(),h.getNumBits(),c,Ee.AZTEC,q.currentTimeMillis()),p=h.getByteSegments();p!=null&&f.putMetadata(Xt.BYTE_SEGMENTS,p);let y=h.getECLevel();return y!=null&&f.putMetadata(Xt.ERROR_CORRECTION_LEVEL,y),f}reportFoundResultPoints(r,s){if(r!=null){let o=r.get(re.NEED_RESULT_POINT_CALLBACK);o!=null&&s.forEach((l,c,h)=>{o.foundPossibleResultPoint(l)})}}reset(){}}class ps extends nt{constructor(r=500){super(new ro,r)}}class Rt{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(re.TRY_HARDER)===!0&&r.isRotateSupported()){const c=r.rotateCounterClockwise(),h=this.doDecode(c,s),f=h.getResultMetadata();let p=270;f!==null&&f.get(Xt.ORIENTATION)===!0&&(p=p+f.get(Xt.ORIENTATION)%360),h.putMetadata(Xt.ORIENTATION,p);const y=h.getResultPoints();if(y!==null){const _=c.getHeight();for(let v=0;v<y.length;v++)y[v]=new we(_-y[v].getY()-1,y[v].getX())}return h}else throw new ee}}reset(){}doDecode(r,s){const o=r.getWidth(),l=r.getHeight();let c=new Q(o);const h=s&&s.get(re.TRY_HARDER)===!0,f=Math.max(1,l>>(h?8:5));let p;h?p=l:p=15;const y=Math.trunc(l/2);for(let _=0;_<p;_++){const v=Math.trunc((_+1)/2),T=(_&1)===0,M=y+f*(T?v:-v);if(M<0||M>=l)break;try{c=r.getBlackRow(M,c)}catch{continue}for(let z=0;z<2;z++){if(z===1&&(c.reverse(),s&&s.get(re.NEED_RESULT_POINT_CALLBACK)===!0)){const W=new Map;s.forEach((K,J)=>W.set(J,K)),W.delete(re.NEED_RESULT_POINT_CALLBACK),s=W}try{const W=this.decodeRow(M,c,s);if(z===1){W.putMetadata(Xt.ORIENTATION,180);const K=W.getResultPoints();K!==null&&(K[0]=new we(o-K[0].getX()-1,K[0].getY()),K[1]=new we(o-K[1].getX()-1,K[1].getY()))}return W}catch{}}}throw new ee}static recordPattern(r,s,o){const l=o.length;for(let y=0;y<l;y++)o[y]=0;const c=r.getSize();if(s>=c)throw new ee;let h=!r.get(s),f=0,p=s;for(;p<c;){if(r.get(p)!==h)o[f]++;else{if(++f===l)break;o[f]=1,h=!h}p++}if(!(f===l||f===l-1&&p===c))throw new ee}static recordPatternInReverse(r,s,o){let l=o.length,c=r.get(s);for(;s>0&&l>=0;)r.get(--s)!==c&&(l--,c=!c);if(l>=0)throw new ee;Rt.recordPattern(r,s+1,o)}static patternMatchVariance(r,s,o){const l=r.length;let c=0,h=0;for(let y=0;y<l;y++)c+=r[y],h+=s[y];if(c<h)return Number.POSITIVE_INFINITY;const f=c/h;o*=f;let p=0;for(let y=0;y<l;y++){const _=r[y],v=s[y]*f,T=_>v?_-v:v-_;if(T>o)return Number.POSITIVE_INFINITY;p+=T}return p/c}}class fe extends Rt{static findStartPattern(r){const s=r.getSize(),o=r.getNextSet(0);let l=0,c=Int32Array.from([0,0,0,0,0,0]),h=o,f=!1;const p=6;for(let y=o;y<s;y++)if(r.get(y)!==f)c[l]++;else{if(l===p-1){let _=fe.MAX_AVG_VARIANCE,v=-1;for(let T=fe.CODE_START_A;T<=fe.CODE_START_C;T++){const M=Rt.patternMatchVariance(c,fe.CODE_PATTERNS[T],fe.MAX_INDIVIDUAL_VARIANCE);M<_&&(_=M,v=T)}if(v>=0&&r.isRange(Math.max(0,h-(y-h)/2),h,!1))return Int32Array.from([h,y,v]);h+=c[0]+c[1],c=c.slice(2,c.length-1),c[l-1]=0,c[l]=0,l--}else l++;c[l]=1,f=!f}throw new ee}static decodeCode(r,s,o){Rt.recordPattern(r,o,s);let l=fe.MAX_AVG_VARIANCE,c=-1;for(let h=0;h<fe.CODE_PATTERNS.length;h++){const f=fe.CODE_PATTERNS[h],p=this.patternMatchVariance(s,f,fe.MAX_INDIVIDUAL_VARIANCE);p<l&&(l=p,c=h)}if(c>=0)return c;throw new ee}decodeRow(r,s,o){const l=o&&o.get(re.ASSUME_GS1)===!0,c=fe.findStartPattern(s),h=c[2];let f=0;const p=new Uint8Array(20);p[f++]=h;let y;switch(h){case fe.CODE_START_A:y=fe.CODE_CODE_A;break;case fe.CODE_START_B:y=fe.CODE_CODE_B;break;case fe.CODE_START_C:y=fe.CODE_CODE_C;break;default:throw new D}let _=!1,v=!1,T="",M=c[0],z=c[1];const W=Int32Array.from([0,0,0,0,0,0]);let K=0,J=0,le=h,ue=0,ie=!0,ze=!1,ke=!1;for(;!_;){const ho=v;switch(v=!1,K=J,J=fe.decodeCode(s,W,z),p[f++]=J,J!==fe.CODE_STOP&&(ie=!0),J!==fe.CODE_STOP&&(ue++,le+=ue*J),M=z,z+=W.reduce((Ry,Ny)=>Ry+Ny,0),J){case fe.CODE_START_A:case fe.CODE_START_B:case fe.CODE_START_C:throw new D}switch(y){case fe.CODE_CODE_A:if(J<64)ke===ze?T+=String.fromCharCode(32+J):T+=String.fromCharCode(32+J+128),ke=!1;else if(J<96)ke===ze?T+=String.fromCharCode(J-64):T+=String.fromCharCode(J+64),ke=!1;else switch(J!==fe.CODE_STOP&&(ie=!1),J){case fe.CODE_FNC_1:l&&(T.length===0?T+="]C1":T+="");break;case fe.CODE_FNC_2:case fe.CODE_FNC_3:break;case fe.CODE_FNC_4_A:!ze&&ke?(ze=!0,ke=!1):ze&&ke?(ze=!1,ke=!1):ke=!0;break;case fe.CODE_SHIFT:v=!0,y=fe.CODE_CODE_B;break;case fe.CODE_CODE_B:y=fe.CODE_CODE_B;break;case fe.CODE_CODE_C:y=fe.CODE_CODE_C;break;case fe.CODE_STOP:_=!0;break}break;case fe.CODE_CODE_B:if(J<96)ke===ze?T+=String.fromCharCode(32+J):T+=String.fromCharCode(32+J+128),ke=!1;else switch(J!==fe.CODE_STOP&&(ie=!1),J){case fe.CODE_FNC_1:l&&(T.length===0?T+="]C1":T+="");break;case fe.CODE_FNC_2:case fe.CODE_FNC_3:break;case fe.CODE_FNC_4_B:!ze&&ke?(ze=!0,ke=!1):ze&&ke?(ze=!1,ke=!1):ke=!0;break;case fe.CODE_SHIFT:v=!0,y=fe.CODE_CODE_A;break;case fe.CODE_CODE_A:y=fe.CODE_CODE_A;break;case fe.CODE_CODE_C:y=fe.CODE_CODE_C;break;case fe.CODE_STOP:_=!0;break}break;case fe.CODE_CODE_C:if(J<100)J<10&&(T+="0"),T+=J;else switch(J!==fe.CODE_STOP&&(ie=!1),J){case fe.CODE_FNC_1:l&&(T.length===0?T+="]C1":T+="");break;case fe.CODE_CODE_A:y=fe.CODE_CODE_A;break;case fe.CODE_CODE_B:y=fe.CODE_CODE_B;break;case fe.CODE_STOP:_=!0;break}break}ho&&(y=y===fe.CODE_CODE_A?fe.CODE_CODE_B:fe.CODE_CODE_A)}const jn=z-M;if(z=s.getNextUnset(z),!s.isRange(z,Math.min(s.getSize(),z+(z-M)/2),!1))throw new ee;if(le-=ue*K,le%103!==K)throw new U;const br=T.length;if(br===0)throw new ee;br>0&&ie&&(y===fe.CODE_CODE_C?T=T.substring(0,br-2):T=T.substring(0,br-1));const Xn=(c[1]+c[0])/2,ht=M+jn/2,yn=p.length,lr=new Uint8Array(yn);for(let ho=0;ho<yn;ho++)lr[ho]=p[ho];const co=[new we(Xn,r),new we(ht,r)];return new pt(T,lr,0,co,Ee.CODE_128,new Date().getTime())}}fe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],fe.MAX_AVG_VARIANCE=.25,fe.MAX_INDIVIDUAL_VARIANCE=.7,fe.CODE_SHIFT=98,fe.CODE_CODE_C=99,fe.CODE_CODE_B=100,fe.CODE_CODE_A=101,fe.CODE_FNC_1=102,fe.CODE_FNC_2=97,fe.CODE_FNC_3=96,fe.CODE_FNC_4_A=101,fe.CODE_FNC_4_B=100,fe.CODE_START_A=103,fe.CODE_START_B=104,fe.CODE_START_C=105,fe.CODE_STOP=106;class Nt extends Rt{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,o){let l=this.counters;l.fill(0),this.decodeRowResult="";let c=Nt.findAsteriskPattern(s,l),h=s.getNextSet(c[1]),f=s.getSize(),p,y;do{Nt.recordPattern(s,h,l);let W=Nt.toNarrowWidePattern(l);if(W<0)throw new ee;p=Nt.patternToChar(W),this.decodeRowResult+=p,y=h;for(let K of l)h+=K;h=s.getNextSet(h)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let _=0;for(let W of l)_+=W;let v=h-y-_;if(h!==f&&v*2<_)throw new ee;if(this.usingCheckDigit){let W=this.decodeRowResult.length-1,K=0;for(let J=0;J<W;J++)K+=Nt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(J));if(this.decodeRowResult.charAt(W)!==Nt.ALPHABET_STRING.charAt(K%43))throw new U;this.decodeRowResult=this.decodeRowResult.substring(0,W)}if(this.decodeRowResult.length===0)throw new ee;let T;this.extendedMode?T=Nt.decodeExtended(this.decodeRowResult):T=this.decodeRowResult;let M=(c[1]+c[0])/2,z=y+_/2;return new pt(T,null,0,[new we(M,r),new we(z,r)],Ee.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let o=r.getSize(),l=r.getNextSet(0),c=0,h=l,f=!1,p=s.length;for(let y=l;y<o;y++)if(r.get(y)!==f)s[c]++;else{if(c===p-1){if(this.toNarrowWidePattern(s)===Nt.ASTERISK_ENCODING&&r.isRange(Math.max(0,h-Math.floor((y-h)/2)),h,!1))return[h,y];h+=s[0]+s[1],s.copyWithin(0,2,2+c-1),s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,f=!f}throw new ee}static toNarrowWidePattern(r){let s=r.length,o=0,l;do{let c=2147483647;for(let p of r)p<c&&p>o&&(c=p);o=c,l=0;let h=0,f=0;for(let p=0;p<s;p++){let y=r[p];y>o&&(f|=1<<s-1-p,l++,h+=y)}if(l===3){for(let p=0;p<s&&l>0;p++){let y=r[p];if(y>o&&(l--,y*2>=h))return-1}return f}}while(l>3);return-1}static patternToChar(r){for(let s=0;s<Nt.CHARACTER_ENCODINGS.length;s++)if(Nt.CHARACTER_ENCODINGS[s]===r)return Nt.ALPHABET_STRING.charAt(s);if(r===Nt.ASTERISK_ENCODING)return"*";throw new ee}static decodeExtended(r){let s=r.length,o="";for(let l=0;l<s;l++){let c=r.charAt(l);if(c==="+"||c==="$"||c==="%"||c==="/"){let h=r.charAt(l+1),f="\0";switch(c){case"+":if(h>="A"&&h<="Z")f=String.fromCharCode(h.charCodeAt(0)+32);else throw new D;break;case"$":if(h>="A"&&h<="Z")f=String.fromCharCode(h.charCodeAt(0)-64);else throw new D;break;case"%":if(h>="A"&&h<="E")f=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")f=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")f=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")f=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")f="\0";else if(h==="V")f="@";else if(h==="W")f="`";else if(h==="X"||h==="Y"||h==="Z")f="";else throw new D;break;case"/":if(h>="A"&&h<="O")f=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")f=":";else throw new D;break}o+=f,l++}else o+=c}return o}}Nt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Nt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Nt.ASTERISK_ENCODING=148;class rt extends Rt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,o){let l=this.decodeStart(s),c=this.decodeEnd(s),h=new L;rt.decodeMiddle(s,l[1],c[0],h);let f=h.toString(),p=null;o!=null&&(p=o.get(re.ALLOWED_LENGTHS)),p==null&&(p=rt.DEFAULT_ALLOWED_LENGTHS);let y=f.length,_=!1,v=0;for(let z of p){if(y===z){_=!0;break}z>v&&(v=z)}if(!_&&y>v&&(_=!0),!_)throw new D;const T=[new we(l[1],r),new we(c[0],r)];return new pt(f,null,0,T,Ee.ITF,new Date().getTime())}static decodeMiddle(r,s,o,l){let c=new Int32Array(10),h=new Int32Array(5),f=new Int32Array(5);for(c.fill(0),h.fill(0),f.fill(0);s<o;){Rt.recordPattern(r,s,c);for(let y=0;y<5;y++){let _=2*y;h[y]=c[_],f[y]=c[_+1]}let p=rt.decodeDigit(h);l.append(p.toString()),p=this.decodeDigit(f),l.append(p.toString()),c.forEach(function(y){s+=y})}}decodeStart(r){let s=rt.skipWhiteSpace(r),o=rt.findGuardPattern(r,s,rt.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(r,o[0]),o}validateQuietZone(r,s){let o=this.narrowLineWidth*10;o=o<s?o:s;for(let l=s-1;o>0&&l>=0&&!r.get(l);l--)o--;if(o!==0)throw new ee}static skipWhiteSpace(r){const s=r.getSize(),o=r.getNextSet(0);if(o===s)throw new ee;return o}decodeEnd(r){r.reverse();try{let s=rt.skipWhiteSpace(r),o;try{o=rt.findGuardPattern(r,s,rt.END_PATTERN_REVERSED[0])}catch(c){c instanceof ee&&(o=rt.findGuardPattern(r,s,rt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,o[0]);let l=o[0];return o[0]=r.getSize()-o[1],o[1]=r.getSize()-l,o}finally{r.reverse()}}static findGuardPattern(r,s,o){let l=o.length,c=new Int32Array(l),h=r.getSize(),f=!1,p=0,y=s;c.fill(0);for(let _=s;_<h;_++)if(r.get(_)!==f)c[p]++;else{if(p===l-1){if(Rt.patternMatchVariance(c,o,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return[y,_];y+=c[0]+c[1],q.arraycopy(c,2,c,0,p-1),c[p-1]=0,c[p]=0,p--}else p++;c[p]=1,f=!f}throw new ee}static decodeDigit(r){let s=rt.MAX_AVG_VARIANCE,o=-1,l=rt.PATTERNS.length;for(let c=0;c<l;c++){let h=rt.PATTERNS[c],f=Rt.patternMatchVariance(r,h,rt.MAX_INDIVIDUAL_VARIANCE);f<s?(s=f,o=c):f===s&&(o=-1)}if(o>=0)return o%10;throw new ee}}rt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],rt.MAX_AVG_VARIANCE=.38,rt.MAX_INDIVIDUAL_VARIANCE=.5,rt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],rt.START_PATTERN=Int32Array.from([1,1,1,1]),rt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class vt extends Rt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,o,l=0,c=Int32Array.from([0,0,0]);for(;!s;){c=Int32Array.from([0,0,0]),o=vt.findGuardPattern(r,l,!1,this.START_END_PATTERN,c);let h=o[0];l=o[1];let f=h-(l-h);f>=0&&(s=r.isRange(f,h,!1))}return o}static checkChecksum(r){return vt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return vt.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let l=s-1;l>=0;l-=2){let c=r.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new D;o+=c}o*=3;for(let l=s-2;l>=0;l-=2){let c=r.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new D;o+=c}return(1e3-o)%10}static decodeEnd(r,s){return vt.findGuardPattern(r,s,!1,vt.START_END_PATTERN,new Int32Array(vt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,o,l){return this.findGuardPattern(r,s,o,l,new Int32Array(l.length))}static findGuardPattern(r,s,o,l,c){let h=r.getSize();s=o?r.getNextUnset(s):r.getNextSet(s);let f=0,p=s,y=l.length,_=o;for(let v=s;v<h;v++)if(r.get(v)!==_)c[f]++;else{if(f===y-1){if(Rt.patternMatchVariance(c,l,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return Int32Array.from([p,v]);p+=c[0]+c[1];let T=c.slice(2,c.length-1);for(let M=0;M<f-1;M++)c[M]=T[M];c[f-1]=0,c[f]=0,f--}else f++;c[f]=1,_=!_}throw new ee}static decodeDigit(r,s,o,l){this.recordPattern(r,o,s);let c=this.MAX_AVG_VARIANCE,h=-1,f=l.length;for(let p=0;p<f;p++){let y=l[p],_=Rt.patternMatchVariance(s,y,vt.MAX_INDIVIDUAL_VARIANCE);_<c&&(c=_,h=p)}if(h>=0)return h;throw new ee}}vt.MAX_AVG_VARIANCE=.48,vt.MAX_INDIVIDUAL_VARIANCE=.7,vt.START_END_PATTERN=Int32Array.from([1,1,1]),vt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),vt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),vt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ai{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(s,o,l),h=l.toString(),f=ai.parseExtensionString(h),p=[new we((o[0]+o[1])/2,r),new we(c,r)],y=new pt(h,null,0,p,Ee.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&y.putAllMetadata(f),y}decodeMiddle(r,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=r.getSize(),h=s[1],f=0;for(let y=0;y<5&&h<c;y++){let _=vt.decodeDigit(r,l,h,vt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+_%10);for(let v of l)h+=v;_>=10&&(f|=1<<4-y),y!==4&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(o.length!==5)throw new ee;let p=this.determineCheckDigit(f);if(ai.extensionChecksum(o.toString())!==p)throw new ee;return h}static extensionChecksum(r){let s=r.length,o=0;for(let l=s-2;l>=0;l-=2)o+=r.charAt(l).charCodeAt(0)-48;o*=3;for(let l=s-1;l>=0;l-=2)o+=r.charAt(l).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new ee}static parseExtensionString(r){if(r.length!==5)return null;let s=ai.parseExtension5String(r);return s==null?null:new Map([[Xt.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let o=parseInt(r.substring(1)),l=(o/100).toString(),c=o%100,h=c<10?"0"+c:c.toString();return s+l+"."+h}}class io{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let l=this.decodeRowStringBuffer,c=this.decodeMiddle(s,o,l),h=l.toString(),f=io.parseExtensionString(h),p=[new we((o[0]+o[1])/2,r),new we(c,r)],y=new pt(h,null,0,p,Ee.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&y.putAllMetadata(f),y}decodeMiddle(r,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=r.getSize(),h=s[1],f=0;for(let p=0;p<2&&h<c;p++){let y=vt.decodeDigit(r,l,h,vt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+y%10);for(let _ of l)h+=_;y>=10&&(f|=1<<1-p),p!==1&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(o.length!==2)throw new ee;if(parseInt(o.toString())%4!==f)throw new ee;return h}static parseExtensionString(r){return r.length!==2?null:new Map([[Xt.ISSUE_NUMBER,parseInt(r)]])}}class oa{static decodeRow(r,s,o){let l=vt.findGuardPattern(s,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ai().decodeRow(r,s,l)}catch{return new io().decodeRow(r,s,l)}}}oa.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Be extends vt{constructor(){super(),this.decodeRowStringBuffer="",Be.L_AND_G_PATTERNS=Be.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=Be.L_PATTERNS[r-10],o=new Int32Array(s.length);for(let l=0;l<s.length;l++)o[l]=s[s.length-l-1];Be.L_AND_G_PATTERNS[r]=o}}decodeRow(r,s,o){let l=Be.findStartGuardPattern(s),c=o==null?null:o.get(re.NEED_RESULT_POINT_CALLBACK);if(c!=null){const ie=new we((l[0]+l[1])/2,r);c.foundPossibleResultPoint(ie)}let h=this.decodeMiddle(s,l,this.decodeRowStringBuffer),f=h.rowOffset,p=h.resultString;if(c!=null){const ie=new we(f,r);c.foundPossibleResultPoint(ie)}let y=this.decodeEnd(s,f);if(c!=null){const ie=new we((y[0]+y[1])/2,r);c.foundPossibleResultPoint(ie)}let _=y[1],v=_+(_-y[0]);if(v>=s.getSize()||!s.isRange(_,v,!1))throw new ee;let T=p.toString();if(T.length<8)throw new D;if(!Be.checkChecksum(T))throw new U;let M=(l[1]+l[0])/2,z=(y[1]+y[0])/2,W=this.getBarcodeFormat(),K=[new we(M,r),new we(z,r)],J=new pt(T,null,0,K,W,new Date().getTime()),le=0;try{let ie=oa.decodeRow(r,s,y[1]);J.putMetadata(Xt.UPC_EAN_EXTENSION,ie.getText()),J.putAllMetadata(ie.getResultMetadata()),J.addResultPoints(ie.getResultPoints()),le=ie.getText().length}catch{}let ue=o==null?null:o.get(re.ALLOWED_EAN_EXTENSIONS);if(ue!=null){let ie=!1;for(let ze in ue)if(le.toString()===ze){ie=!0;break}if(!ie)throw new ee}return J}decodeEnd(r,s){return Be.findGuardPattern(r,s,!1,Be.START_END_PATTERN,new Int32Array(Be.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return Be.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return Be.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let l=s-1;l>=0;l-=2){let c=r.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new D;o+=c}o*=3;for(let l=s-2;l>=0;l-=2){let c=r.charAt(l).charCodeAt(0)-48;if(c<0||c>9)throw new D;o+=c}return(1e3-o)%10}}class Rr extends Be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=r.getSize(),h=s[1],f=0;for(let y=0;y<6&&h<c;y++){let _=Be.decodeDigit(r,l,h,Be.L_AND_G_PATTERNS);o+=String.fromCharCode(48+_%10);for(let v of l)h+=v;_>=10&&(f|=1<<5-y)}o=Rr.determineFirstDigit(o,f),h=Be.findGuardPattern(r,h,!0,Be.MIDDLE_PATTERN,new Int32Array(Be.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<6&&h<c;y++){let _=Be.decodeDigit(r,l,h,Be.L_PATTERNS);o+=String.fromCharCode(48+_);for(let v of l)h+=v}return{rowOffset:h,resultString:o}}getBarcodeFormat(){return Ee.EAN_13}static determineFirstDigit(r,s){for(let o=0;o<10;o++)if(s===this.FIRST_DIGIT_ENCODINGS[o])return r=String.fromCharCode(48+o)+r,r;throw new ee}}Rr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class so extends Be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=r.getSize(),h=s[1];for(let p=0;p<4&&h<c;p++){let y=Be.decodeDigit(r,l,h,Be.L_PATTERNS);o+=String.fromCharCode(48+y);for(let _ of l)h+=_}h=Be.findGuardPattern(r,h,!0,Be.MIDDLE_PATTERN,new Int32Array(Be.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<4&&h<c;p++){let y=Be.decodeDigit(r,l,h,Be.L_PATTERNS);o+=String.fromCharCode(48+y);for(let _ of l)h+=_}return{rowOffset:h,resultString:o}}getBarcodeFormat(){return Ee.EAN_8}}class Wr extends Be{constructor(){super(...arguments),this.ean13Reader=new Rr}getBarcodeFormat(){return Ee.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,o))}decodeMiddle(r,s,o){return this.ean13Reader.decodeMiddle(r,s,o)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let o=new pt(s.substring(1),null,null,r.getResultPoints(),Ee.UPC_A);return r.getResultMetadata()!=null&&o.putAllMetadata(r.getResultMetadata()),o}else throw new ee}reset(){this.ean13Reader.reset()}}class zn extends Be{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,o){const l=this.decodeMiddleCounters.map(y=>y);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const c=r.getSize();let h=s[1],f=0;for(let y=0;y<6&&h<c;y++){const _=zn.decodeDigit(r,l,h,zn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+_%10);for(let v of l)h+=v;_>=10&&(f|=1<<5-y)}let p=zn.determineNumSysAndCheckDigit(o,f);return{rowOffset:h,resultString:p}}decodeEnd(r,s){return zn.findGuardPatternWithoutCounters(r,s,!0,zn.MIDDLE_END_PATTERN)}checkChecksum(r){return Be.checkChecksum(zn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let o=0;o<=1;o++)for(let l=0;l<10;l++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][l]){let c=String.fromCharCode(48+o),h=String.fromCharCode(48+l);return c+r+h}throw ee.getNotFoundInstance()}getBarcodeFormat(){return Ee.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(c=>c.charCodeAt(0)),o=new L;o.append(r.charAt(0));let l=s[5];switch(l){case 0:case 1:case 2:o.appendChars(s,0,2),o.append(l),o.append("0000"),o.appendChars(s,2,3);break;case 3:o.appendChars(s,0,3),o.append("00000"),o.appendChars(s,3,2);break;case 4:o.appendChars(s,0,4),o.append("00000"),o.append(s[4]);break;default:o.appendChars(s,0,5),o.append("0000"),o.append(l);break}return r.length>=8&&o.append(r.charAt(7)),o.toString()}}zn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),zn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class bi extends Rt{constructor(r){super();let s=r==null?null:r.get(re.POSSIBLE_FORMATS),o=[];i(s)?(o.push(new Rr),o.push(new Wr),o.push(new so),o.push(new zn)):(s.indexOf(Ee.EAN_13)>-1&&o.push(new Rr),s.indexOf(Ee.UPC_A)>-1&&o.push(new Wr),s.indexOf(Ee.EAN_8)>-1&&o.push(new so),s.indexOf(Ee.UPC_E)>-1&&o.push(new zn)),this.readers=o}decodeRow(r,s,o){for(let l of this.readers)try{const c=l.decodeRow(r,s,o),h=c.getBarcodeFormat()===Ee.EAN_13&&c.getText().charAt(0)==="0",f=o==null?null:o.get(re.POSSIBLE_FORMATS),p=f==null||f.includes(Ee.UPC_A);if(h&&p){const y=c.getRawBytes(),_=new pt(c.getText().substring(1),y,y?y.length:null,c.getResultPoints(),Ee.UPC_A);return _.putAllMetadata(c.getResultMetadata()),_}return c}catch{}throw new ee}reset(){for(let r of this.readers)r.reset()}}class $t extends Rt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let o=0;o<s.length;o++)if(Rt.patternMatchVariance(r,s[o],$t.MAX_INDIVIDUAL_VARIANCE)<$t.MAX_AVG_VARIANCE)return o;throw new ee}static count(r){return Ve.sum(new Int32Array(r))}static increment(r,s){let o=0,l=s[0];for(let c=1;c<r.length;c++)s[c]>l&&(l=s[c],o=c);r[o]++}static decrement(r,s){let o=0,l=s[0];for(let c=1;c<r.length;c++)s[c]<l&&(l=s[c],o=c);r[o]--}static isFinderPattern(r){let s=r[0]+r[1],o=s+r[2]+r[3],l=s/o;if(l>=$t.MIN_FINDER_PATTERN_RATIO&&l<=$t.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let f of r)f>h&&(h=f),f<c&&(c=f);return h<10*c}return!1}}$t.MAX_AVG_VARIANCE=.2,$t.MAX_INDIVIDUAL_VARIANCE=.45,$t.MIN_FINDER_PATTERN_RATIO=9.5/12,$t.MAX_FINDER_PATTERN_RATIO=12.5/14;class wr{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof wr))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ms{constructor(r,s,o,l,c){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new we(o,c)),this.resultPoints.push(new we(l,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof ms))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class dt{constructor(){}static getRSSvalue(r,s,o){let l=0;for(let p of r)l+=p;let c=0,h=0,f=r.length;for(let p=0;p<f-1;p++){let y;for(y=1,h|=1<<p;y<r[p];y++,h&=~(1<<p)){let _=dt.combins(l-y-1,f-p-2);if(o&&h===0&&l-y-(f-p-1)>=f-p-1&&(_-=dt.combins(l-y-(f-p),f-p-2)),f-p-1>1){let v=0;for(let T=l-y-(f-p-2);T>s;T--)v+=dt.combins(l-y-T-1,f-p-3);_-=v*(f-1-p)}else l-y>s&&_--;c+=_}l-=y}return c}static combins(r,s){let o,l;r-s>s?(l=s,o=r-s):(l=r-s,o=s);let c=1,h=1;for(let f=r;f>o;f--)c*=f,h<=l&&(c/=h,h++);for(;h<=l;)c/=h,h++;return c}}class Tl{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let o=12*s,l=new Q(o),c=0,f=r[0].getRightChar().getValue();for(let p=11;p>=0;--p)f&1<<p&&l.set(c),c++;for(let p=1;p<r.length;++p){let y=r[p],_=y.getLeftChar().getValue();for(let v=11;v>=0;--v)_&1<<v&&l.set(c),c++;if(y.getRightChar()!=null){let v=y.getRightChar().getValue();for(let T=11;T>=0;--T)v&1<<T&&l.set(c),c++}}return l}}class nr{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class li{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class In extends li{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===In.FNC1}}In.FNC1="$";class ui extends li{constructor(r,s,o){super(r),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Jt extends li{constructor(r,s,o){if(super(r),s<0||s>10||o<0||o>10)throw new D;this.firstDigit=s,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Jt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Jt.FNC1}isAnyFNC1(){return this.firstDigit===Jt.FNC1||this.secondDigit===Jt.FNC1}}Jt.FNC1=10;class pe{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new ee;let s=r.substring(0,2);for(let c of pe.TWO_DIGIT_DATA_LENGTH)if(c[0]===s)return c[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(2,c[2],r):pe.processFixedAI(2,c[1],r);if(r.length<3)throw new ee;let o=r.substring(0,3);for(let c of pe.THREE_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(3,c[2],r):pe.processFixedAI(3,c[1],r);for(let c of pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(4,c[2],r):pe.processFixedAI(4,c[1],r);if(r.length<4)throw new ee;let l=r.substring(0,4);for(let c of pe.FOUR_DIGIT_DATA_LENGTH)if(c[0]===l)return c[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(4,c[2],r):pe.processFixedAI(4,c[1],r);throw new ee}static processFixedAI(r,s,o){if(o.length<r)throw new ee;let l=o.substring(0,r);if(o.length<r+s)throw new ee;let c=o.substring(r,r+s),h=o.substring(r+s),f="("+l+")"+c,p=pe.parseFieldsInGeneralPurpose(h);return p==null?f:f+p}static processVariableAI(r,s,o){let l=o.substring(0,r),c;o.length<r+s?c=o.length:c=r+s;let h=o.substring(r,c),f=o.substring(c),p="("+l+")"+h,y=pe.parseFieldsInGeneralPurpose(f);return y==null?p:p+y}}pe.VARIABLE_LENGTH=[],pe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",pe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",pe.VARIABLE_LENGTH,20],["22",pe.VARIABLE_LENGTH,29],["30",pe.VARIABLE_LENGTH,8],["37",pe.VARIABLE_LENGTH,8],["90",pe.VARIABLE_LENGTH,30],["91",pe.VARIABLE_LENGTH,30],["92",pe.VARIABLE_LENGTH,30],["93",pe.VARIABLE_LENGTH,30],["94",pe.VARIABLE_LENGTH,30],["95",pe.VARIABLE_LENGTH,30],["96",pe.VARIABLE_LENGTH,30],["97",pe.VARIABLE_LENGTH,3],["98",pe.VARIABLE_LENGTH,30],["99",pe.VARIABLE_LENGTH,30]],pe.THREE_DIGIT_DATA_LENGTH=[["240",pe.VARIABLE_LENGTH,30],["241",pe.VARIABLE_LENGTH,30],["242",pe.VARIABLE_LENGTH,6],["250",pe.VARIABLE_LENGTH,30],["251",pe.VARIABLE_LENGTH,30],["253",pe.VARIABLE_LENGTH,17],["254",pe.VARIABLE_LENGTH,20],["400",pe.VARIABLE_LENGTH,30],["401",pe.VARIABLE_LENGTH,30],["402",17],["403",pe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",pe.VARIABLE_LENGTH,20],["421",pe.VARIABLE_LENGTH,15],["422",3],["423",pe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",pe.VARIABLE_LENGTH,15],["391",pe.VARIABLE_LENGTH,18],["392",pe.VARIABLE_LENGTH,15],["393",pe.VARIABLE_LENGTH,18],["703",pe.VARIABLE_LENGTH,30]],pe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",pe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",pe.VARIABLE_LENGTH,20],["8003",pe.VARIABLE_LENGTH,30],["8004",pe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",pe.VARIABLE_LENGTH,30],["8008",pe.VARIABLE_LENGTH,12],["8018",18],["8020",pe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",pe.VARIABLE_LENGTH,70],["8200",pe.VARIABLE_LENGTH,70]];class Pi{constructor(r){this.buffer=new L,this.information=r}decodeAllCodes(r,s){let o=s,l=null;do{let c=this.decodeGeneralPurposeField(o,l),h=pe.parseFieldsInGeneralPurpose(c.getNewString());if(h!=null&&r.append(h),c.isRemaining()?l=""+c.getRemainingValue():l=null,o===c.getNewPosition())break;o=c.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(r,4);return c===0?new Jt(this.information.getSize(),Jt.FNC1,Jt.FNC1):new Jt(this.information.getSize(),c-1,Jt.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),o=(s-8)/11,l=(s-8)%11;return new Jt(r+7,o,l)}extractNumericValueFromBitArray(r,s){return Pi.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,o){let l=0;for(let c=0;c<o;++c)r.get(s+c)&&(l|=1<<o-c-1);return l}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new ui(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new ui(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let o=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(o!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new ui(this.current.getPosition(),this.buffer.toString()):s=new ui(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new nr(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new ui(this.current.getPosition(),this.buffer.toString());return new nr(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new nr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new ui(this.current.getPosition(),this.buffer.toString());return new nr(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new nr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new ui(this.current.getPosition(),this.buffer.toString());return new nr(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new nr(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<116)return!0;if(r+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,8);return l>=232&&l<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new In(r+5,In.FNC1);if(s>=5&&s<15)return new In(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<90)return new In(r+7,""+(o+1));if(o>=90&&o<116)return new In(r+7,""+(o+7));let l=this.extractNumericValueFromBitArray(r,8),c;switch(l){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new D}return new In(r+8,c)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,6);return o>=16&&o<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new In(r+5,In.FNC1);if(s>=5&&s<15)return new In(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,6);if(o>=32&&o<58)return new In(r+6,""+(o+33));let l;switch(o){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new Un("Decoding invalid alphanumeric value: "+o)}return new In(r+6,l)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class Mi{constructor(r){this.information=r,this.generalDecoder=new Pi(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class pn extends Mi{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let o=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,o)}encodeCompressedGtinWithoutAI(r,s,o){for(let l=0;l<4;++l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*l,10);c/100===0&&r.append("0"),c/10===0&&r.append("0"),r.append(c)}pn.appendCheckDigit(r,o)}static appendCheckDigit(r,s){let o=0;for(let l=0;l<13;l++){let c=r.charAt(l+s).charCodeAt(0)-48;o+=l&1?c:3*c}o=10-o%10,o===10&&(o=0),r.append(o)}}pn.GTIN_SIZE=40;class Gr extends pn{constructor(r){super(r)}parseInformation(){let r=new L;r.append("(01)");let s=r.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(Gr.HEADER_SIZE,4);return r.append(o),this.encodeCompressedGtinWithoutAI(r,Gr.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,Gr.HEADER_SIZE+44)}}Gr.HEADER_SIZE=4;class ci extends Mi{constructor(r){super(r)}parseInformation(){let r=new L;return this.getGeneralDecoder().decodeAllCodes(r,ci.HEADER_SIZE)}}ci.HEADER_SIZE=5;class rr extends pn{constructor(r){super(r)}encodeCompressedWeight(r,s,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,o);this.addWeightCode(r,l);let c=this.checkWeight(l),h=1e5;for(let f=0;f<5;++f)c/h===0&&r.append("0"),h/=10;r.append(c)}}class ir extends rr{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=ir.HEADER_SIZE+rr.GTIN_SIZE+ir.WEIGHT_SIZE)throw new ee;let r=new L;return this.encodeCompressedGtin(r,ir.HEADER_SIZE),this.encodeCompressedWeight(r,ir.HEADER_SIZE+rr.GTIN_SIZE,ir.WEIGHT_SIZE),r.toString()}}ir.HEADER_SIZE=5,ir.WEIGHT_SIZE=15;class Sl extends ir{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class aa extends ir{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Hn extends pn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Hn.HEADER_SIZE+pn.GTIN_SIZE)throw new ee;let r=new L;this.encodeCompressedGtin(r,Hn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Hn.HEADER_SIZE+pn.GTIN_SIZE,Hn.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(Hn.HEADER_SIZE+pn.GTIN_SIZE+Hn.LAST_DIGIT_SIZE,null);return r.append(o.getNewString()),r.toString()}}Hn.HEADER_SIZE=8,Hn.LAST_DIGIT_SIZE=2;class cn extends pn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<cn.HEADER_SIZE+pn.GTIN_SIZE)throw new ee;let r=new L;this.encodeCompressedGtin(r,cn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(cn.HEADER_SIZE+pn.GTIN_SIZE,cn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(cn.HEADER_SIZE+pn.GTIN_SIZE+cn.LAST_DIGIT_SIZE,cn.FIRST_THREE_DIGITS_SIZE);o/100==0&&r.append("0"),o/10==0&&r.append("0"),r.append(o);let l=this.getGeneralDecoder().decodeGeneralPurposeField(cn.HEADER_SIZE+pn.GTIN_SIZE+cn.LAST_DIGIT_SIZE+cn.FIRST_THREE_DIGITS_SIZE,null);return r.append(l.getNewString()),r.toString()}}cn.HEADER_SIZE=8,cn.LAST_DIGIT_SIZE=2,cn.FIRST_THREE_DIGITS_SIZE=10;class ct extends rr{constructor(r,s,o){super(r),this.dateCode=o,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=ct.HEADER_SIZE+ct.GTIN_SIZE+ct.WEIGHT_SIZE+ct.DATE_SIZE)throw new ee;let r=new L;return this.encodeCompressedGtin(r,ct.HEADER_SIZE),this.encodeCompressedWeight(r,ct.HEADER_SIZE+ct.GTIN_SIZE,ct.WEIGHT_SIZE),this.encodeCompressedDate(r,ct.HEADER_SIZE+ct.GTIN_SIZE+ct.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(s,ct.DATE_SIZE);if(o==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let l=o%32;o/=32;let c=o%12+1;o/=12;let h=o;h/10==0&&r.append("0"),r.append(h),c/10==0&&r.append("0"),r.append(c),l/10==0&&r.append("0"),r.append(l)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}ct.HEADER_SIZE=8,ct.WEIGHT_SIZE=20,ct.DATE_SIZE=16;function Rl(C){try{if(C.get(1))return new Gr(C);if(!C.get(2))return new ci(C);switch(Pi.extractNumericValueFromBitArray(C,1,4)){case 4:return new Sl(C);case 5:return new aa(C)}switch(Pi.extractNumericValueFromBitArray(C,1,5)){case 12:return new Hn(C);case 13:return new cn(C)}switch(Pi.extractNumericValueFromBitArray(C,1,7)){case 56:return new ct(C,"310","11");case 57:return new ct(C,"320","11");case 58:return new ct(C,"310","13");case 59:return new ct(C,"320","13");case 60:return new ct(C,"310","15");case 61:return new ct(C,"320","15");case 62:return new ct(C,"310","17");case 63:return new ct(C,"320","17")}}catch(r){throw console.log(r),new Un("unknown decoder: "+C)}}class sr{constructor(r,s,o,l){this.leftchar=r,this.rightchar=s,this.finderpattern=o,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof sr?sr.equalsOrNull(r.leftchar,s.leftchar)&&sr.equalsOrNull(r.rightchar,s.rightchar)&&sr.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:sr.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class oo{constructor(r,s,o){this.pairs=r,this.rowNumber=s,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof oo?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let o;return r.forEach((l,c)=>{s.forEach(h=>{l.getLeftChar().getValue()===h.getLeftChar().getValue()&&l.getRightChar().getValue()===h.getRightChar().getValue()&&l.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(o=!0)})}),o}}class ne extends $t{constructor(r){super(...arguments),this.pairs=new Array(ne.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,o){this.pairs.length=0,this.startFromEven=!1;try{return ne.constructResult(this.decodeRow2pairs(r,s))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,ne.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(c){if(c instanceof ee){if(!this.pairs.length)throw new ee;o=!0}}if(this.checkChecksum())return this.pairs;let l;if(this.rows.length?l=!0:l=!1,this.storeRow(r,!1),l){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new ee}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let o=s;o<this.rows.length;o++){let l=this.rows[o];this.pairs.length=0;for(let h of r)this.pairs.push(h.getPairs());if(this.pairs.push(l.getPairs()),!ne.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(r);c.push(l);try{return this.checkRows(c,o+1)}catch(h){this.verbose&&console.log(h)}}throw new ee}static isValidSequence(r){for(let s of ne.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let o=!0;for(let l=0;l<r.length;l++)if(r[l].getFinderPattern().getValue()!=s[l]){o=!1;break}if(o)return!0}return!1}storeRow(r,s){let o=0,l=!1,c=!1;for(;o<this.rows.length;){let h=this.rows[o];if(h.getRowNumber()>r){c=h.isEquivalent(this.pairs);break}l=h.isEquivalent(this.pairs),o++}c||l||ne.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new oo(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let o of s)if(o.getPairs().length!==r.length){for(let l of o.getPairs())for(let c of r)if(sr.equals(l,c))break}}static isPartialRow(r,s){for(let o of s){let l=!0;for(let c of r){let h=!1;for(let f of o.getPairs())if(c.equals(f)){h=!0;break}if(!h){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=Tl.buildBitArray(r),l=Rl(s).parseInformation(),c=r[0].getFinderPattern().getResultPoints(),h=r[r.length-1].getFinderPattern().getResultPoints(),f=[c[0],c[1],h[0],h[1]];return new pt(l,null,null,f,Ee.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),o=r.getRightChar();if(o==null)return!1;let l=o.getChecksumPortion(),c=2;for(let f=1;f<this.pairs.size();++f){let p=this.pairs.get(f);l+=p.getLeftChar().getChecksumPortion(),c++;let y=p.getRightChar();y!=null&&(l+=y.getChecksumPortion(),c++)}return l%=211,211*(c-4)+l==s.getValue()}static getNextSecondBar(r,s){let o;return r.get(s)?(o=r.getNextUnset(s),o=r.getNextSet(o)):(o=r.getNextSet(s),o=r.getNextUnset(o)),o}retrieveNextPair(r,s,o){let l=s.length%2==0;this.startFromEven&&(l=!l);let c,h=!0,f=-1;do this.findNextPair(r,s,f),c=this.parseFoundFinderPattern(r,o,l),c==null?f=ne.getNextSecondBar(r,this.startEnd[0]):h=!1;while(h);let p=this.decodeDataCharacter(r,c,l,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new ee;let y;try{y=this.decodeDataCharacter(r,c,l,!1)}catch(_){y=null,this.verbose&&console.log(_)}return new sr(p,y,c,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=r.getSize(),h;o>=0?h=o:this.isEmptyPair(s)?h=0:h=s[s.length-1].getFinderPattern().getStartEnd()[1];let f=s.length%2!=0;this.startFromEven&&(f=!f);let p=!1;for(;h<c&&(p=!r.get(h),!!p);)h++;let y=0,_=h;for(let v=h;v<c;v++)if(r.get(v)!=p)l[y]++;else{if(y==3){if(f&&ne.reverseCounters(l),ne.isFinderPattern(l)){this.startEnd[0]=_,this.startEnd[1]=v;return}f&&ne.reverseCounters(l),_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,p=!p}throw new ee}static reverseCounters(r){let s=r.length;for(let o=0;o<s/2;++o){let l=r[o];r[o]=r[s-o-1],r[s-o-1]=l}}parseFoundFinderPattern(r,s,o){let l,c,h;if(o){let y=this.startEnd[0]-1;for(;y>=0&&!r.get(y);)y--;y++,l=this.startEnd[0]-y,c=y,h=this.startEnd[1]}else c=this.startEnd[0],h=r.getNextUnset(this.startEnd[1]+1),l=h-this.startEnd[1];let f=this.getDecodeFinderCounters();q.arraycopy(f,0,f,1,f.length-1),f[0]=l;let p;try{p=this.parseFinderValue(f,ne.FINDER_PATTERNS)}catch{return null}return new ms(p,[c,h],c,h,s)}decodeDataCharacter(r,s,o,l){let c=this.getDataCharacterCounters();for(let ht=0;ht<c.length;ht++)c[ht]=0;if(l)ne.recordPatternInReverse(r,s.getStartEnd()[0],c);else{ne.recordPattern(r,s.getStartEnd()[1],c);for(let ht=0,yn=c.length-1;ht<yn;ht++,yn--){let lr=c[ht];c[ht]=c[yn],c[yn]=lr}}let h=17,f=Ve.sum(new Int32Array(c))/h,p=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(f-p)/p>.3)throw new ee;let y=this.getOddCounts(),_=this.getEvenCounts(),v=this.getOddRoundingErrors(),T=this.getEvenRoundingErrors();for(let ht=0;ht<c.length;ht++){let yn=1*c[ht]/f,lr=yn+.5;if(lr<1){if(yn<.3)throw new ee;lr=1}else if(lr>8){if(yn>8.7)throw new ee;lr=8}let co=ht/2;ht&1?(_[co]=lr,T[co]=yn-lr):(y[co]=lr,v[co]=yn-lr)}this.adjustOddEvenCounts(h);let M=4*s.getValue()+(o?0:2)+(l?0:1)-1,z=0,W=0;for(let ht=y.length-1;ht>=0;ht--){if(ne.isNotA1left(s,o,l)){let yn=ne.WEIGHTS[M][2*ht];W+=y[ht]*yn}z+=y[ht]}let K=0;for(let ht=_.length-1;ht>=0;ht--)if(ne.isNotA1left(s,o,l)){let yn=ne.WEIGHTS[M][2*ht+1];K+=_[ht]*yn}let J=W+K;if(z&1||z>13||z<4)throw new ee;let le=(13-z)/2,ue=ne.SYMBOL_WIDEST[le],ie=9-ue,ze=dt.getRSSvalue(y,ue,!0),ke=dt.getRSSvalue(_,ie,!1),jn=ne.EVEN_TOTAL_SUBSET[le],br=ne.GSUM[le],Xn=ze*jn+ke+br;return new wr(Xn,J)}static isNotA1left(r,s,o){return!(r.getValue()==0&&s&&o)}adjustOddEvenCounts(r){let s=Ve.sum(new Int32Array(this.getOddCounts())),o=Ve.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1;s>13?c=!0:s<4&&(l=!0);let h=!1,f=!1;o>13?f=!0:o<4&&(h=!0);let p=s+o-r,y=(s&1)==1,_=(o&1)==0;if(p==1)if(y){if(_)throw new ee;c=!0}else{if(!_)throw new ee;f=!0}else if(p==-1)if(y){if(_)throw new ee;l=!0}else{if(!_)throw new ee;h=!0}else if(p==0){if(y){if(!_)throw new ee;s<o?(l=!0,f=!0):(c=!0,h=!0)}else if(_)throw new ee}else throw new ee;if(l){if(c)throw new ee;ne.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&ne.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(f)throw new ee;ne.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&ne.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ne.SYMBOL_WIDEST=[7,5,4,3,1],ne.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ne.GSUM=[0,348,1388,2948,3988],ne.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ne.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ne.FINDER_PAT_A=0,ne.FINDER_PAT_B=1,ne.FINDER_PAT_C=2,ne.FINDER_PAT_D=3,ne.FINDER_PAT_E=4,ne.FINDER_PAT_F=5,ne.FINDER_PATTERN_SEQUENCES=[[ne.FINDER_PAT_A,ne.FINDER_PAT_A],[ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B],[ne.FINDER_PAT_A,ne.FINDER_PAT_C,ne.FINDER_PAT_B,ne.FINDER_PAT_D],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_C],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_D,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_D],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_E],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F]],ne.MAX_PAIRS=11;class ys extends wr{constructor(r,s,o){super(r,s),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Je extends $t{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,o){const l=this.decodePair(s,!1,r,o);Je.addOrTally(this.possibleLeftPairs,l),s.reverse();let c=this.decodePair(s,!0,r,o);Je.addOrTally(this.possibleRightPairs,c),s.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&Je.checkChecksum(h,f))return Je.constructResult(h,f)}throw new ee}static addOrTally(r,s){if(s==null)return;let o=!1;for(let l of r)if(l.getValue()===s.getValue()){l.incrementCount(),o=!0;break}o||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let o=4537077*r.getValue()+s.getValue(),l=new String(o).toString(),c=new L;for(let y=13-l.length;y>0;y--)c.append("0");c.append(l);let h=0;for(let y=0;y<13;y++){let _=c.charAt(y).charCodeAt(0)-48;h+=y&1?_:3*_}h=10-h%10,h===10&&(h=0),c.append(h.toString());let f=r.getFinderPattern().getResultPoints(),p=s.getFinderPattern().getResultPoints();return new pt(c.toString(),null,0,[f[0],f[1],p[0],p[1]],Ee.RSS_14,new Date().getTime())}static checkChecksum(r,s){let o=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,l=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,o===l}decodePair(r,s,o,l){try{let c=this.findFinderPattern(r,s),h=this.parseFoundFinderPattern(r,o,s,c),f=l==null?null:l.get(re.NEED_RESULT_POINT_CALLBACK);if(f!=null){let _=(c[0]+c[1])/2;s&&(_=r.getSize()-1-_),f.foundPossibleResultPoint(new we(_,o))}let p=this.decodeDataCharacter(r,h,!0),y=this.decodeDataCharacter(r,h,!1);return new ys(1597*p.getValue()+y.getValue(),p.getChecksumPortion()+4*y.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(r,s,o){let l=this.getDataCharacterCounters();for(let K=0;K<l.length;K++)l[K]=0;if(o)Rt.recordPatternInReverse(r,s.getStartEnd()[0],l);else{Rt.recordPattern(r,s.getStartEnd()[1]+1,l);for(let K=0,J=l.length-1;K<J;K++,J--){let le=l[K];l[K]=l[J],l[J]=le}}let c=o?16:15,h=Ve.sum(new Int32Array(l))/c,f=this.getOddCounts(),p=this.getEvenCounts(),y=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors();for(let K=0;K<l.length;K++){let J=l[K]/h,le=Math.floor(J+.5);le<1?le=1:le>8&&(le=8);let ue=Math.floor(K/2);K&1?(p[ue]=le,_[ue]=J-le):(f[ue]=le,y[ue]=J-le)}this.adjustOddEvenCounts(o,c);let v=0,T=0;for(let K=f.length-1;K>=0;K--)T*=9,T+=f[K],v+=f[K];let M=0,z=0;for(let K=p.length-1;K>=0;K--)M*=9,M+=p[K],z+=p[K];let W=T+3*M;if(o){if(v&1||v>12||v<4)throw new ee;let K=(12-v)/2,J=Je.OUTSIDE_ODD_WIDEST[K],le=9-J,ue=dt.getRSSvalue(f,J,!1),ie=dt.getRSSvalue(p,le,!0),ze=Je.OUTSIDE_EVEN_TOTAL_SUBSET[K],ke=Je.OUTSIDE_GSUM[K];return new wr(ue*ze+ie+ke,W)}else{if(z&1||z>10||z<4)throw new ee;let K=(10-z)/2,J=Je.INSIDE_ODD_WIDEST[K],le=9-J,ue=dt.getRSSvalue(f,J,!0),ie=dt.getRSSvalue(p,le,!1),ze=Je.INSIDE_ODD_TOTAL_SUBSET[K],ke=Je.INSIDE_GSUM[K];return new wr(ie*ze+ue+ke,W)}}findFinderPattern(r,s){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=r.getSize(),c=!1,h=0;for(;h<l&&(c=!r.get(h),s!==c);)h++;let f=0,p=h;for(let y=h;y<l;y++)if(r.get(y)!==c)o[f]++;else{if(f===3){if($t.isFinderPattern(o))return[p,y];p+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,c=!c}throw new ee}parseFoundFinderPattern(r,s,o,l){let c=r.get(l[0]),h=l[0]-1;for(;h>=0&&c!==r.get(h);)h--;h++;const f=l[0]-h,p=this.getDecodeFinderCounters(),y=new Int32Array(p.length);q.arraycopy(p,0,y,1,p.length-1),y[0]=f;const _=this.parseFinderValue(y,Je.FINDER_PATTERNS);let v=h,T=l[1];return o&&(v=r.getSize()-1-v,T=r.getSize()-1-T),new ms(_,[h,l[1]],v,T,s)}adjustOddEvenCounts(r,s){let o=Ve.sum(new Int32Array(this.getOddCounts())),l=Ve.sum(new Int32Array(this.getEvenCounts())),c=!1,h=!1,f=!1,p=!1;r?(o>12?h=!0:o<4&&(c=!0),l>12?p=!0:l<4&&(f=!0)):(o>11?h=!0:o<5&&(c=!0),l>10?p=!0:l<4&&(f=!0));let y=o+l-s,_=(o&1)===(r?1:0),v=(l&1)===1;if(y===1)if(_){if(v)throw new ee;h=!0}else{if(!v)throw new ee;p=!0}else if(y===-1)if(_){if(v)throw new ee;c=!0}else{if(!v)throw new ee;f=!0}else if(y===0){if(_){if(!v)throw new ee;o<l?(c=!0,p=!0):(h=!0,f=!0)}else if(v)throw new ee}else throw new ee;if(c){if(h)throw new ee;$t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&$t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(p)throw new ee;$t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&$t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Je.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Je.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Je.OUTSIDE_GSUM=[0,161,961,2015,2715],Je.INSIDE_GSUM=[0,336,1036,1516],Je.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Je.INSIDE_ODD_WIDEST=[2,4,6,8],Je.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class jr extends Rt{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const o=r?r.get(re.POSSIBLE_FORMATS):null,l=r&&r.get(re.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(Ee.EAN_13)||o.includes(Ee.UPC_A)||o.includes(Ee.EAN_8)||o.includes(Ee.UPC_E))&&this.readers.push(new bi(r)),o.includes(Ee.CODE_39)&&this.readers.push(new Nt(l)),o.includes(Ee.CODE_128)&&this.readers.push(new fe),o.includes(Ee.ITF)&&this.readers.push(new rt),o.includes(Ee.RSS_14)&&this.readers.push(new Je),o.includes(Ee.RSS_EXPANDED)&&this.readers.push(new ne(this.verbose))):(this.readers.push(new bi(r)),this.readers.push(new Nt),this.readers.push(new bi(r)),this.readers.push(new fe),this.readers.push(new rt),this.readers.push(new Je),this.readers.push(new ne(this.verbose)))}decodeRow(r,s,o){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(r,s,o)}catch{}throw new ee}reset(){this.readers.forEach(r=>r.reset())}}class Uc extends nt{constructor(r=500,s){super(new jr(s),r,s)}}class Ke{constructor(r,s,o){this.ecCodewords=r,this.ecBlocks=[s],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ge{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Le{constructor(r,s,o,l,c,h){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=o,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=c,this.ecBlocks=h;let f=0;const p=h.getECCodewords(),y=h.getECBlocks();for(let _ of y)f+=_.getCount()*(_.getDataCodewords()+p);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new D;for(let o of Le.VERSIONS)if(o.symbolSizeRows===r&&o.symbolSizeColumns===s)return o;throw new D}toString(){return""+this.versionNumber}static buildVersions(){return[new Le(1,10,10,8,8,new Ke(5,new Ge(1,3))),new Le(2,12,12,10,10,new Ke(7,new Ge(1,5))),new Le(3,14,14,12,12,new Ke(10,new Ge(1,8))),new Le(4,16,16,14,14,new Ke(12,new Ge(1,12))),new Le(5,18,18,16,16,new Ke(14,new Ge(1,18))),new Le(6,20,20,18,18,new Ke(18,new Ge(1,22))),new Le(7,22,22,20,20,new Ke(20,new Ge(1,30))),new Le(8,24,24,22,22,new Ke(24,new Ge(1,36))),new Le(9,26,26,24,24,new Ke(28,new Ge(1,44))),new Le(10,32,32,14,14,new Ke(36,new Ge(1,62))),new Le(11,36,36,16,16,new Ke(42,new Ge(1,86))),new Le(12,40,40,18,18,new Ke(48,new Ge(1,114))),new Le(13,44,44,20,20,new Ke(56,new Ge(1,144))),new Le(14,48,48,22,22,new Ke(68,new Ge(1,174))),new Le(15,52,52,24,24,new Ke(42,new Ge(2,102))),new Le(16,64,64,14,14,new Ke(56,new Ge(2,140))),new Le(17,72,72,16,16,new Ke(36,new Ge(4,92))),new Le(18,80,80,18,18,new Ke(48,new Ge(4,114))),new Le(19,88,88,20,20,new Ke(56,new Ge(4,144))),new Le(20,96,96,22,22,new Ke(68,new Ge(4,174))),new Le(21,104,104,24,24,new Ke(56,new Ge(6,136))),new Le(22,120,120,18,18,new Ke(68,new Ge(6,175))),new Le(23,132,132,20,20,new Ke(62,new Ge(8,163))),new Le(24,144,144,22,22,new Ke(62,new Ge(8,156),new Ge(2,155))),new Le(25,8,18,6,16,new Ke(7,new Ge(1,5))),new Le(26,8,32,6,14,new Ke(11,new Ge(1,10))),new Le(27,12,26,10,24,new Ke(14,new Ge(1,16))),new Le(28,12,36,10,16,new Ke(18,new Ge(1,22))),new Le(29,16,36,14,16,new Ke(24,new Ge(1,32))),new Le(30,16,48,14,22,new Ke(28,new Ge(1,49)))]}}Le.VERSIONS=Le.buildVersions();class ws{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new D;this.version=ws.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new $e(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),o=r.getWidth();return Le.getVersionForDimensions(s,o)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,o=4,l=0;const c=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let f=!1,p=!1,y=!1,_=!1;do if(o===c&&l===0&&!f)r[s++]=this.readCorner1(c,h)&255,o-=2,l+=2,f=!0;else if(o===c-2&&l===0&&h&3&&!p)r[s++]=this.readCorner2(c,h)&255,o-=2,l+=2,p=!0;else if(o===c+4&&l===2&&!(h&7)&&!y)r[s++]=this.readCorner3(c,h)&255,o-=2,l+=2,y=!0;else if(o===c-2&&l===0&&(h&7)===4&&!_)r[s++]=this.readCorner4(c,h)&255,o-=2,l+=2,_=!0;else{do o<c&&l>=0&&!this.readMappingMatrix.get(l,o)&&(r[s++]=this.readUtah(o,l,c,h)&255),o-=2,l+=2;while(o>=0&&l<h);o+=1,l+=3;do o>=0&&l<h&&!this.readMappingMatrix.get(l,o)&&(r[s++]=this.readUtah(o,l,c,h)&255),o+=2,l-=2;while(o<c&&l>=0);o+=3,l+=1}while(o<c||l<h);if(s!==this.version.getTotalCodewords())throw new D;return r}readModule(r,s,o,l){return r<0&&(r+=o,s+=4-(o+4&7)),s<0&&(s+=l,r+=4-(l+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,o,l){let c=0;return this.readModule(r-2,s-2,o,l)&&(c|=1),c<<=1,this.readModule(r-2,s-1,o,l)&&(c|=1),c<<=1,this.readModule(r-1,s-2,o,l)&&(c|=1),c<<=1,this.readModule(r-1,s-1,o,l)&&(c|=1),c<<=1,this.readModule(r-1,s,o,l)&&(c|=1),c<<=1,this.readModule(r,s-2,o,l)&&(c|=1),c<<=1,this.readModule(r,s-1,o,l)&&(c|=1),c<<=1,this.readModule(r,s,o,l)&&(c|=1),c}readCorner1(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,1,r,s)&&(o|=1),o<<=1,this.readModule(r-1,2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}readCorner2(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-4,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner3(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-3,r,s)&&(o|=1),o<<=1,this.readModule(1,s-2,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner4(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new S("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),h=s/l|0,f=o/c|0,p=h*l,y=f*c,_=new $e(y,p);for(let v=0;v<h;++v){const T=v*l;for(let M=0;M<f;++M){const z=M*c;for(let W=0;W<l;++W){const K=v*(l+2)+1+W,J=T+W;for(let le=0;le<c;++le){const ue=M*(c+2)+1+le;if(r.get(ue,K)){const ie=z+le;_.set(ie,J)}}}}}return _}}class xs{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const o=s.getECBlocks();let l=0;const c=o.getECBlocks();for(let W of c)l+=W.getCount();const h=new Array(l);let f=0;for(let W of c)for(let K=0;K<W.getCount();K++){const J=W.getDataCodewords(),le=o.getECCodewords()+J;h[f++]=new xs(J,new Uint8Array(le))}const y=h[0].codewords.length-o.getECCodewords(),_=y-1;let v=0;for(let W=0;W<_;W++)for(let K=0;K<f;K++)h[K].codewords[W]=r[v++];const T=s.getVersionNumber()===24,M=T?8:f;for(let W=0;W<M;W++)h[W].codewords[y-1]=r[v++];const z=h[0].codewords.length;for(let W=y;W<z;W++)for(let K=0;K<f;K++){const J=T?(K+8)%f:K,le=T&&J>7?W-1:W;h[J].codewords[le]=r[v++]}if(v!==r.length)throw new S;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ao{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new S(""+r);let s=0,o=this.bitOffset,l=this.byteOffset;const c=this.bytes;if(o>0){const h=8-o,f=r<h?r:h,p=h-f,y=255>>8-f<<p;s=(c[l]&y)>>p,r-=f,o+=f,o===8&&(o=0,l++)}if(r>0){for(;r>=8;)s=s<<8|c[l]&255,l++,r-=8;if(r>0){const h=8-r,f=255>>h<<h;s=s<<r|(c[l]&f)>>h,o+=r}}return this.bitOffset=o,this.byteOffset=l,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Bt;(function(C){C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE"})(Bt||(Bt={}));class Xr{static decode(r){const s=new ao(r),o=new L,l=new L,c=new Array;let h=Bt.ASCII_ENCODE;do if(h===Bt.ASCII_ENCODE)h=this.decodeAsciiSegment(s,o,l);else{switch(h){case Bt.C40_ENCODE:this.decodeC40Segment(s,o);break;case Bt.TEXT_ENCODE:this.decodeTextSegment(s,o);break;case Bt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,o);break;case Bt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,o);break;case Bt.BASE256_ENCODE:this.decodeBase256Segment(s,o,c);break;default:throw new D}h=Bt.ASCII_ENCODE}while(h!==Bt.PAD_ENCODE&&s.available()>0);return l.length()>0&&o.append(l.toString()),new gs(r,o.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(r,s,o){let l=!1;do{let c=r.readBits(8);if(c===0)throw new D;if(c<=128)return l&&(c+=128),s.append(String.fromCharCode(c-1)),Bt.ASCII_ENCODE;if(c===129)return Bt.PAD_ENCODE;if(c<=229){const h=c-130;h<10&&s.append("0"),s.append(""+h)}else switch(c){case 230:return Bt.C40_ENCODE;case 231:return Bt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:l=!0;break;case 236:s.append("[)>05"),o.insert(0,"");break;case 237:s.append("[)>06"),o.insert(0,"");break;case 238:return Bt.ANSIX12_ENCODE;case 239:return Bt.TEXT_ENCODE;case 240:return Bt.EDIFACT_ENCODE;case 241:break;default:if(c!==254||r.available()!==0)throw new D;break}}while(r.available()>0);return Bt.ASCII_ENCODE}static decodeC40Segment(r,s){let o=!1;const l=[];let c=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),l);for(let f=0;f<3;f++){const p=l[f];switch(c){case 0:if(p<3)c=p+1;else if(p<this.C40_BASIC_SET_CHARS.length){const y=this.C40_BASIC_SET_CHARS[p];o?(s.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):s.append(y)}else throw new D;break;case 1:o?(s.append(String.fromCharCode(p+128)),o=!1):s.append(String.fromCharCode(p)),c=0;break;case 2:if(p<this.C40_SHIFT2_SET_CHARS.length){const y=this.C40_SHIFT2_SET_CHARS[p];o?(s.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):s.append(y)}else switch(p){case 27:s.append("");break;case 30:o=!0;break;default:throw new D}c=0;break;case 3:o?(s.append(String.fromCharCode(p+224)),o=!1):s.append(String.fromCharCode(p+96)),c=0;break;default:throw new D}}}while(r.available()>0)}static decodeTextSegment(r,s){let o=!1,l=[],c=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),l);for(let f=0;f<3;f++){const p=l[f];switch(c){case 0:if(p<3)c=p+1;else if(p<this.TEXT_BASIC_SET_CHARS.length){const y=this.TEXT_BASIC_SET_CHARS[p];o?(s.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):s.append(y)}else throw new D;break;case 1:o?(s.append(String.fromCharCode(p+128)),o=!1):s.append(String.fromCharCode(p)),c=0;break;case 2:if(p<this.TEXT_SHIFT2_SET_CHARS.length){const y=this.TEXT_SHIFT2_SET_CHARS[p];o?(s.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):s.append(y)}else switch(p){case 27:s.append("");break;case 30:o=!0;break;default:throw new D}c=0;break;case 3:if(p<this.TEXT_SHIFT3_SET_CHARS.length){const y=this.TEXT_SHIFT3_SET_CHARS[p];o?(s.append(String.fromCharCode(y.charCodeAt(0)+128)),o=!1):s.append(y),c=0}else throw new D;break;default:throw new D}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const o=[];do{if(r.available()===8)return;const l=r.readBits(8);if(l===254)return;this.parseTwoBytes(l,r.readBits(8),o);for(let c=0;c<3;c++){const h=o[c];switch(h){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(h<14)s.append(String.fromCharCode(h+44));else if(h<40)s.append(String.fromCharCode(h+51));else throw new D;break}}}while(r.available()>0)}static parseTwoBytes(r,s,o){let l=(r<<8)+s-1,c=Math.floor(l/1600);o[0]=c,l-=c*1600,c=Math.floor(l/40),o[1]=c,o[2]=l-c*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let o=0;o<4;o++){let l=r.readBits(6);if(l===31){const c=8-r.getBitOffset();c!==8&&r.readBits(c);return}l&32||(l|=64),s.append(String.fromCharCode(l))}}while(r.available()>0)}static decodeBase256Segment(r,s,o){let l=1+r.getByteOffset();const c=this.unrandomize255State(r.readBits(8),l++);let h;if(c===0?h=r.available()/8|0:c<250?h=c:h=250*(c-249)+this.unrandomize255State(r.readBits(8),l++),h<0)throw new D;const f=new Uint8Array(h);for(let p=0;p<h;p++){if(r.available()<8)throw new D;f[p]=this.unrandomize255State(r.readBits(8),l++)}o.push(f);try{s.append(G.decode(f,H.ISO88591))}catch(p){throw new Un("Platform does not support required encoding: "+p.message)}}static unrandomize255State(r,s){const o=149*s%255+1,l=r-o;return l>=0?l:l+256}}Xr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Xr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Xr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Xr.TEXT_SHIFT2_SET_CHARS=Xr.C40_SHIFT2_SET_CHARS,Xr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class zc{constructor(){this.rsDecoder=new Oi(We.DATA_MATRIX_FIELD_256)}decode(r){const s=new ws(r),o=s.getVersion(),l=s.readCodewords(),c=xs.getDataBlocks(l,o);let h=0;for(let y of c)h+=y.getNumDataCodewords();const f=new Uint8Array(h),p=c.length;for(let y=0;y<p;y++){const _=c[y],v=_.getCodewords(),T=_.getNumDataCodewords();this.correctErrors(v,T);for(let M=0;M<T;M++)f[M*p+y]=v[M]}return Xr.decode(f)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new U}for(let l=0;l<s;l++)r[l]=o[l]}}class It{constructor(r){this.image=r,this.rectangleDetector=new er(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new ee;s=this.shiftToModuleCenter(s);const o=s[0],l=s[1],c=s[2],h=s[3];let f=this.transitionsBetween(o,h)+1,p=this.transitionsBetween(c,h)+1;(f&1)===1&&(f+=1),(p&1)===1&&(p+=1),4*f<7*p&&4*p<7*f&&(f=p=Math.max(f,p));let y=It.sampleGrid(this.image,o,l,c,h,f,p);return new eo(y,[o,l,c,h])}static shiftPoint(r,s,o){let l=(s.getX()-r.getX())/(o+1),c=(s.getY()-r.getY())/(o+1);return new we(r.getX()+l,r.getY()+c)}static moveAway(r,s,o){let l=r.getX(),c=r.getY();return l<s?l-=1:l+=1,c<o?c-=1:c+=1,new we(l,c)}detectSolid1(r){let s=r[0],o=r[1],l=r[3],c=r[2],h=this.transitionsBetween(s,o),f=this.transitionsBetween(o,l),p=this.transitionsBetween(l,c),y=this.transitionsBetween(c,s),_=h,v=[c,s,o,l];return _>f&&(_=f,v[0]=s,v[1]=o,v[2]=l,v[3]=c),_>p&&(_=p,v[0]=o,v[1]=l,v[2]=c,v[3]=s),_>y&&(v[0]=l,v[1]=c,v[2]=s,v[3]=o),v}detectSolid2(r){let s=r[0],o=r[1],l=r[2],c=r[3],h=this.transitionsBetween(s,c),f=It.shiftPoint(o,l,(h+1)*4),p=It.shiftPoint(l,o,(h+1)*4),y=this.transitionsBetween(f,s),_=this.transitionsBetween(p,c);return y<_?(r[0]=s,r[1]=o,r[2]=l,r[3]=c):(r[0]=o,r[1]=l,r[2]=c,r[3]=s),r}correctTopRight(r){let s=r[0],o=r[1],l=r[2],c=r[3],h=this.transitionsBetween(s,c),f=this.transitionsBetween(o,c),p=It.shiftPoint(s,o,(f+1)*4),y=It.shiftPoint(l,o,(h+1)*4);h=this.transitionsBetween(p,c),f=this.transitionsBetween(y,c);let _=new we(c.getX()+(l.getX()-o.getX())/(h+1),c.getY()+(l.getY()-o.getY())/(h+1)),v=new we(c.getX()+(s.getX()-o.getX())/(f+1),c.getY()+(s.getY()-o.getY())/(f+1));if(!this.isValid(_))return this.isValid(v)?v:null;if(!this.isValid(v))return _;let T=this.transitionsBetween(p,_)+this.transitionsBetween(y,_),M=this.transitionsBetween(p,v)+this.transitionsBetween(y,v);return T>M?_:v}shiftToModuleCenter(r){let s=r[0],o=r[1],l=r[2],c=r[3],h=this.transitionsBetween(s,c)+1,f=this.transitionsBetween(l,c)+1,p=It.shiftPoint(s,o,f*4),y=It.shiftPoint(l,o,h*4);h=this.transitionsBetween(p,c)+1,f=this.transitionsBetween(y,c)+1,(h&1)===1&&(h+=1),(f&1)===1&&(f+=1);let _=(s.getX()+o.getX()+l.getX()+c.getX())/4,v=(s.getY()+o.getY()+l.getY()+c.getY())/4;s=It.moveAway(s,_,v),o=It.moveAway(o,_,v),l=It.moveAway(l,_,v),c=It.moveAway(c,_,v);let T,M;return p=It.shiftPoint(s,o,f*4),p=It.shiftPoint(p,c,h*4),T=It.shiftPoint(o,s,f*4),T=It.shiftPoint(T,l,h*4),y=It.shiftPoint(l,c,f*4),y=It.shiftPoint(y,o,h*4),M=It.shiftPoint(c,l,f*4),M=It.shiftPoint(M,s,h*4),[p,T,y,M]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,o,l,c,h,f){return tr.getInstance().sampleGrid(r,h,f,.5,.5,h-.5,.5,h-.5,f-.5,.5,f-.5,s.getX(),s.getY(),c.getX(),c.getY(),l.getX(),l.getY(),o.getX(),o.getY())}transitionsBetween(r,s){let o=Math.trunc(r.getX()),l=Math.trunc(r.getY()),c=Math.trunc(s.getX()),h=Math.trunc(s.getY()),f=Math.abs(h-l)>Math.abs(c-o);if(f){let W=o;o=l,l=W,W=c,c=h,h=W}let p=Math.abs(c-o),y=Math.abs(h-l),_=-p/2,v=l<h?1:-1,T=o<c?1:-1,M=0,z=this.image.get(f?l:o,f?o:l);for(let W=o,K=l;W!==c;W+=T){let J=this.image.get(f?K:W,f?W:K);if(J!==z&&(M++,z=J),_+=y,_>0){if(K===h)break;K+=v,_-=p}}return M}}class Nr{constructor(){this.decoder=new zc}decode(r,s=null){let o,l;if(s!=null&&s.has(re.PURE_BARCODE)){const y=Nr.extractPureBits(r.getBlackMatrix());o=this.decoder.decode(y),l=Nr.NO_POINTS}else{const y=new It(r.getBlackMatrix()).detect();o=this.decoder.decode(y.getBits()),l=y.getPoints()}const c=o.getRawBytes(),h=new pt(o.getText(),c,8*c.length,l,Ee.DATA_MATRIX,q.currentTimeMillis()),f=o.getByteSegments();f!=null&&h.putMetadata(Xt.BYTE_SEGMENTS,f);const p=o.getECLevel();return p!=null&&h.putMetadata(Xt.ERROR_CORRECTION_LEVEL,p),h}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s==null||o==null)throw new ee;const l=this.moduleSize(s,r);let c=s[1];const h=o[1];let f=s[0];const y=(o[0]-f+1)/l,_=(h-c+1)/l;if(y<=0||_<=0)throw new ee;const v=l/2;c+=v,f+=v;const T=new $e(y,_);for(let M=0;M<_;M++){const z=c+M*l;for(let W=0;W<y;W++)r.get(f+W*l,z)&&T.set(W,M)}return T}static moduleSize(r,s){const o=s.getWidth();let l=r[0];const c=r[1];for(;l<o&&s.get(l,c);)l++;if(l===o)throw new ee;const h=l-r[0];if(h===0)throw new ee;return h}}Nr.NO_POINTS=[];class Hc extends nt{constructor(r=500){super(new Nr,r)}}var Wn;(function(C){C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H"})(Wn||(Wn={}));class Ue{constructor(r,s,o){this.value=r,this.stringValue=s,this.bits=o,Ue.FOR_BITS.set(o,this),Ue.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return Ue.L;case"M":return Ue.M;case"Q":return Ue.Q;case"H":return Ue.H;default:throw new I(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof Ue))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=Ue.FOR_BITS.size)throw new S;return Ue.FOR_BITS.get(r)}}Ue.FOR_BITS=new Map,Ue.FOR_VALUE=new Map,Ue.L=new Ue(Wn.L,"L",1),Ue.M=new Ue(Wn.M,"M",0),Ue.Q=new Ue(Wn.Q,"Q",3),Ue.H=new Ue(Wn.H,"H",2);class zt{constructor(r){this.errorCorrectionLevel=Ue.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return B.bitCount(r^s)}static decodeFormatInformation(r,s){const o=zt.doDecodeFormatInformation(r,s);return o!==null?o:zt.doDecodeFormatInformation(r^zt.FORMAT_INFO_MASK_QR,s^zt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let o=Number.MAX_SAFE_INTEGER,l=0;for(const c of zt.FORMAT_INFO_DECODE_LOOKUP){const h=c[0];if(h===r||h===s)return new zt(c[1]);let f=zt.numBitsDiffering(r,h);f<o&&(l=c[1],o=f),r!==s&&(f=zt.numBitsDiffering(s,h),f<o&&(l=c[1],o=f))}return o<=3?new zt(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof zt))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}zt.FORMAT_INFO_MASK_QR=21522,zt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class X{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const o of s)r+=o.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class b{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class de{constructor(r,s,...o){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=o;let l=0;const c=o[0].getECCodewordsPerBlock(),h=o[0].getECBlocks();for(const f of h)l+=f.getCount()*(f.getDataCodewords()+c);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new D;try{return this.getVersionForNumber((r-17)/4)}catch{throw new D}}static getVersionForNumber(r){if(r<1||r>40)throw new S;return de.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,o=0;for(let l=0;l<de.VERSION_DECODE_INFO.length;l++){const c=de.VERSION_DECODE_INFO[l];if(c===r)return de.getVersionForNumber(l+7);const h=zt.numBitsDiffering(r,c);h<s&&(o=l+7,s=h)}return s<=3?de.getVersionForNumber(o):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new $e(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const o=this.alignmentPatternCenters.length;for(let l=0;l<o;l++){const c=this.alignmentPatternCenters[l]-2;for(let h=0;h<o;h++)l===0&&(h===0||h===o-1)||l===o-1&&h===0||s.setRegion(this.alignmentPatternCenters[h]-2,c,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}de.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),de.VERSIONS=[new de(1,new Int32Array(0),new X(7,new b(1,19)),new X(10,new b(1,16)),new X(13,new b(1,13)),new X(17,new b(1,9))),new de(2,Int32Array.from([6,18]),new X(10,new b(1,34)),new X(16,new b(1,28)),new X(22,new b(1,22)),new X(28,new b(1,16))),new de(3,Int32Array.from([6,22]),new X(15,new b(1,55)),new X(26,new b(1,44)),new X(18,new b(2,17)),new X(22,new b(2,13))),new de(4,Int32Array.from([6,26]),new X(20,new b(1,80)),new X(18,new b(2,32)),new X(26,new b(2,24)),new X(16,new b(4,9))),new de(5,Int32Array.from([6,30]),new X(26,new b(1,108)),new X(24,new b(2,43)),new X(18,new b(2,15),new b(2,16)),new X(22,new b(2,11),new b(2,12))),new de(6,Int32Array.from([6,34]),new X(18,new b(2,68)),new X(16,new b(4,27)),new X(24,new b(4,19)),new X(28,new b(4,15))),new de(7,Int32Array.from([6,22,38]),new X(20,new b(2,78)),new X(18,new b(4,31)),new X(18,new b(2,14),new b(4,15)),new X(26,new b(4,13),new b(1,14))),new de(8,Int32Array.from([6,24,42]),new X(24,new b(2,97)),new X(22,new b(2,38),new b(2,39)),new X(22,new b(4,18),new b(2,19)),new X(26,new b(4,14),new b(2,15))),new de(9,Int32Array.from([6,26,46]),new X(30,new b(2,116)),new X(22,new b(3,36),new b(2,37)),new X(20,new b(4,16),new b(4,17)),new X(24,new b(4,12),new b(4,13))),new de(10,Int32Array.from([6,28,50]),new X(18,new b(2,68),new b(2,69)),new X(26,new b(4,43),new b(1,44)),new X(24,new b(6,19),new b(2,20)),new X(28,new b(6,15),new b(2,16))),new de(11,Int32Array.from([6,30,54]),new X(20,new b(4,81)),new X(30,new b(1,50),new b(4,51)),new X(28,new b(4,22),new b(4,23)),new X(24,new b(3,12),new b(8,13))),new de(12,Int32Array.from([6,32,58]),new X(24,new b(2,92),new b(2,93)),new X(22,new b(6,36),new b(2,37)),new X(26,new b(4,20),new b(6,21)),new X(28,new b(7,14),new b(4,15))),new de(13,Int32Array.from([6,34,62]),new X(26,new b(4,107)),new X(22,new b(8,37),new b(1,38)),new X(24,new b(8,20),new b(4,21)),new X(22,new b(12,11),new b(4,12))),new de(14,Int32Array.from([6,26,46,66]),new X(30,new b(3,115),new b(1,116)),new X(24,new b(4,40),new b(5,41)),new X(20,new b(11,16),new b(5,17)),new X(24,new b(11,12),new b(5,13))),new de(15,Int32Array.from([6,26,48,70]),new X(22,new b(5,87),new b(1,88)),new X(24,new b(5,41),new b(5,42)),new X(30,new b(5,24),new b(7,25)),new X(24,new b(11,12),new b(7,13))),new de(16,Int32Array.from([6,26,50,74]),new X(24,new b(5,98),new b(1,99)),new X(28,new b(7,45),new b(3,46)),new X(24,new b(15,19),new b(2,20)),new X(30,new b(3,15),new b(13,16))),new de(17,Int32Array.from([6,30,54,78]),new X(28,new b(1,107),new b(5,108)),new X(28,new b(10,46),new b(1,47)),new X(28,new b(1,22),new b(15,23)),new X(28,new b(2,14),new b(17,15))),new de(18,Int32Array.from([6,30,56,82]),new X(30,new b(5,120),new b(1,121)),new X(26,new b(9,43),new b(4,44)),new X(28,new b(17,22),new b(1,23)),new X(28,new b(2,14),new b(19,15))),new de(19,Int32Array.from([6,30,58,86]),new X(28,new b(3,113),new b(4,114)),new X(26,new b(3,44),new b(11,45)),new X(26,new b(17,21),new b(4,22)),new X(26,new b(9,13),new b(16,14))),new de(20,Int32Array.from([6,34,62,90]),new X(28,new b(3,107),new b(5,108)),new X(26,new b(3,41),new b(13,42)),new X(30,new b(15,24),new b(5,25)),new X(28,new b(15,15),new b(10,16))),new de(21,Int32Array.from([6,28,50,72,94]),new X(28,new b(4,116),new b(4,117)),new X(26,new b(17,42)),new X(28,new b(17,22),new b(6,23)),new X(30,new b(19,16),new b(6,17))),new de(22,Int32Array.from([6,26,50,74,98]),new X(28,new b(2,111),new b(7,112)),new X(28,new b(17,46)),new X(30,new b(7,24),new b(16,25)),new X(24,new b(34,13))),new de(23,Int32Array.from([6,30,54,78,102]),new X(30,new b(4,121),new b(5,122)),new X(28,new b(4,47),new b(14,48)),new X(30,new b(11,24),new b(14,25)),new X(30,new b(16,15),new b(14,16))),new de(24,Int32Array.from([6,28,54,80,106]),new X(30,new b(6,117),new b(4,118)),new X(28,new b(6,45),new b(14,46)),new X(30,new b(11,24),new b(16,25)),new X(30,new b(30,16),new b(2,17))),new de(25,Int32Array.from([6,32,58,84,110]),new X(26,new b(8,106),new b(4,107)),new X(28,new b(8,47),new b(13,48)),new X(30,new b(7,24),new b(22,25)),new X(30,new b(22,15),new b(13,16))),new de(26,Int32Array.from([6,30,58,86,114]),new X(28,new b(10,114),new b(2,115)),new X(28,new b(19,46),new b(4,47)),new X(28,new b(28,22),new b(6,23)),new X(30,new b(33,16),new b(4,17))),new de(27,Int32Array.from([6,34,62,90,118]),new X(30,new b(8,122),new b(4,123)),new X(28,new b(22,45),new b(3,46)),new X(30,new b(8,23),new b(26,24)),new X(30,new b(12,15),new b(28,16))),new de(28,Int32Array.from([6,26,50,74,98,122]),new X(30,new b(3,117),new b(10,118)),new X(28,new b(3,45),new b(23,46)),new X(30,new b(4,24),new b(31,25)),new X(30,new b(11,15),new b(31,16))),new de(29,Int32Array.from([6,30,54,78,102,126]),new X(30,new b(7,116),new b(7,117)),new X(28,new b(21,45),new b(7,46)),new X(30,new b(1,23),new b(37,24)),new X(30,new b(19,15),new b(26,16))),new de(30,Int32Array.from([6,26,52,78,104,130]),new X(30,new b(5,115),new b(10,116)),new X(28,new b(19,47),new b(10,48)),new X(30,new b(15,24),new b(25,25)),new X(30,new b(23,15),new b(25,16))),new de(31,Int32Array.from([6,30,56,82,108,134]),new X(30,new b(13,115),new b(3,116)),new X(28,new b(2,46),new b(29,47)),new X(30,new b(42,24),new b(1,25)),new X(30,new b(23,15),new b(28,16))),new de(32,Int32Array.from([6,34,60,86,112,138]),new X(30,new b(17,115)),new X(28,new b(10,46),new b(23,47)),new X(30,new b(10,24),new b(35,25)),new X(30,new b(19,15),new b(35,16))),new de(33,Int32Array.from([6,30,58,86,114,142]),new X(30,new b(17,115),new b(1,116)),new X(28,new b(14,46),new b(21,47)),new X(30,new b(29,24),new b(19,25)),new X(30,new b(11,15),new b(46,16))),new de(34,Int32Array.from([6,34,62,90,118,146]),new X(30,new b(13,115),new b(6,116)),new X(28,new b(14,46),new b(23,47)),new X(30,new b(44,24),new b(7,25)),new X(30,new b(59,16),new b(1,17))),new de(35,Int32Array.from([6,30,54,78,102,126,150]),new X(30,new b(12,121),new b(7,122)),new X(28,new b(12,47),new b(26,48)),new X(30,new b(39,24),new b(14,25)),new X(30,new b(22,15),new b(41,16))),new de(36,Int32Array.from([6,24,50,76,102,128,154]),new X(30,new b(6,121),new b(14,122)),new X(28,new b(6,47),new b(34,48)),new X(30,new b(46,24),new b(10,25)),new X(30,new b(2,15),new b(64,16))),new de(37,Int32Array.from([6,28,54,80,106,132,158]),new X(30,new b(17,122),new b(4,123)),new X(28,new b(29,46),new b(14,47)),new X(30,new b(49,24),new b(10,25)),new X(30,new b(24,15),new b(46,16))),new de(38,Int32Array.from([6,32,58,84,110,136,162]),new X(30,new b(4,122),new b(18,123)),new X(28,new b(13,46),new b(32,47)),new X(30,new b(48,24),new b(14,25)),new X(30,new b(42,15),new b(32,16))),new de(39,Int32Array.from([6,26,54,82,110,138,166]),new X(30,new b(20,117),new b(4,118)),new X(28,new b(40,47),new b(7,48)),new X(30,new b(43,24),new b(22,25)),new X(30,new b(10,15),new b(67,16))),new de(40,Int32Array.from([6,30,58,86,114,142,170]),new X(30,new b(19,118),new b(6,119)),new X(28,new b(18,47),new b(31,48)),new X(30,new b(34,24),new b(34,25)),new X(30,new b(20,15),new b(61,16)))];var Ot;(function(C){C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111"})(Ot||(Ot={}));class hn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let o=0;o<s;o++)for(let l=0;l<s;l++)this.isMasked(o,l)&&r.flip(l,o)}}hn.values=new Map([[Ot.DATA_MASK_000,new hn(Ot.DATA_MASK_000,(C,r)=>(C+r&1)===0)],[Ot.DATA_MASK_001,new hn(Ot.DATA_MASK_001,(C,r)=>(C&1)===0)],[Ot.DATA_MASK_010,new hn(Ot.DATA_MASK_010,(C,r)=>r%3===0)],[Ot.DATA_MASK_011,new hn(Ot.DATA_MASK_011,(C,r)=>(C+r)%3===0)],[Ot.DATA_MASK_100,new hn(Ot.DATA_MASK_100,(C,r)=>(Math.floor(C/2)+Math.floor(r/3)&1)===0)],[Ot.DATA_MASK_101,new hn(Ot.DATA_MASK_101,(C,r)=>C*r%6===0)],[Ot.DATA_MASK_110,new hn(Ot.DATA_MASK_110,(C,r)=>C*r%6<3)],[Ot.DATA_MASK_111,new hn(Ot.DATA_MASK_111,(C,r)=>(C+r+C*r%3&1)===0)]]);class Es{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new D;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let c=0;c<6;c++)r=this.copyBit(c,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let c=5;c>=0;c--)r=this.copyBit(8,c,r);const s=this.bitMatrix.getHeight();let o=0;const l=s-7;for(let c=s-1;c>=l;c--)o=this.copyBit(8,c,o);for(let c=s-8;c<s;c++)o=this.copyBit(c,8,o);if(this.parsedFormatInfo=zt.decodeFormatInformation(r,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new D}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return de.getVersionForNumber(s);let o=0;const l=r-11;for(let h=5;h>=0;h--)for(let f=r-9;f>=l;f--)o=this.copyBit(f,h,o);let c=de.decodeVersionInformation(o);if(c!==null&&c.getDimensionForVersion()===r)return this.parsedVersion=c,c;o=0;for(let h=5;h>=0;h--)for(let f=r-9;f>=l;f--)o=this.copyBit(h,f,o);if(c=de.decodeVersionInformation(o),c!==null&&c.getDimensionForVersion()===r)return this.parsedVersion=c,c;throw new D}copyBit(r,s,o){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?o<<1|1:o<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),o=hn.values.get(r.getDataMask()),l=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,l);const c=s.buildFunctionPattern();let h=!0;const f=new Uint8Array(s.getTotalCodewords());let p=0,y=0,_=0;for(let v=l-1;v>0;v-=2){v===6&&v--;for(let T=0;T<l;T++){const M=h?l-1-T:T;for(let z=0;z<2;z++)c.get(v-z,M)||(_++,y<<=1,this.bitMatrix.get(v-z,M)&&(y|=1),_===8&&(f[p++]=y,_=0,y=0))}h=!h}if(p!==s.getTotalCodewords())throw new D;return f}remask(){if(this.parsedFormatInfo===null)return;const r=hn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,o=r.getWidth();s<o;s++)for(let l=s+1,c=r.getHeight();l<c;l++)r.get(s,l)!==r.get(l,s)&&(r.flip(l,s),r.flip(s,l))}}class la{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,o){if(r.length!==s.getTotalCodewords())throw new S;const l=s.getECBlocksForLevel(o);let c=0;const h=l.getECBlocks();for(const z of h)c+=z.getCount();const f=new Array(c);let p=0;for(const z of h)for(let W=0;W<z.getCount();W++){const K=z.getDataCodewords(),J=l.getECCodewordsPerBlock()+K;f[p++]=new la(K,new Uint8Array(J))}const y=f[0].codewords.length;let _=f.length-1;for(;_>=0&&f[_].codewords.length!==y;)_--;_++;const v=y-l.getECCodewordsPerBlock();let T=0;for(let z=0;z<v;z++)for(let W=0;W<p;W++)f[W].codewords[z]=r[T++];for(let z=_;z<p;z++)f[z].codewords[v]=r[T++];const M=f[0].codewords.length;for(let z=v;z<M;z++)for(let W=0;W<p;W++){const K=W<_?z:z+1;f[W].codewords[K]=r[T++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Pn;(function(C){C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI"})(Pn||(Pn={}));class Ae{constructor(r,s,o,l){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=o,this.bits=l,Ae.FOR_BITS.set(l,this),Ae.FOR_VALUE.set(r,this)}static forBits(r){const s=Ae.FOR_BITS.get(r);if(s===void 0)throw new S;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let o;return s<=9?o=0:s<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Ae))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}Ae.FOR_BITS=new Map,Ae.FOR_VALUE=new Map,Ae.TERMINATOR=new Ae(Pn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ae.NUMERIC=new Ae(Pn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ae.ALPHANUMERIC=new Ae(Pn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ae.STRUCTURED_APPEND=new Ae(Pn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ae.BYTE=new Ae(Pn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ae.ECI=new Ae(Pn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ae.KANJI=new Ae(Pn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ae.FNC1_FIRST_POSITION=new Ae(Pn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ae.FNC1_SECOND_POSITION=new Ae(Pn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ae.HANZI=new Ae(Pn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class mt{static decode(r,s,o,l){const c=new ao(r);let h=new L;const f=new Array;let p=-1,y=-1;try{let _=null,v=!1,T;do{if(c.available()<4)T=Ae.TERMINATOR;else{const M=c.readBits(4);T=Ae.forBits(M)}switch(T){case Ae.TERMINATOR:break;case Ae.FNC1_FIRST_POSITION:case Ae.FNC1_SECOND_POSITION:v=!0;break;case Ae.STRUCTURED_APPEND:if(c.available()<16)throw new D;p=c.readBits(8),y=c.readBits(8);break;case Ae.ECI:const M=mt.parseECIValue(c);if(_=N.getCharacterSetECIByValue(M),_===null)throw new D;break;case Ae.HANZI:const z=c.readBits(4),W=c.readBits(T.getCharacterCountBits(s));z===mt.GB2312_SUBSET&&mt.decodeHanziSegment(c,h,W);break;default:const K=c.readBits(T.getCharacterCountBits(s));switch(T){case Ae.NUMERIC:mt.decodeNumericSegment(c,h,K);break;case Ae.ALPHANUMERIC:mt.decodeAlphanumericSegment(c,h,K,v);break;case Ae.BYTE:mt.decodeByteSegment(c,h,K,_,f,l);break;case Ae.KANJI:mt.decodeKanjiSegment(c,h,K);break;default:throw new D}break}}while(T!==Ae.TERMINATOR)}catch{throw new D}return new gs(r,h.toString(),f.length===0?null:f,o===null?null:o.toString(),p,y)}static decodeHanziSegment(r,s,o){if(o*13>r.available())throw new D;const l=new Uint8Array(2*o);let c=0;for(;o>0;){const h=r.readBits(13);let f=h/96<<8&4294967295|h%96;f<959?f+=41377:f+=42657,l[c]=f>>8&255,l[c+1]=f&255,c+=2,o--}try{s.append(G.decode(l,H.GB2312))}catch(h){throw new D(h)}}static decodeKanjiSegment(r,s,o){if(o*13>r.available())throw new D;const l=new Uint8Array(2*o);let c=0;for(;o>0;){const h=r.readBits(13);let f=h/192<<8&4294967295|h%192;f<7936?f+=33088:f+=49472,l[c]=f>>8,l[c+1]=f,c+=2,o--}try{s.append(G.decode(l,H.SHIFT_JIS))}catch(h){throw new D(h)}}static decodeByteSegment(r,s,o,l,c,h){if(8*o>r.available())throw new D;const f=new Uint8Array(o);for(let y=0;y<o;y++)f[y]=r.readBits(8);let p;l===null?p=H.guessEncoding(f,h):p=l.getName();try{s.append(G.decode(f,p))}catch(y){throw new D(y)}c.push(f)}static toAlphaNumericChar(r){if(r>=mt.ALPHANUMERIC_CHARS.length)throw new D;return mt.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,o,l){const c=s.length();for(;o>1;){if(r.available()<11)throw new D;const h=r.readBits(11);s.append(mt.toAlphaNumericChar(Math.floor(h/45))),s.append(mt.toAlphaNumericChar(h%45)),o-=2}if(o===1){if(r.available()<6)throw new D;s.append(mt.toAlphaNumericChar(r.readBits(6)))}if(l)for(let h=c;h<s.length();h++)s.charAt(h)==="%"&&(h<s.length()-1&&s.charAt(h+1)==="%"?s.deleteCharAt(h+1):s.setCharAt(h,""))}static decodeNumericSegment(r,s,o){for(;o>=3;){if(r.available()<10)throw new D;const l=r.readBits(10);if(l>=1e3)throw new D;s.append(mt.toAlphaNumericChar(Math.floor(l/100))),s.append(mt.toAlphaNumericChar(Math.floor(l/10)%10)),s.append(mt.toAlphaNumericChar(l%10)),o-=3}if(o===2){if(r.available()<7)throw new D;const l=r.readBits(7);if(l>=100)throw new D;s.append(mt.toAlphaNumericChar(Math.floor(l/10))),s.append(mt.toAlphaNumericChar(l%10))}else if(o===1){if(r.available()<4)throw new D;const l=r.readBits(4);if(l>=10)throw new D;s.append(mt.toAlphaNumericChar(l))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const o=r.readBits(8);return(s&63)<<8&4294967295|o}if((s&224)===192){const o=r.readBits(16);return(s&31)<<16&4294967295|o}throw new D}}mt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",mt.GB2312_SUBSET=1;class Nl{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class Wc{constructor(){this.rsDecoder=new Oi(We.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix($e.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const o=new Es(r);let l=null;try{return this.decodeBitMatrixParser(o,s)}catch(c){l=c}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const c=this.decodeBitMatrixParser(o,s);return c.setOther(new Nl(!0)),c}catch(c){throw l!==null?l:c}}decodeBitMatrixParser(r,s){const o=r.readVersion(),l=r.readFormatInformation().getErrorCorrectionLevel(),c=r.readCodewords(),h=la.getDataBlocks(c,o,l);let f=0;for(const _ of h)f+=_.getNumDataCodewords();const p=new Uint8Array(f);let y=0;for(const _ of h){const v=_.getCodewords(),T=_.getNumDataCodewords();this.correctErrors(v,T);for(let M=0;M<T;M++)p[y++]=v[M]}return mt.decode(p,o,l,s)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new U}for(let l=0;l<s;l++)r[l]=o[l]}}class hi extends we{constructor(r,s,o){super(r,s),this.estimatedModuleSize=o}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const l=Math.abs(r-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const l=(this.getX()+s)/2,c=(this.getY()+r)/2,h=(this.estimatedModuleSize+o)/2;return new hi(l,c,h)}}class or{constructor(r,s,o,l,c,h,f){this.image=r,this.startX=s,this.startY=o,this.width=l,this.height=c,this.moduleSize=h,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,o=this.width,l=r+o,c=this.startY+s/2,h=new Int32Array(3),f=this.image;for(let p=0;p<s;p++){const y=c+(p&1?-Math.floor((p+1)/2):Math.floor((p+1)/2));h[0]=0,h[1]=0,h[2]=0;let _=r;for(;_<l&&!f.get(_,y);)_++;let v=0;for(;_<l;){if(f.get(_,y))if(v===1)h[1]++;else if(v===2){if(this.foundPatternCross(h)){const T=this.handlePossibleCenter(h,y,_);if(T!==null)return T}h[0]=h[2],h[1]=1,h[2]=0,v=1}else h[++v]++;else v===1&&v++,h[v]++;_++}if(this.foundPatternCross(h)){const T=this.handlePossibleCenter(h,y,l);if(T!==null)return T}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,o=s/2;for(let l=0;l<3;l++)if(Math.abs(s-r[l])>=o)return!1;return!0}crossCheckVertical(r,s,o,l){const c=this.image,h=c.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let p=r;for(;p>=0&&c.get(s,p)&&f[1]<=o;)f[1]++,p--;if(p<0||f[1]>o)return NaN;for(;p>=0&&!c.get(s,p)&&f[0]<=o;)f[0]++,p--;if(f[0]>o)return NaN;for(p=r+1;p<h&&c.get(s,p)&&f[1]<=o;)f[1]++,p++;if(p===h||f[1]>o)return NaN;for(;p<h&&!c.get(s,p)&&f[2]<=o;)f[2]++,p++;if(f[2]>o)return NaN;const y=f[0]+f[1]+f[2];return 5*Math.abs(y-l)>=2*l?NaN:this.foundPatternCross(f)?or.centerFromEnd(f,p):NaN}handlePossibleCenter(r,s,o){const l=r[0]+r[1]+r[2],c=or.centerFromEnd(r,o),h=this.crossCheckVertical(s,c,2*r[1],l);if(!isNaN(h)){const f=(r[0]+r[1]+r[2])/3;for(const y of this.possibleCenters)if(y.aboutEquals(f,h,c))return y.combineEstimate(h,c,f);const p=new hi(c,h,f);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null}}class lo extends we{constructor(r,s,o,l){super(r,s),this.estimatedModuleSize=o,this.count=l,l===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const l=Math.abs(r-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const l=this.count+1,c=(this.count*this.getX()+s)/l,h=(this.count*this.getY()+r)/l,f=(this.count*this.estimatedModuleSize+o)/l;return new lo(c,h,f,l)}}class Ol{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ht{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(re.TRY_HARDER)!==void 0,o=r!=null&&r.get(re.PURE_BARCODE)!==void 0,l=this.image,c=l.getHeight(),h=l.getWidth();let f=Math.floor(3*c/(4*Ht.MAX_MODULES));(f<Ht.MIN_SKIP||s)&&(f=Ht.MIN_SKIP);let p=!1;const y=new Int32Array(5);for(let v=f-1;v<c&&!p;v+=f){y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0;let T=0;for(let M=0;M<h;M++)if(l.get(M,v))(T&1)===1&&T++,y[T]++;else if(T&1)y[T]++;else if(T===4)if(Ht.foundPatternCross(y)){if(this.handlePossibleCenter(y,v,M,o)===!0)if(f=2,this.hasSkipped===!0)p=this.haveMultiplyConfirmedCenters();else{const W=this.findRowSkip();W>y[2]&&(v+=W-y[2]-f,M=h-1)}else{y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,T=3;continue}T=0,y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0}else y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,T=3;else y[++T]++;Ht.foundPatternCross(y)&&this.handlePossibleCenter(y,v,h,o)===!0&&(f=y[0],this.hasSkipped&&(p=this.haveMultiplyConfirmedCenters()))}const _=this.selectBestPatterns();return we.orderBestPatterns(_),new Ol(_)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let c=0;c<5;c++){const h=r[c];if(h===0)return!1;s+=h}if(s<7)return!1;const o=s/7,l=o/2;return Math.abs(o-r[0])<l&&Math.abs(o-r[1])<l&&Math.abs(3*o-r[2])<3*l&&Math.abs(o-r[3])<l&&Math.abs(o-r[4])<l}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,o,l){const c=this.getCrossCheckStateCount();let h=0;const f=this.image;for(;r>=h&&s>=h&&f.get(s-h,r-h);)c[2]++,h++;if(r<h||s<h)return!1;for(;r>=h&&s>=h&&!f.get(s-h,r-h)&&c[1]<=o;)c[1]++,h++;if(r<h||s<h||c[1]>o)return!1;for(;r>=h&&s>=h&&f.get(s-h,r-h)&&c[0]<=o;)c[0]++,h++;if(c[0]>o)return!1;const p=f.getHeight(),y=f.getWidth();for(h=1;r+h<p&&s+h<y&&f.get(s+h,r+h);)c[2]++,h++;if(r+h>=p||s+h>=y)return!1;for(;r+h<p&&s+h<y&&!f.get(s+h,r+h)&&c[3]<o;)c[3]++,h++;if(r+h>=p||s+h>=y||c[3]>=o)return!1;for(;r+h<p&&s+h<y&&f.get(s+h,r+h)&&c[4]<o;)c[4]++,h++;if(c[4]>=o)return!1;const _=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(_-l)<2*l&&Ht.foundPatternCross(c)}crossCheckVertical(r,s,o,l){const c=this.image,h=c.getHeight(),f=this.getCrossCheckStateCount();let p=r;for(;p>=0&&c.get(s,p);)f[2]++,p--;if(p<0)return NaN;for(;p>=0&&!c.get(s,p)&&f[1]<=o;)f[1]++,p--;if(p<0||f[1]>o)return NaN;for(;p>=0&&c.get(s,p)&&f[0]<=o;)f[0]++,p--;if(f[0]>o)return NaN;for(p=r+1;p<h&&c.get(s,p);)f[2]++,p++;if(p===h)return NaN;for(;p<h&&!c.get(s,p)&&f[3]<o;)f[3]++,p++;if(p===h||f[3]>=o)return NaN;for(;p<h&&c.get(s,p)&&f[4]<o;)f[4]++,p++;if(f[4]>=o)return NaN;const y=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(y-l)>=2*l?NaN:Ht.foundPatternCross(f)?Ht.centerFromEnd(f,p):NaN}crossCheckHorizontal(r,s,o,l){const c=this.image,h=c.getWidth(),f=this.getCrossCheckStateCount();let p=r;for(;p>=0&&c.get(p,s);)f[2]++,p--;if(p<0)return NaN;for(;p>=0&&!c.get(p,s)&&f[1]<=o;)f[1]++,p--;if(p<0||f[1]>o)return NaN;for(;p>=0&&c.get(p,s)&&f[0]<=o;)f[0]++,p--;if(f[0]>o)return NaN;for(p=r+1;p<h&&c.get(p,s);)f[2]++,p++;if(p===h)return NaN;for(;p<h&&!c.get(p,s)&&f[3]<o;)f[3]++,p++;if(p===h||f[3]>=o)return NaN;for(;p<h&&c.get(p,s)&&f[4]<o;)f[4]++,p++;if(f[4]>=o)return NaN;const y=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(y-l)>=l?NaN:Ht.foundPatternCross(f)?Ht.centerFromEnd(f,p):NaN}handlePossibleCenter(r,s,o,l){const c=r[0]+r[1]+r[2]+r[3]+r[4];let h=Ht.centerFromEnd(r,o),f=this.crossCheckVertical(s,Math.floor(h),r[2],c);if(!isNaN(f)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(f),r[2],c),!isNaN(h)&&(!l||this.crossCheckDiagonal(Math.floor(f),Math.floor(h),r[2],c)))){const p=c/7;let y=!1;const _=this.possibleCenters;for(let v=0,T=_.length;v<T;v++){const M=_[v];if(M.aboutEquals(p,f,h)){_[v]=M.combineEstimate(f,h,p),y=!0;break}}if(!y){const v=new lo(h,f,p);_.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const o of this.possibleCenters)if(o.getCount()>=Ht.CENTER_QUORUM)if(s==null)s=o;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-o.getX())-Math.abs(s.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const o=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=Ht.CENTER_QUORUM&&(r++,s+=h.getEstimatedModuleSize());if(r<3)return!1;const l=s/o;let c=0;for(const h of this.possibleCenters)c+=Math.abs(h.getEstimatedModuleSize()-l);return c<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new ee;const s=this.possibleCenters;let o;if(r>3){let l=0,c=0;for(const p of this.possibleCenters){const y=p.getEstimatedModuleSize();l+=y,c+=y*y}o=l/r;let h=Math.sqrt(c/r-o*o);s.sort((p,y)=>{const _=Math.abs(y.getEstimatedModuleSize()-o),v=Math.abs(p.getEstimatedModuleSize()-o);return _<v?-1:_>v?1:0});const f=Math.max(.2*o,h);for(let p=0;p<s.length&&s.length>3;p++){const y=s[p];Math.abs(y.getEstimatedModuleSize()-o)>f&&(s.splice(p,1),p--)}}if(s.length>3){let l=0;for(const c of s)l+=c.getEstimatedModuleSize();o=l/s.length,s.sort((c,h)=>{if(h.getCount()===c.getCount()){const f=Math.abs(h.getEstimatedModuleSize()-o),p=Math.abs(c.getEstimatedModuleSize()-o);return f<p?1:f>p?-1:0}else return h.getCount()-c.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Ht.CENTER_QUORUM=2,Ht.MIN_SKIP=3,Ht.MAX_MODULES=57;class xr{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(re.NEED_RESULT_POINT_CALLBACK);const o=new Ht(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(o)}processFinderPatternInfo(r){const s=r.getTopLeft(),o=r.getTopRight(),l=r.getBottomLeft(),c=this.calculateModuleSize(s,o,l);if(c<1)throw new ee("No pattern found in proccess finder.");const h=xr.computeDimension(s,o,l,c),f=de.getProvisionalVersionForDimension(h),p=f.getDimensionForVersion()-7;let y=null;if(f.getAlignmentPatternCenters().length>0){const M=o.getX()-s.getX()+l.getX(),z=o.getY()-s.getY()+l.getY(),W=1-3/p,K=Math.floor(s.getX()+W*(M-s.getX())),J=Math.floor(s.getY()+W*(z-s.getY()));for(let le=4;le<=16;le<<=1)try{y=this.findAlignmentInRegion(c,K,J,le);break}catch(ue){if(!(ue instanceof ee))throw ue}}const _=xr.createTransform(s,o,l,y,h),v=xr.sampleGrid(this.image,_,h);let T;return y===null?T=[l,s,o]:T=[l,s,o,y],new eo(v,T)}static createTransform(r,s,o,l,c){const h=c-3.5;let f,p,y,_;return l!==null?(f=l.getX(),p=l.getY(),y=h-3,_=y):(f=s.getX()-r.getX()+o.getX(),p=s.getY()-r.getY()+o.getY(),y=h,_=h),lt.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,y,_,3.5,h,r.getX(),r.getY(),s.getX(),s.getY(),f,p,o.getX(),o.getY())}static sampleGrid(r,s,o){return tr.getInstance().sampleGridWithTransform(r,o,o,s)}static computeDimension(r,s,o,l){const c=Ve.round(we.distance(r,s)/l),h=Ve.round(we.distance(r,o)/l);let f=Math.floor((c+h)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new ee("Dimensions could be not found.")}return f}calculateModuleSize(r,s,o){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,o))/2}calculateModuleSizeOneWay(r,s){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(o)?l/7:isNaN(l)?o/7:(o+l)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,o,l){let c=this.sizeOfBlackWhiteBlackRun(r,s,o,l),h=1,f=r-(o-r);f<0?(h=r/(r-f),f=0):f>=this.image.getWidth()&&(h=(this.image.getWidth()-1-r)/(f-r),f=this.image.getWidth()-1);let p=Math.floor(s-(l-s)*h);return h=1,p<0?(h=s/(s-p),p=0):p>=this.image.getHeight()&&(h=(this.image.getHeight()-1-s)/(p-s),p=this.image.getHeight()-1),f=Math.floor(r+(f-r)*h),c+=this.sizeOfBlackWhiteBlackRun(r,s,f,p),c-1}sizeOfBlackWhiteBlackRun(r,s,o,l){const c=Math.abs(l-s)>Math.abs(o-r);if(c){let M=r;r=s,s=M,M=o,o=l,l=M}const h=Math.abs(o-r),f=Math.abs(l-s);let p=-h/2;const y=r<o?1:-1,_=s<l?1:-1;let v=0;const T=o+y;for(let M=r,z=s;M!==T;M+=y){const W=c?z:M,K=c?M:z;if(v===1===this.image.get(W,K)){if(v===2)return Ve.distance(M,z,r,s);v++}if(p+=f,p>0){if(z===l)break;z+=_,p-=h}}return v===2?Ve.distance(o+y,l,r,s):NaN}findAlignmentInRegion(r,s,o,l){const c=Math.floor(l*r),h=Math.max(0,s-c),f=Math.min(this.image.getWidth()-1,s+c);if(f-h<r*3)throw new ee("Alignment top exceeds estimated module size.");const p=Math.max(0,o-c),y=Math.min(this.image.getHeight()-1,o+c);if(y-p<r*3)throw new ee("Alignment bottom exceeds estimated module size.");return new or(this.image,h,p,f-h,y-p,r,this.resultPointCallback).find()}}class Kr{constructor(){this.decoder=new Wc}getDecoder(){return this.decoder}decode(r,s){let o,l;if(s!=null&&s.get(re.PURE_BARCODE)!==void 0){const p=Kr.extractPureBits(r.getBlackMatrix());o=this.decoder.decodeBitMatrix(p,s),l=Kr.NO_POINTS}else{const p=new xr(r.getBlackMatrix()).detect(s);o=this.decoder.decodeBitMatrix(p.getBits(),s),l=p.getPoints()}o.getOther()instanceof Nl&&o.getOther().applyMirroredCorrection(l);const c=new pt(o.getText(),o.getRawBytes(),void 0,l,Ee.QR_CODE,void 0),h=o.getByteSegments();h!==null&&c.putMetadata(Xt.BYTE_SEGMENTS,h);const f=o.getECLevel();return f!==null&&c.putMetadata(Xt.ERROR_CORRECTION_LEVEL,f),o.hasStructuredAppend()&&(c.putMetadata(Xt.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),c.putMetadata(Xt.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),c}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s===null||o===null)throw new ee;const l=this.moduleSize(s,r);let c=s[1],h=o[1],f=s[0],p=o[0];if(f>=p||c>=h)throw new ee;if(h-c!==p-f&&(p=f+(h-c),p>=r.getWidth()))throw new ee;const y=Math.round((p-f+1)/l),_=Math.round((h-c+1)/l);if(y<=0||_<=0)throw new ee;if(_!==y)throw new ee;const v=Math.floor(l/2);c+=v,f+=v;const T=f+Math.floor((y-1)*l)-p;if(T>0){if(T>v)throw new ee;f-=T}const M=c+Math.floor((_-1)*l)-h;if(M>0){if(M>v)throw new ee;c-=M}const z=new $e(y,_);for(let W=0;W<_;W++){const K=c+Math.floor(W*l);for(let J=0;J<y;J++)r.get(f+Math.floor(J*l),K)&&z.set(J,W)}return z}static moduleSize(r,s){const o=s.getHeight(),l=s.getWidth();let c=r[0],h=r[1],f=!0,p=0;for(;c<l&&h<o;){if(f!==s.get(c,h)){if(++p===5)break;f=!f}c++,h++}if(c===l||h===o)throw new ee;return(c-r[0])/7}}Kr.NO_POINTS=new Array;class Te{PDF417Common(){}static getBitCountSum(r){return Ve.sum(r)}static toIntArray(r){if(r==null||!r.length)return Te.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let o=0;for(const l of r)s[o++]=l;return s}static getCodeword(r){const s=k.binarySearch(Te.SYMBOL_TABLE,r&262143);return s<0?-1:(Te.CODEWORD_TABLE[s]-1)%Te.NUMBER_OF_CODEWORDS}}Te.NUMBER_OF_CODEWORDS=929,Te.MAX_CODEWORDS_IN_BARCODE=Te.NUMBER_OF_CODEWORDS-1,Te.MIN_ROWS_IN_BARCODE=3,Te.MAX_ROWS_IN_BARCODE=90,Te.MODULES_IN_CODEWORD=17,Te.MODULES_IN_STOP_PATTERN=18,Te.BARS_IN_MODULE=8,Te.EMPTY_INT_ARRAY=new Int32Array([]),Te.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Te.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Gc{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Ne{static detectMultiple(r,s,o){let l=r.getBlackMatrix(),c=Ne.detect(o,l);return c.length||(l=l.clone(),l.rotate180(),c=Ne.detect(o,l)),new Gc(l,c)}static detect(r,s){const o=new Array;let l=0,c=0,h=!1;for(;l<s.getHeight();){const f=Ne.findVertices(s,l,c);if(f[0]==null&&f[3]==null){if(!h)break;h=!1,c=0;for(const p of o)p[1]!=null&&(l=Math.trunc(Math.max(l,p[1].getY()))),p[3]!=null&&(l=Math.max(l,Math.trunc(p[3].getY())));l+=Ne.ROW_STEP;continue}if(h=!0,o.push(f),!r)break;f[2]!=null?(c=Math.trunc(f[2].getX()),l=Math.trunc(f[2].getY())):(c=Math.trunc(f[4].getX()),l=Math.trunc(f[4].getY()))}return o}static findVertices(r,s,o){const l=r.getHeight(),c=r.getWidth(),h=new Array(8);return Ne.copyToResult(h,Ne.findRowsWithPattern(r,l,c,s,o,Ne.START_PATTERN),Ne.INDEXES_START_PATTERN),h[4]!=null&&(o=Math.trunc(h[4].getX()),s=Math.trunc(h[4].getY())),Ne.copyToResult(h,Ne.findRowsWithPattern(r,l,c,s,o,Ne.STOP_PATTERN),Ne.INDEXES_STOP_PATTERN),h}static copyToResult(r,s,o){for(let l=0;l<o.length;l++)r[o[l]]=s[l]}static findRowsWithPattern(r,s,o,l,c,h){const f=new Array(4);let p=!1;const y=new Int32Array(h.length);for(;l<s;l+=Ne.ROW_STEP){let v=Ne.findGuardPattern(r,c,l,o,!1,h,y);if(v!=null){for(;l>0;){const T=Ne.findGuardPattern(r,c,--l,o,!1,h,y);if(T!=null)v=T;else{l++;break}}f[0]=new we(v[0],l),f[1]=new we(v[1],l),p=!0;break}}let _=l+1;if(p){let v=0,T=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;_<s;_++){const M=Ne.findGuardPattern(r,T[0],_,o,!1,h,y);if(M!=null&&Math.abs(T[0]-M[0])<Ne.MAX_PATTERN_DRIFT&&Math.abs(T[1]-M[1])<Ne.MAX_PATTERN_DRIFT)T=M,v=0;else{if(v>Ne.SKIPPED_ROW_COUNT_MAX)break;v++}}_-=v+1,f[2]=new we(T[0],_),f[3]=new we(T[1],_)}return _-l<Ne.BARCODE_MIN_HEIGHT&&k.fill(f,null),f}static findGuardPattern(r,s,o,l,c,h,f){k.fillWithin(f,0,f.length,0);let p=s,y=0;for(;r.get(p,o)&&p>0&&y++<Ne.MAX_PIXEL_DRIFT;)p--;let _=p,v=0,T=h.length;for(let M=c;_<l;_++)if(r.get(_,o)!==M)f[v]++;else{if(v===T-1){if(Ne.patternMatchVariance(f,h,Ne.MAX_INDIVIDUAL_VARIANCE)<Ne.MAX_AVG_VARIANCE)return new Int32Array([p,_]);p+=f[0]+f[1],q.arraycopy(f,2,f,0,v-1),f[v-1]=0,f[v]=0,v--}else v++;f[v]=1,M=!M}return v===T-1&&Ne.patternMatchVariance(f,h,Ne.MAX_INDIVIDUAL_VARIANCE)<Ne.MAX_AVG_VARIANCE?new Int32Array([p,_-1]):null}static patternMatchVariance(r,s,o){let l=r.length,c=0,h=0;for(let y=0;y<l;y++)c+=r[y],h+=s[y];if(c<h)return 1/0;let f=c/h;o*=f;let p=0;for(let y=0;y<l;y++){let _=r[y],v=s[y]*f,T=_>v?_-v:v-_;if(T>o)return 1/0;p+=T}return p/c}}Ne.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ne.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ne.MAX_AVG_VARIANCE=.42,Ne.MAX_INDIVIDUAL_VARIANCE=.8,Ne.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ne.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ne.MAX_PIXEL_DRIFT=3,Ne.MAX_PATTERN_DRIFT=5,Ne.SKIPPED_ROW_COUNT_MAX=25,Ne.ROW_STEP=5,Ne.BARCODE_MIN_HEIGHT=10;class en{constructor(r,s){if(s.length===0)throw new S;this.field=r;let o=s.length;if(o>1&&s[0]===0){let l=1;for(;l<o&&s[l]===0;)l++;l===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-l),q.arraycopy(s,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let l=0;for(let c of this.coefficients)l=this.field.add(l,c);return l}let s=this.coefficients[0],o=this.coefficients.length;for(let l=1;l<o;l++)s=this.field.add(this.field.multiply(r,s),this.coefficients[l]);return s}add(r){if(!this.field.equals(r.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){let h=s;s=o,o=h}let l=new Int32Array(o.length),c=o.length-s.length;q.arraycopy(o,0,l,0,c);for(let h=c;h<o.length;h++)l[h]=this.field.add(s[h-c],o[h]);return new en(this.field,l)}subtract(r){if(!this.field.equals(r.field))throw new S("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof en?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new en(this.field,new Int32Array([0]));let s=this.coefficients,o=s.length,l=r.coefficients,c=l.length,h=new Int32Array(o+c-1);for(let f=0;f<o;f++){let p=s[f];for(let y=0;y<c;y++)h[f+y]=this.field.add(h[f+y],this.field.multiply(p,l[y]))}return new en(this.field,h)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let o=0;o<r;o++)s[o]=this.field.subtract(0,this.coefficients[o]);return new en(this.field,s)}multiplyScalar(r){if(r===0)return new en(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,o=new Int32Array(s);for(let l=0;l<s;l++)o[l]=this.field.multiply(this.coefficients[l],r);return new en(this.field,o)}multiplyByMonomial(r,s){if(r<0)throw new S;if(s===0)return new en(this.field,new Int32Array([0]));let o=this.coefficients.length,l=new Int32Array(o+r);for(let c=0;c<o;c++)l[c]=this.field.multiply(this.coefficients[c],s);return new en(this.field,l)}toString(){let r=new L;for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);o!==0&&(o<0?(r.append(" - "),o=-o):r.length()>0&&r.append(" + "),(s===0||o!==1)&&r.append(o),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class jc{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new S;return this.logTable[r]}inverse(r){if(r===0)throw new Ni;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class ki extends jc{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let o=1;for(let l=0;l<r;l++)this.expTable[l]=o,o=o*s%r;for(let l=0;l<r-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new en(this,new Int32Array([0])),this.one=new en(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new S;if(s===0)return this.zero;let o=new Int32Array(r+1);return o[0]=s,new en(this,o)}}ki.PDF417_GF=new ki(Te.NUMBER_OF_CODEWORDS,3);class _s{constructor(){this.field=ki.PDF417_GF}decode(r,s,o){let l=new en(this.field,r),c=new Int32Array(s),h=!1;for(let z=s;z>0;z--){let W=l.evaluateAt(this.field.exp(z));c[s-z]=W,W!==0&&(h=!0)}if(!h)return 0;let f=this.field.getOne();if(o!=null)for(const z of o){let W=this.field.exp(r.length-1-z),K=new en(this.field,new Int32Array([this.field.subtract(0,W),1]));f=f.multiply(K)}let p=new en(this.field,c),y=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),p,s),_=y[0],v=y[1],T=this.findErrorLocations(_),M=this.findErrorMagnitudes(v,_,T);for(let z=0;z<T.length;z++){let W=r.length-1-this.field.log(T[z]);if(W<0)throw U.getChecksumInstance();r[W]=this.field.subtract(r[W],M[z])}return T.length}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){let T=r;r=s,s=T}let l=r,c=s,h=this.field.getZero(),f=this.field.getOne();for(;c.getDegree()>=Math.round(o/2);){let T=l,M=h;if(l=c,h=f,l.isZero())throw U.getChecksumInstance();c=T;let z=this.field.getZero(),W=l.getCoefficient(l.getDegree()),K=this.field.inverse(W);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){let J=c.getDegree()-l.getDegree(),le=this.field.multiply(c.getCoefficient(c.getDegree()),K);z=z.add(this.field.buildMonomial(J,le)),c=c.subtract(l.multiplyByMonomial(J,le))}f=z.multiply(h).subtract(M).negative()}let p=f.getCoefficient(0);if(p===0)throw U.getChecksumInstance();let y=this.field.inverse(p),_=f.multiply(y),v=c.multiply(y);return[_,v]}findErrorLocations(r){let s=r.getDegree(),o=new Int32Array(s),l=0;for(let c=1;c<this.field.getSize()&&l<s;c++)r.evaluateAt(c)===0&&(o[l]=this.field.inverse(c),l++);if(l!==s)throw U.getChecksumInstance();return o}findErrorMagnitudes(r,s,o){let l=s.getDegree(),c=new Int32Array(l);for(let y=1;y<=l;y++)c[l-y]=this.field.multiply(y,s.getCoefficient(y));let h=new en(this.field,c),f=o.length,p=new Int32Array(f);for(let y=0;y<f;y++){let _=this.field.inverse(o[y]),v=this.field.subtract(0,r.evaluateAt(_)),T=this.field.inverse(h.evaluateAt(_));p[y]=this.field.multiply(v,T)}return p}}class qr{constructor(r,s,o,l,c){r instanceof qr?this.constructor_2(r):this.constructor_1(r,s,o,l,c)}constructor_1(r,s,o,l,c){const h=s==null||o==null,f=l==null||c==null;if(h&&f)throw new ee;h?(s=new we(0,l.getY()),o=new we(0,c.getY())):f&&(l=new we(r.getWidth()-1,s.getY()),c=new we(r.getWidth()-1,o.getY())),this.image=r,this.topLeft=s,this.bottomLeft=o,this.topRight=l,this.bottomRight=c,this.minX=Math.trunc(Math.min(s.getX(),o.getX())),this.maxX=Math.trunc(Math.max(l.getX(),c.getX())),this.minY=Math.trunc(Math.min(s.getY(),l.getY())),this.maxY=Math.trunc(Math.max(o.getY(),c.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new qr(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,o){let l=this.topLeft,c=this.bottomLeft,h=this.topRight,f=this.bottomRight;if(r>0){let p=o?this.topLeft:this.topRight,y=Math.trunc(p.getY()-r);y<0&&(y=0);let _=new we(p.getX(),y);o?l=_:h=_}if(s>0){let p=o?this.bottomLeft:this.bottomRight,y=Math.trunc(p.getY()+s);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);let _=new we(p.getX(),y);o?c=_:f=_}return new qr(this.image,l,c,h,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class As{constructor(r,s,o,l){this.columnCount=r,this.errorCorrectionLevel=l,this.rowCountUpperPart=s,this.rowCountLowerPart=o,this.rowCount=s+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Or{constructor(){this.buffer=""}static form(r,s){let o=-1;function l(h,f,p,y,_,v){if(h==="%%")return"%";if(s[++o]===void 0)return;h=y?parseInt(y.substr(1)):void 0;let T=_?parseInt(_.substr(1)):void 0,M;switch(v){case"s":M=s[o];break;case"c":M=s[o][0];break;case"f":M=parseFloat(s[o]).toFixed(h);break;case"p":M=parseFloat(s[o]).toPrecision(h);break;case"e":M=parseFloat(s[o]).toExponential(h);break;case"x":M=parseInt(s[o]).toString(T||16);break;case"d":M=parseFloat(parseInt(s[o],T||10).toPrecision(h)).toFixed(0);break}M=typeof M=="object"?JSON.stringify(M):(+M).toString(T);let z=parseInt(p),W=p&&p[0]+""=="0"?"0":" ";for(;M.length<z;)M=f!==void 0?M+W:W+M;return M}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(c,l)}format(r,...s){this.buffer+=Or.form(r,s)}toString(){return this.buffer}}class Li{constructor(r){this.boundingBox=new qr(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let o=1;o<Li.MAX_NEARBY_DISTANCE;o++){let l=this.imageRowToCodewordIndex(r)-o;if(l>=0&&(s=this.codewords[l],s!=null)||(l=this.imageRowToCodewordIndex(r)+o,l<this.codewords.length&&(s=this.codewords[l],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Or;let s=0;for(const o of this.codewords){if(o==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,o.getRowNumber(),o.getValue())}return r.toString()}}Li.MAX_NEARBY_DISTANCE=5;class fi{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[o,l]of this.values.entries()){const c={getKey:()=>o,getValue:()=>l};c.getValue()>r?(r=c.getValue(),s=[],s.push(c.getKey())):c.getValue()===r&&s.push(c.getKey())}return Te.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class yt extends Li{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),p=-1,y=1,_=0;for(let v=h;v<f;v++){if(s[v]==null)continue;let T=s[v],M=T.getRowNumber()-p;if(M===0)_++;else if(M===1)y=Math.max(y,_),_=1,p=T.getRowNumber();else if(M<0||T.getRowNumber()>=r.getRowCount()||M>v)s[v]=null;else{let z;y>2?z=(y-2)*M:z=M;let W=z>=v;for(let K=1;K<=z&&!W;K++)W=s[v-K]!=null;W?s[v]=null:(p=T.getRowNumber(),_=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let o of this.getCodewords())if(o!=null){let l=o.getRowNumber();if(l>=s.length)continue;s[l]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),o=this._isLeft?s.getTopLeft():s.getTopRight(),l=this._isLeft?s.getBottomLeft():s.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.getCodewords(),p=-1;for(let y=c;y<h;y++){if(f[y]==null)continue;let _=f[y];_.setRowNumberAsRowIndicatorColumn();let v=_.getRowNumber()-p;v===0||(v===1?p=_.getRowNumber():_.getRowNumber()>=r.getRowCount()?f[y]=null:p=_.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new fi,o=new fi,l=new fi,c=new fi;for(let f of r){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let p=f.getValue()%30,y=f.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:o.setValue(p*3+1);break;case 1:c.setValue(p/3),l.setValue(p%3);break;case 2:s.setValue(p+1);break}}if(s.getValue().length===0||o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<Te.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>Te.MAX_ROWS_IN_BARCODE)return null;let h=new As(s.getValue()[0],o.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(r,h),h}removeIncorrectCodewords(r,s){for(let o=0;o<r.length;o++){let l=r[o];if(r[o]==null)continue;let c=l.getValue()%30,h=l.getRowNumber();if(h>s.getRowCount()){r[o]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:c*3+1!==s.getRowCountUpperPart()&&(r[o]=null);break;case 1:(Math.trunc(c/3)!==s.getErrorCorrectionLevel()||c%3!==s.getRowCountLowerPart())&&(r[o]=null);break;case 2:c+1!==s.getColumnCount()&&(r[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Cs{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Te.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let o=this.detectionResultColumns[s].getCodewords();for(let l=0;l<o.length;l++)o[l]!=null&&(o[l].hasValidRowNumber()||this.adjustRowNumbers(s,l,o))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++)if(r[o]!=null&&s[o]!=null&&r[o].getRowNumber()===s[o].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let c=this.detectionResultColumns[l].getCodewords()[o];c!=null&&(c.setRowNumber(r[o].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let l=s[o].getRowNumber(),c=0;for(let h=this.barcodeColumnCount+1;h>0&&c<this.ADJUST_ROW_NUMBER_SKIP;h--){let f=this.detectionResultColumns[h].getCodewords()[o];f!=null&&(c=Cs.adjustRowNumberIfValid(l,c,f),f.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let l=s[o].getRowNumber(),c=0;for(let h=1;h<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;h++){let f=this.detectionResultColumns[h].getCodewords()[o];f!=null&&(c=Cs.adjustRowNumberIfValid(l,c,f),f.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(r)?(o.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,o){if(!this.detectionResultColumns[r-1])return;let l=o[s],c=this.detectionResultColumns[r-1].getCodewords(),h=c;this.detectionResultColumns[r+1]!=null&&(h=this.detectionResultColumns[r+1].getCodewords());let f=new Array(14);f[2]=c[s],f[3]=h[s],s>0&&(f[0]=o[s-1],f[4]=c[s-1],f[5]=h[s-1]),s>1&&(f[8]=o[s-2],f[10]=c[s-2],f[11]=h[s-2]),s<o.length-1&&(f[1]=o[s+1],f[6]=c[s+1],f[7]=h[s+1]),s<o.length-2&&(f[9]=o[s+2],f[12]=c[s+2],f[13]=h[s+2]);for(let p of f)if(Cs.adjustRowNumber(l,p))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Or;for(let o=0;o<r.getCodewords().length;o++){s.format("CW %3d:",o);for(let l=0;l<this.barcodeColumnCount+2;l++){if(this.detectionResultColumns[l]==null){s.format("    |   ");continue}let c=this.detectionResultColumns[l].getCodewords()[o];if(c==null){s.format("    |   ");continue}s.format(" %3d|%3d",c.getRowNumber(),c.getValue())}s.format("%n")}return s.toString()}}class vs{constructor(r,s,o,l){this.rowNumber=vs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(o),this.value=Math.trunc(l)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==vs.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}vs.BARCODE_ROW_UNKNOWN=-1;class mn{static initialize(){for(let r=0;r<Te.SYMBOL_TABLE.length;r++){let s=Te.SYMBOL_TABLE[r],o=s&1;for(let l=0;l<Te.BARS_IN_MODULE;l++){let c=0;for(;(s&1)===o;)c+=1,s>>=1;o=s&1,mn.RATIOS_TABLE[r]||(mn.RATIOS_TABLE[r]=new Array(Te.BARS_IN_MODULE)),mn.RATIOS_TABLE[r][Te.BARS_IN_MODULE-l-1]=Math.fround(c/Te.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=mn.getDecodedCodewordValue(mn.sampleBitCounts(r));return s!==-1?s:mn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=Ve.sum(r),o=new Int32Array(Te.BARS_IN_MODULE),l=0,c=0;for(let h=0;h<Te.MODULES_IN_CODEWORD;h++){let f=s/(2*Te.MODULES_IN_CODEWORD)+h*s/Te.MODULES_IN_CODEWORD;c+r[l]<=f&&(c+=r[l],l++),o[l]++}return o}static getDecodedCodewordValue(r){let s=mn.getBitValue(r);return Te.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let o=0;o<r.length;o++)for(let l=0;l<r[o];l++)s=s<<1|(o%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=Ve.sum(r),o=new Array(Te.BARS_IN_MODULE);if(s>1)for(let h=0;h<o.length;h++)o[h]=Math.fround(r[h]/s);let l=Di.MAX_VALUE,c=-1;this.bSymbolTableReady||mn.initialize();for(let h=0;h<mn.RATIOS_TABLE.length;h++){let f=0,p=mn.RATIOS_TABLE[h];for(let y=0;y<Te.BARS_IN_MODULE;y++){let _=Math.fround(p[y]-o[y]);if(f+=Math.fround(_*_),f>=l)break}f<l&&(l=f,c=Te.SYMBOL_TABLE[h])}return c}}mn.bSymbolTableReady=!1,mn.RATIOS_TABLE=new Array(Te.SYMBOL_TABLE.length).map(C=>new Array(Te.BARS_IN_MODULE));class ua{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class ca{static parseLong(r,s=void 0){return parseInt(r,s)}}class Is extends w{}Is.kind="NullPointerException";class Dl{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,o){if(r==null)throw new Is;if(s<0||s>r.length||o<0||s+o>r.length||s+o<0)throw new te;if(o===0)return;for(let l=0;l<o;l++)this.write(r[s+l])}flush(){}close(){}}class Dr extends w{}class bl extends Dl{constructor(r=32){if(super(),this.count=0,r<0)throw new S("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let o=this.buf.length<<1;if(o-r<0&&(o=r),o<0){if(r<0)throw new Dr;o=B.MAX_VALUE}this.buf=k.copyOfUint8Array(this.buf,o)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,o){if(s<0||s>r.length||o<0||s+o-r.length>0)throw new te;this.ensureCapacity(this.count+o),q.arraycopy(r,s,this.buf,this.count,o),this.count+=o}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return k.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var et;(function(C){C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(et||(et={}));function Bi(){if(typeof window<"u")return window.BigInt||null;if(typeof ga<"u")return ga.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ts;function Er(C){if(typeof Ts>"u"&&(Ts=Bi()),Ts===null)throw new Error("BigInt is not supported!");return Ts(C)}function uo(){let C=[];C[0]=Er(1);let r=Er(900);C[1]=r;for(let s=2;s<16;s++)C[s]=C[s-1]*r;return C}class Z{static decode(r,s){let o=new L(""),l=N.ISO8859_1;o.enableDecoding(l);let c=1,h=r[c++],f=new ua;for(;c<r[0];){switch(h){case Z.TEXT_COMPACTION_MODE_LATCH:c=Z.textCompaction(r,c,o);break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:c=Z.byteCompaction(h,r,l,c,o);break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[c++]);break;case Z.NUMERIC_COMPACTION_MODE_LATCH:c=Z.numericCompaction(r,c,o);break;case Z.ECI_CHARSET:N.getCharacterSetECIByValue(r[c++]);break;case Z.ECI_GENERAL_PURPOSE:c+=2;break;case Z.ECI_USER_DEFINED:c++;break;case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=Z.decodeMacroBlock(r,c,f);break;case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:throw new D;default:c--,c=Z.textCompaction(r,c,o);break}if(c<r.length)h=r[c++];else throw D.getFormatInstance()}if(o.length()===0)throw D.getFormatInstance();let p=new gs(null,o.toString(),null,s);return p.setOther(f),p}static decodeMacroBlock(r,s,o){if(s+Z.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw D.getFormatInstance();let l=new Int32Array(Z.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<Z.NUMBER_OF_SEQUENCE_CODEWORDS;f++,s++)l[f]=r[s];o.setSegmentIndex(B.parseInt(Z.decodeBase900toBase10(l,Z.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new L;s=Z.textCompaction(r,s,c),o.setFileId(c.toString());let h=-1;for(r[s]===Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=s+1);s<r[0];)switch(r[s]){case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new L;s=Z.textCompaction(r,s+1,f),o.setFileName(f.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let p=new L;s=Z.textCompaction(r,s+1,p),o.setSender(p.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let y=new L;s=Z.textCompaction(r,s+1,y),o.setAddressee(y.toString());break;case Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let _=new L;s=Z.numericCompaction(r,s+1,_),o.setSegmentCount(B.parseInt(_.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let v=new L;s=Z.numericCompaction(r,s+1,v),o.setTimestamp(ca.parseLong(v.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let T=new L;s=Z.numericCompaction(r,s+1,T),o.setChecksum(B.parseInt(T.toString()));break;case Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let M=new L;s=Z.numericCompaction(r,s+1,M),o.setFileSize(ca.parseLong(M.toString()));break;default:throw D.getFormatInstance()}break;case Z.MACRO_PDF417_TERMINATOR:s++,o.setLastSegment(!0);break;default:throw D.getFormatInstance()}if(h!==-1){let f=s-h;o.isLastSegment()&&f--,o.setOptionalData(k.copyOfRange(r,h,h+f))}return s}static textCompaction(r,s,o){let l=new Int32Array((r[0]-s)*2),c=new Int32Array((r[0]-s)*2),h=0,f=!1;for(;s<r[0]&&!f;){let p=r[s++];if(p<Z.TEXT_COMPACTION_MODE_LATCH)l[h]=p/30,l[h+1]=p%30,h+=2;else switch(p){case Z.TEXT_COMPACTION_MODE_LATCH:l[h++]=Z.TEXT_COMPACTION_MODE_LATCH;break;case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:s--,f=!0;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[h]=Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,p=r[s++],c[h]=p,h++;break}}return Z.decodeTextCompaction(l,c,h,o),s}static decodeTextCompaction(r,s,o,l){let c=et.ALPHA,h=et.ALPHA,f=0;for(;f<o;){let p=r[f],y="";switch(c){case et.ALPHA:if(p<26)y=String.fromCharCode(65+p);else switch(p){case 26:y=" ";break;case Z.LL:c=et.LOWER;break;case Z.ML:c=et.MIXED;break;case Z.PS:h=c,c=et.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[f]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=et.ALPHA;break}break;case et.LOWER:if(p<26)y=String.fromCharCode(97+p);else switch(p){case 26:y=" ";break;case Z.AS:h=c,c=et.ALPHA_SHIFT;break;case Z.ML:c=et.MIXED;break;case Z.PS:h=c,c=et.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[f]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=et.ALPHA;break}break;case et.MIXED:if(p<Z.PL)y=Z.MIXED_CHARS[p];else switch(p){case Z.PL:c=et.PUNCT;break;case 26:y=" ";break;case Z.LL:c=et.LOWER;break;case Z.AL:c=et.ALPHA;break;case Z.PS:h=c,c=et.PUNCT_SHIFT;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[f]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=et.ALPHA;break}break;case et.PUNCT:if(p<Z.PAL)y=Z.PUNCT_CHARS[p];else switch(p){case Z.PAL:c=et.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[f]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=et.ALPHA;break}break;case et.ALPHA_SHIFT:if(c=h,p<26)y=String.fromCharCode(65+p);else switch(p){case 26:y=" ";break;case Z.TEXT_COMPACTION_MODE_LATCH:c=et.ALPHA;break}break;case et.PUNCT_SHIFT:if(c=h,p<Z.PAL)y=Z.PUNCT_CHARS[p];else switch(p){case Z.PAL:c=et.ALPHA;break;case Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[f]);break;case Z.TEXT_COMPACTION_MODE_LATCH:c=et.ALPHA;break}break}y!==""&&l.append(y),f++}}static byteCompaction(r,s,o,l,c){let h=new bl,f=0,p=0,y=!1;switch(r){case Z.BYTE_COMPACTION_MODE_LATCH:let _=new Int32Array(6),v=s[l++];for(;l<s[0]&&!y;)switch(_[f++]=v,p=900*p+v,v=s[l++],v){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:l--,y=!0;break;default:if(f%5===0&&f>0){for(let T=0;T<6;++T)h.write(Number(Er(p)>>Er(8*(5-T))));p=0,f=0}break}l===s[0]&&v<Z.TEXT_COMPACTION_MODE_LATCH&&(_[f++]=v);for(let T=0;T<f;T++)h.write(_[T]);break;case Z.BYTE_COMPACTION_MODE_LATCH_6:for(;l<s[0]&&!y;){let T=s[l++];if(T<Z.TEXT_COMPACTION_MODE_LATCH)f++,p=900*p+T;else switch(T){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.NUMERIC_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:l--,y=!0;break}if(f%5===0&&f>0){for(let M=0;M<6;++M)h.write(Number(Er(p)>>Er(8*(5-M))));p=0,f=0}}break}return c.append(G.decode(h.toByteArray(),o)),l}static numericCompaction(r,s,o){let l=0,c=!1,h=new Int32Array(Z.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!c;){let f=r[s++];if(s===r[0]&&(c=!0),f<Z.TEXT_COMPACTION_MODE_LATCH)h[l]=f,l++;else switch(f){case Z.TEXT_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH:case Z.BYTE_COMPACTION_MODE_LATCH_6:case Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Z.MACRO_PDF417_TERMINATOR:s--,c=!0;break}(l%Z.MAX_NUMERIC_CODEWORDS===0||f===Z.NUMERIC_COMPACTION_MODE_LATCH||c)&&l>0&&(o.append(Z.decodeBase900toBase10(h,l)),l=0)}return s}static decodeBase900toBase10(r,s){let o=Er(0);for(let c=0;c<s;c++)o+=Z.EXP900[s-c-1]*Er(r[c]);let l=o.toString();if(l.charAt(0)!=="1")throw new D;return l.substring(1)}}Z.TEXT_COMPACTION_MODE_LATCH=900,Z.BYTE_COMPACTION_MODE_LATCH=901,Z.NUMERIC_COMPACTION_MODE_LATCH=902,Z.BYTE_COMPACTION_MODE_LATCH_6=924,Z.ECI_USER_DEFINED=925,Z.ECI_GENERAL_PURPOSE=926,Z.ECI_CHARSET=927,Z.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Z.MACRO_PDF417_TERMINATOR=922,Z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Z.MAX_NUMERIC_CODEWORDS=15,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Z.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Z.PL=25,Z.LL=27,Z.AS=27,Z.ML=28,Z.AL=28,Z.PS=29,Z.PAL=29,Z.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Z.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Z.EXP900=Bi()?uo():[],Z.NUMBER_OF_SEQUENCE_CODEWORDS=2;class De{constructor(){}static decode(r,s,o,l,c,h,f){let p=new qr(r,s,o,l,c),y=null,_=null,v;for(let z=!0;;z=!1){if(s!=null&&(y=De.getRowIndicatorColumn(r,p,s,!0,h,f)),l!=null&&(_=De.getRowIndicatorColumn(r,p,l,!1,h,f)),v=De.merge(y,_),v==null)throw ee.getNotFoundInstance();let W=v.getBoundingBox();if(z&&W!=null&&(W.getMinY()<p.getMinY()||W.getMaxY()>p.getMaxY()))p=W;else break}v.setBoundingBox(p);let T=v.getBarcodeColumnCount()+1;v.setDetectionResultColumn(0,y),v.setDetectionResultColumn(T,_);let M=y!=null;for(let z=1;z<=T;z++){let W=M?z:T-z;if(v.getDetectionResultColumn(W)!==void 0)continue;let K;W===0||W===T?K=new yt(p,W===0):K=new Li(p),v.setDetectionResultColumn(W,K);let J=-1,le=J;for(let ue=p.getMinY();ue<=p.getMaxY();ue++){if(J=De.getStartColumn(v,W,ue,M),J<0||J>p.getMaxX()){if(le===-1)continue;J=le}let ie=De.detectCodeword(r,p.getMinX(),p.getMaxX(),M,J,ue,h,f);ie!=null&&(K.setCodeword(ue,ie),le=J,h=Math.min(h,ie.getWidth()),f=Math.max(f,ie.getWidth()))}}return De.createDecoderResult(v)}static merge(r,s){if(r==null&&s==null)return null;let o=De.getBarcodeMetadata(r,s);if(o==null)return null;let l=qr.merge(De.adjustBoundingBox(r),De.adjustBoundingBox(s));return new Cs(o,l)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let o=De.getMax(s),l=0;for(let f of s)if(l+=o-f,f>0)break;let c=r.getCodewords();for(let f=0;l>0&&c[f]==null;f++)l--;let h=0;for(let f=s.length-1;f>=0&&(h+=o-s[f],!(s[f]>0));f--);for(let f=c.length-1;h>0&&c[f]==null;f--)h--;return r.getBoundingBox().addMissingRows(l,h,r.isLeft())}static getMax(r){let s=-1;for(let o of r)s=Math.max(s,o);return s}static getBarcodeMetadata(r,s){let o;if(r==null||(o=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let l;return s==null||(l=s.getBarcodeMetadata())==null?o:o.getColumnCount()!==l.getColumnCount()&&o.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&o.getRowCount()!==l.getRowCount()?null:o}static getRowIndicatorColumn(r,s,o,l,c,h){let f=new yt(s,l);for(let p=0;p<2;p++){let y=p===0?1:-1,_=Math.trunc(Math.trunc(o.getX()));for(let v=Math.trunc(Math.trunc(o.getY()));v<=s.getMaxY()&&v>=s.getMinY();v+=y){let T=De.detectCodeword(r,0,r.getWidth(),l,_,v,c,h);T!=null&&(f.setCodeword(v,T),l?_=T.getStartX():_=T.getEndX())}}return f}static adjustCodewordCount(r,s){let o=s[0][1],l=o.getValue(),c=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-De.getNumberOfECCodeWords(r.getBarcodeECLevel());if(l.length===0){if(c<1||c>Te.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();o.setValue(c)}else l[0]!==c&&o.setValue(c)}static createDecoderResult(r){let s=De.createBarcodeMatrix(r);De.adjustCodewordCount(r,s);let o=new Array,l=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),c=[],h=new Array;for(let p=0;p<r.getBarcodeRowCount();p++)for(let y=0;y<r.getBarcodeColumnCount();y++){let _=s[p][y+1].getValue(),v=p*r.getBarcodeColumnCount()+y;_.length===0?o.push(v):_.length===1?l[v]=_[0]:(h.push(v),c.push(_))}let f=new Array(c.length);for(let p=0;p<f.length;p++)f[p]=c[p];return De.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),l,Te.toIntArray(o),Te.toIntArray(h),f)}static createDecoderResultFromAmbiguousValues(r,s,o,l,c){let h=new Int32Array(l.length),f=100;for(;f-- >0;){for(let p=0;p<h.length;p++)s[l[p]]=c[p][h[p]];try{return De.decodeCodewords(s,r,o)}catch(p){if(!(p instanceof U))throw p}if(h.length===0)throw U.getChecksumInstance();for(let p=0;p<h.length;p++)if(h[p]<c[p].length-1){h[p]++;break}else if(h[p]=0,p===h.length-1)throw U.getChecksumInstance()}throw U.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let l=0;l<s.length;l++)for(let c=0;c<s[l].length;c++)s[l][c]=new fi;let o=0;for(let l of r.getDetectionResultColumns()){if(l!=null){for(let c of l.getCodewords())if(c!=null){let h=c.getRowNumber();if(h>=0){if(h>=s.length)continue;s[h][o].setValue(c.getValue())}}}o++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,o,l){let c=l?1:-1,h=null;if(De.isValidBarcodeColumn(r,s-c)&&(h=r.getDetectionResultColumn(s-c).getCodeword(o)),h!=null)return l?h.getEndX():h.getStartX();if(h=r.getDetectionResultColumn(s).getCodewordNearby(o),h!=null)return l?h.getStartX():h.getEndX();if(De.isValidBarcodeColumn(r,s-c)&&(h=r.getDetectionResultColumn(s-c).getCodewordNearby(o)),h!=null)return l?h.getEndX():h.getStartX();let f=0;for(;De.isValidBarcodeColumn(r,s-c);){s-=c;for(let p of r.getDetectionResultColumn(s).getCodewords())if(p!=null)return(l?p.getEndX():p.getStartX())+c*f*(p.getEndX()-p.getStartX());f++}return l?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,o,l,c,h,f,p){c=De.adjustCodewordStartColumn(r,s,o,l,c,h);let y=De.getModuleBitCount(r,s,o,l,c,h);if(y==null)return null;let _,v=Ve.sum(y);if(l)_=c+v;else{for(let z=0;z<y.length/2;z++){let W=y[z];y[z]=y[y.length-1-z],y[y.length-1-z]=W}_=c,c=_-v}if(!De.checkCodewordSkew(v,f,p))return null;let T=mn.getDecodedValue(y),M=Te.getCodeword(T);return M===-1?null:new vs(c,_,De.getCodewordBucketNumber(T),M)}static getModuleBitCount(r,s,o,l,c,h){let f=c,p=new Int32Array(8),y=0,_=l?1:-1,v=l;for(;(l?f<o:f>=s)&&y<p.length;)r.get(f,h)===v?(p[y]++,f+=_):(y++,v=!v);return y===p.length||f===(l?o:s)&&y===p.length-1?p:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,o,l,c,h){let f=c,p=l?-1:1;for(let y=0;y<2;y++){for(;(l?f>=s:f<o)&&l===r.get(f,h);){if(Math.abs(c-f)>De.CODEWORD_SKEW_SIZE)return c;f+=p}p=-p,l=!l}return f}static checkCodewordSkew(r,s,o){return s-De.CODEWORD_SKEW_SIZE<=r&&r<=o+De.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,o){if(r.length===0)throw D.getFormatInstance();let l=1<<s+1,c=De.correctErrors(r,o,l);De.verifyCodewordCount(r,l);let h=Z.decode(r,""+s);return h.setErrorsCorrected(c),h.setErasures(o.length),h}static correctErrors(r,s,o){if(s!=null&&s.length>o/2+De.MAX_ERRORS||o<0||o>De.MAX_EC_CODEWORDS)throw U.getChecksumInstance();return De.errorCorrection.decode(r,o,s)}static verifyCodewordCount(r,s){if(r.length<4)throw D.getFormatInstance();let o=r[0];if(o>r.length)throw D.getFormatInstance();if(o===0)if(s<r.length)r[0]=r.length-s;else throw D.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),o=0,l=s.length-1;for(;!((r&1)!==o&&(o=r&1,l--,l<0));)s[l]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return De.getCodewordBucketNumber(De.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new Or;for(let o=0;o<r.length;o++){s.format("Row %2d: ",o);for(let l=0;l<r[o].length;l++){let c=r[o][l];c.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}s.format("%n")}return s.toString()}}De.CODEWORD_SKEW_SIZE=2,De.MAX_ERRORS=3,De.MAX_EC_CODEWORDS=512,De.errorCorrection=new _s;class tn{decode(r,s=null){let o=tn.decode(r,s,!1);if(o==null||o.length===0||o[0]==null)throw ee.getNotFoundInstance();return o[0]}decodeMultiple(r,s=null){try{return tn.decode(r,s,!0)}catch(o){throw o instanceof D||o instanceof U?ee.getNotFoundInstance():o}}static decode(r,s,o){const l=new Array,c=Ne.detectMultiple(r,s,o);for(const h of c.getPoints()){const f=De.decode(c.getBits(),h[4],h[5],h[6],h[7],tn.getMinCodewordWidth(h),tn.getMaxCodewordWidth(h)),p=new pt(f.getText(),f.getRawBytes(),void 0,h,Ee.PDF_417);p.putMetadata(Xt.ERROR_CORRECTION_LEVEL,f.getECLevel());const y=f.getOther();y!=null&&p.putMetadata(Xt.PDF417_EXTRA_METADATA,y),l.push(p)}return l.map(h=>h)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?B.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(tn.getMaxWidth(r[0],r[4]),tn.getMaxWidth(r[6],r[2])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN),Math.max(tn.getMaxWidth(r[1],r[5]),tn.getMaxWidth(r[7],r[3])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(tn.getMinWidth(r[0],r[4]),tn.getMinWidth(r[6],r[2])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN),Math.min(tn.getMinWidth(r[1],r[5]),tn.getMinWidth(r[7],r[3])*Te.MODULES_IN_CODEWORD/Te.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ss extends w{}Ss.kind="ReaderException";class Fi{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(re.TRY_HARDER)===!0,o=i(r)?null:r.get(re.POSSIBLE_FORMATS),l=new Array;if(!i(o)){const c=o.some(h=>h===Ee.UPC_A||h===Ee.UPC_E||h===Ee.EAN_13||h===Ee.EAN_8||h===Ee.CODABAR||h===Ee.CODE_39||h===Ee.CODE_93||h===Ee.CODE_128||h===Ee.ITF||h===Ee.RSS_14||h===Ee.RSS_EXPANDED);c&&!s&&l.push(new jr(r,this.verbose)),o.includes(Ee.QR_CODE)&&l.push(new Kr),o.includes(Ee.DATA_MATRIX)&&l.push(new Nr),o.includes(Ee.AZTEC)&&l.push(new ro),o.includes(Ee.PDF_417)&&l.push(new tn),c&&s&&l.push(new jr(r,this.verbose))}l.length===0&&(s||l.push(new jr(r,this.verbose)),l.push(new Kr),l.push(new Nr),l.push(new ro),l.push(new tn),s&&l.push(new jr(r,this.verbose))),this.readers=l}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Ss("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(o){if(o instanceof Ss)continue}throw new ee("No MultiFormat Readers were able to detect the code.")}}class Pl extends nt{constructor(r=null,s=500){const o=new Fi;o.setHints(r),super(o,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Ml extends nt{constructor(r=500){super(new tn,r)}}class ha extends nt{constructor(r=500){super(new Kr,r)}}var Rs;(function(C){C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION"})(Rs||(Rs={}));var Ft=Rs;class Vi{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Qt(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let o=s[s.length-1];const l=this.field;for(let c=s.length;c<=r;c++){const h=o.multiply(new Qt(l,Int32Array.from([1,l.exp(c-1+l.getGeneratorBase())])));s.push(h),o=h}}return s[r]}encode(r,s){if(s===0)throw new S("No error correction bytes");const o=r.length-s;if(o<=0)throw new S("No data bytes provided");const l=this.buildGenerator(s),c=new Int32Array(o);q.arraycopy(r,0,c,0,o);let h=new Qt(this.field,c);h=h.multiplyByMonomial(s,1);const p=h.divide(l)[1].getCoefficients(),y=s-p.length;for(let _=0;_<y;_++)r[o+_]=0;q.arraycopy(p,0,r,o+y,p.length)}}class wt{constructor(){}static applyMaskPenaltyRule1(r){return wt.applyMaskPenaltyRule1Internal(r,!0)+wt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const o=r.getArray(),l=r.getWidth(),c=r.getHeight();for(let h=0;h<c-1;h++){const f=o[h];for(let p=0;p<l-1;p++){const y=f[p];y===f[p+1]&&y===o[h+1][p]&&y===o[h+1][p+1]&&s++}}return wt.N2*s}static applyMaskPenaltyRule3(r){let s=0;const o=r.getArray(),l=r.getWidth(),c=r.getHeight();for(let h=0;h<c;h++)for(let f=0;f<l;f++){const p=o[h];f+6<l&&p[f]===1&&p[f+1]===0&&p[f+2]===1&&p[f+3]===1&&p[f+4]===1&&p[f+5]===0&&p[f+6]===1&&(wt.isWhiteHorizontal(p,f-4,f)||wt.isWhiteHorizontal(p,f+7,f+11))&&s++,h+6<c&&o[h][f]===1&&o[h+1][f]===0&&o[h+2][f]===1&&o[h+3][f]===1&&o[h+4][f]===1&&o[h+5][f]===0&&o[h+6][f]===1&&(wt.isWhiteVertical(o,f,h-4,h)||wt.isWhiteVertical(o,f,h+7,h+11))&&s++}return s*wt.N3}static isWhiteHorizontal(r,s,o){s=Math.max(s,0),o=Math.min(o,r.length);for(let l=s;l<o;l++)if(r[l]===1)return!1;return!0}static isWhiteVertical(r,s,o,l){o=Math.max(o,0),l=Math.min(l,r.length);for(let c=o;c<l;c++)if(r[c][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const o=r.getArray(),l=r.getWidth(),c=r.getHeight();for(let p=0;p<c;p++){const y=o[p];for(let _=0;_<l;_++)y[_]===1&&s++}const h=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-h)*10/h)*wt.N4}static getDataMaskBit(r,s,o){let l,c;switch(r){case 0:l=o+s&1;break;case 1:l=o&1;break;case 2:l=s%3;break;case 3:l=(o+s)%3;break;case 4:l=Math.floor(o/2)+Math.floor(s/3)&1;break;case 5:c=o*s,l=(c&1)+c%3;break;case 6:c=o*s,l=(c&1)+c%3&1;break;case 7:c=o*s,l=c%3+(o+s&1)&1;break;default:throw new S("Invalid mask pattern: "+r)}return l===0}static applyMaskPenaltyRule1Internal(r,s){let o=0;const l=s?r.getHeight():r.getWidth(),c=s?r.getWidth():r.getHeight(),h=r.getArray();for(let f=0;f<l;f++){let p=0,y=-1;for(let _=0;_<c;_++){const v=s?h[f][_]:h[_][f];v===y?p++:(p>=5&&(o+=wt.N1+(p-5)),p=1,y=v)}p>=5&&(o+=wt.N1+(p-5))}return o}}wt.N1=3,wt.N2=3,wt.N3=40,wt.N4=10;class Ns{constructor(r,s){this.width=r,this.height=s;const o=new Array(s);for(let l=0;l!==s;l++)o[l]=new Uint8Array(r);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,o){this.bytes[s][r]=o}setBoolean(r,s,o){this.bytes[s][r]=o?1:0}clear(r){for(const s of this.bytes)k.fill(s,r)}equals(r){if(!(r instanceof Ns))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let o=0,l=this.height;o<l;++o){const c=this.bytes[o],h=s.bytes[o];for(let f=0,p=this.width;f<p;++f)if(c[f]!==h[f])return!1}return!0}toString(){const r=new L;for(let s=0,o=this.height;s<o;++s){const l=this.bytes[s];for(let c=0,h=this.width;c<h;++c)switch(l[c]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Mn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new L;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Mn.NUM_MASK_PATTERNS}}Mn.NUM_MASK_PATTERNS=8;class tt extends w{}tt.kind="WriterException";class ve{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,o,l,c){ve.clearMatrix(c),ve.embedBasicPatterns(o,c),ve.embedTypeInfo(s,l,c),ve.maybeEmbedVersionInfo(o,c),ve.embedDataBits(r,l,c)}static embedBasicPatterns(r,s){ve.embedPositionDetectionPatternsAndSeparators(s),ve.embedDarkDotAtLeftBottomCorner(s),ve.maybeEmbedPositionAdjustmentPatterns(r,s),ve.embedTimingPatterns(s)}static embedTypeInfo(r,s,o){const l=new Q;ve.makeTypeInfoBits(r,s,l);for(let c=0,h=l.getSize();c<h;++c){const f=l.get(l.getSize()-1-c),p=ve.TYPE_INFO_COORDINATES[c],y=p[0],_=p[1];if(o.setBoolean(y,_,f),c<8){const v=o.getWidth()-c-1;o.setBoolean(v,8,f)}else{const T=o.getHeight()-7+(c-8);o.setBoolean(8,T,f)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const o=new Q;ve.makeVersionInfoBits(r,o);let l=6*3-1;for(let c=0;c<6;++c)for(let h=0;h<3;++h){const f=o.get(l);l--,s.setBoolean(c,s.getHeight()-11+h,f),s.setBoolean(s.getHeight()-11+h,c,f)}}static embedDataBits(r,s,o){let l=0,c=-1,h=o.getWidth()-1,f=o.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);f>=0&&f<o.getHeight();){for(let p=0;p<2;++p){const y=h-p;if(!ve.isEmpty(o.get(y,f)))continue;let _;l<r.getSize()?(_=r.get(l),++l):_=!1,s!==255&&wt.getDataMaskBit(s,y,f)&&(_=!_),o.setBoolean(y,f,_)}f+=c}c=-c,f+=c,h-=2}if(l!==r.getSize())throw new tt("Not all bits consumed: "+l+"/"+r.getSize())}static findMSBSet(r){return 32-B.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new S("0 polynomial");const o=ve.findMSBSet(s);for(r<<=o-1;ve.findMSBSet(r)>=o;)r^=s<<ve.findMSBSet(r)-o;return r}static makeTypeInfoBits(r,s,o){if(!Mn.isValidMaskPattern(s))throw new tt("Invalid mask pattern");const l=r.getBits()<<3|s;o.appendBits(l,5);const c=ve.calculateBCHCode(l,ve.TYPE_INFO_POLY);o.appendBits(c,10);const h=new Q;if(h.appendBits(ve.TYPE_INFO_MASK_PATTERN,15),o.xor(h),o.getSize()!==15)throw new tt("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const o=ve.calculateBCHCode(r.getVersionNumber(),ve.VERSION_INFO_POLY);if(s.appendBits(o,12),s.getSize()!==18)throw new tt("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const o=(s+1)%2;ve.isEmpty(r.get(s,6))&&r.setNumber(s,6,o),ve.isEmpty(r.get(6,s))&&r.setNumber(6,s,o)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new tt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,o){for(let l=0;l<8;++l){if(!ve.isEmpty(o.get(r+l,s)))throw new tt;o.setNumber(r+l,s,0)}}static embedVerticalSeparationPattern(r,s,o){for(let l=0;l<7;++l){if(!ve.isEmpty(o.get(r,s+l)))throw new tt;o.setNumber(r,s+l,0)}}static embedPositionAdjustmentPattern(r,s,o){for(let l=0;l<5;++l){const c=ve.POSITION_ADJUSTMENT_PATTERN[l];for(let h=0;h<5;++h)o.setNumber(r+h,s+l,c[h])}}static embedPositionDetectionPattern(r,s,o){for(let l=0;l<7;++l){const c=ve.POSITION_DETECTION_PATTERN[l];for(let h=0;h<7;++h)o.setNumber(r+h,s+l,c[h])}}static embedPositionDetectionPatternsAndSeparators(r){const s=ve.POSITION_DETECTION_PATTERN[0].length;ve.embedPositionDetectionPattern(0,0,r),ve.embedPositionDetectionPattern(r.getWidth()-s,0,r),ve.embedPositionDetectionPattern(0,r.getWidth()-s,r);const o=8;ve.embedHorizontalSeparationPattern(0,o-1,r),ve.embedHorizontalSeparationPattern(r.getWidth()-o,o-1,r),ve.embedHorizontalSeparationPattern(0,r.getWidth()-o,r);const l=7;ve.embedVerticalSeparationPattern(l,0,r),ve.embedVerticalSeparationPattern(r.getHeight()-l-1,0,r),ve.embedVerticalSeparationPattern(l,r.getHeight()-l,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const o=r.getVersionNumber()-1,l=ve.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let c=0,h=l.length;c!==h;c++){const f=l[c];if(f>=0)for(let p=0;p!==h;p++){const y=l[p];y>=0&&ve.isEmpty(s.get(y,f))&&ve.embedPositionAdjustmentPattern(y-2,f-2,s)}}}}ve.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ve.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ve.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ve.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ve.VERSION_INFO_POLY=7973,ve.TYPE_INFO_POLY=1335,ve.TYPE_INFO_MASK_PATTERN=21522;class kl{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ut{constructor(){}static calculateMaskPenalty(r){return wt.applyMaskPenaltyRule1(r)+wt.applyMaskPenaltyRule2(r)+wt.applyMaskPenaltyRule3(r)+wt.applyMaskPenaltyRule4(r)}static encode(r,s,o=null){let l=ut.DEFAULT_BYTE_MODE_ENCODING;const c=o!==null&&o.get(Ft.CHARACTER_SET)!==void 0;c&&(l=o.get(Ft.CHARACTER_SET).toString());const h=this.chooseMode(r,l),f=new Q;if(h===Ae.BYTE&&(c||ut.DEFAULT_BYTE_MODE_ENCODING!==l)){const ue=N.getCharacterSetECIByName(l);ue!==void 0&&this.appendECI(ue,f)}this.appendModeInfo(h,f);const p=new Q;this.appendBytes(r,h,p,l);let y;if(o!==null&&o.get(Ft.QR_VERSION)!==void 0){const ue=Number.parseInt(o.get(Ft.QR_VERSION).toString(),10);y=de.getVersionForNumber(ue);const ie=this.calculateBitsNeeded(h,f,p,y);if(!this.willFit(ie,y,s))throw new tt("Data too big for requested version")}else y=this.recommendVersion(s,h,f,p);const _=new Q;_.appendBitArray(f);const v=h===Ae.BYTE?p.getSizeInBytes():r.length;this.appendLengthInfo(v,y,h,_),_.appendBitArray(p);const T=y.getECBlocksForLevel(s),M=y.getTotalCodewords()-T.getTotalECCodewords();this.terminateBits(M,_);const z=this.interleaveWithECBytes(_,y.getTotalCodewords(),M,T.getNumBlocks()),W=new Mn;W.setECLevel(s),W.setMode(h),W.setVersion(y);const K=y.getDimensionForVersion(),J=new Ns(K,K),le=this.chooseMaskPattern(z,s,y,J);return W.setMaskPattern(le),ve.buildMatrix(z,s,y,le,J),W.setMatrix(J),W}static recommendVersion(r,s,o,l){const c=this.calculateBitsNeeded(s,o,l,de.getVersionForNumber(1)),h=this.chooseVersion(c,r),f=this.calculateBitsNeeded(s,o,l,h);return this.chooseVersion(f,r)}static calculateBitsNeeded(r,s,o,l){return s.getSize()+r.getCharacterCountBits(l)+o.getSize()}static getAlphanumericCode(r){return r<ut.ALPHANUMERIC_TABLE.length?ut.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(N.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return Ae.KANJI;let o=!1,l=!1;for(let c=0,h=r.length;c<h;++c){const f=r.charAt(c);if(ut.isDigit(f))o=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)l=!0;else return Ae.BYTE}return l?Ae.ALPHANUMERIC:o?Ae.NUMERIC:Ae.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=G.encode(r,N.SJIS)}catch{return!1}const o=s.length;if(o%2!==0)return!1;for(let l=0;l<o;l+=2){const c=s[l]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(r,s,o,l){let c=Number.MAX_SAFE_INTEGER,h=-1;for(let f=0;f<Mn.NUM_MASK_PATTERNS;f++){ve.buildMatrix(r,s,o,f,l);let p=this.calculateMaskPenalty(l);p<c&&(c=p,h=f)}return h}static chooseVersion(r,s){for(let o=1;o<=40;o++){const l=de.getVersionForNumber(o);if(ut.willFit(r,l,s))return l}throw new tt("Data too big")}static willFit(r,s,o){const l=s.getTotalCodewords(),h=s.getECBlocksForLevel(o).getTotalECCodewords(),f=l-h,p=(r+7)/8;return f>=p}static terminateBits(r,s){const o=r*8;if(s.getSize()>o)throw new tt("data bits cannot fit in the QR Code"+s.getSize()+" > "+o);for(let h=0;h<4&&s.getSize()<o;++h)s.appendBit(!1);const l=s.getSize()&7;if(l>0)for(let h=l;h<8;h++)s.appendBit(!1);const c=r-s.getSizeInBytes();for(let h=0;h<c;++h)s.appendBits(h&1?17:236,8);if(s.getSize()!==o)throw new tt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,o,l,c,h){if(l>=o)throw new tt("Block ID too large");const f=r%o,p=o-f,y=Math.floor(r/o),_=y+1,v=Math.floor(s/o),T=v+1,M=y-v,z=_-T;if(M!==z)throw new tt("EC bytes mismatch");if(o!==p+f)throw new tt("RS blocks mismatch");if(r!==(v+M)*p+(T+z)*f)throw new tt("Total bytes mismatch");l<p?(c[0]=v,h[0]=M):(c[0]=T,h[0]=z)}static interleaveWithECBytes(r,s,o,l){if(r.getSizeInBytes()!==o)throw new tt("Number of bits and data bytes does not match");let c=0,h=0,f=0;const p=new Array;for(let _=0;_<l;++_){const v=new Int32Array(1),T=new Int32Array(1);ut.getNumDataBytesAndNumECBytesForBlockID(s,o,l,_,v,T);const M=v[0],z=new Uint8Array(M);r.toBytes(8*c,z,0,M);const W=ut.generateECBytes(z,T[0]);p.push(new kl(z,W)),h=Math.max(h,M),f=Math.max(f,W.length),c+=v[0]}if(o!==c)throw new tt("Data bytes does not match offset");const y=new Q;for(let _=0;_<h;++_)for(const v of p){const T=v.getDataBytes();_<T.length&&y.appendBits(T[_],8)}for(let _=0;_<f;++_)for(const v of p){const T=v.getErrorCorrectionBytes();_<T.length&&y.appendBits(T[_],8)}if(s!==y.getSizeInBytes())throw new tt("Interleaving error: "+s+" and "+y.getSizeInBytes()+" differ.");return y}static generateECBytes(r,s){const o=r.length,l=new Int32Array(o+s);for(let h=0;h<o;h++)l[h]=r[h]&255;new Vi(We.QR_CODE_FIELD_256).encode(l,s);const c=new Uint8Array(s);for(let h=0;h<s;h++)c[h]=l[o+h];return c}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,o,l){const c=o.getCharacterCountBits(s);if(r>=1<<c)throw new tt(r+" is bigger than "+((1<<c)-1));l.appendBits(r,c)}static appendBytes(r,s,o,l){switch(s){case Ae.NUMERIC:ut.appendNumericBytes(r,o);break;case Ae.ALPHANUMERIC:ut.appendAlphanumericBytes(r,o);break;case Ae.BYTE:ut.append8BitBytes(r,o,l);break;case Ae.KANJI:ut.appendKanjiBytes(r,o);break;default:throw new tt("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=ut.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const o=r.length;let l=0;for(;l<o;){const c=ut.getDigit(r.charAt(l));if(l+2<o){const h=ut.getDigit(r.charAt(l+1)),f=ut.getDigit(r.charAt(l+2));s.appendBits(c*100+h*10+f,10),l+=3}else if(l+1<o){const h=ut.getDigit(r.charAt(l+1));s.appendBits(c*10+h,7),l+=2}else s.appendBits(c,4),l++}}static appendAlphanumericBytes(r,s){const o=r.length;let l=0;for(;l<o;){const c=ut.getAlphanumericCode(r.charCodeAt(l));if(c===-1)throw new tt;if(l+1<o){const h=ut.getAlphanumericCode(r.charCodeAt(l+1));if(h===-1)throw new tt;s.appendBits(c*45+h,11),l+=2}else s.appendBits(c,6),l++}}static append8BitBytes(r,s,o){let l;try{l=G.encode(r,o)}catch(c){throw new tt(c)}for(let c=0,h=l.length;c!==h;c++){const f=l[c];s.appendBits(f,8)}}static appendKanjiBytes(r,s){let o;try{o=G.encode(r,N.SJIS)}catch(c){throw new tt(c)}const l=o.length;for(let c=0;c<l;c+=2){const h=o[c]&255,f=o[c+1]&255,p=h<<8&4294967295|f;let y=-1;if(p>=33088&&p<=40956?y=p-33088:p>=57408&&p<=60351&&(y=p-49472),y===-1)throw new tt("Invalid byte sequence");const _=(y>>8)*192+(y&255);s.appendBits(_,13)}}static appendECI(r,s){s.appendBits(Ae.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}ut.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ut.DEFAULT_BYTE_MODE_ENCODING=N.UTF8.getName();class _r{write(r,s,o,l=null){if(r.length===0)throw new S("Found empty contents");if(s<0||o<0)throw new S("Requested dimensions are too small: "+s+"x"+o);let c=Ue.L,h=_r.QUIET_ZONE_SIZE;l!==null&&(l.get(Ft.ERROR_CORRECTION)!==void 0&&(c=Ue.fromString(l.get(Ft.ERROR_CORRECTION).toString())),l.get(Ft.MARGIN)!==void 0&&(h=Number.parseInt(l.get(Ft.MARGIN).toString(),10)));const f=ut.encode(r,c,l);return this.renderResult(f,s,o,h)}writeToDom(r,s,o,l,c=null){typeof r=="string"&&(r=document.querySelector(r));const h=this.write(s,o,l,c);r&&r.appendChild(h)}renderResult(r,s,o,l){const c=r.getMatrix();if(c===null)throw new Un;const h=c.getWidth(),f=c.getHeight(),p=h+l*2,y=f+l*2,_=Math.max(s,p),v=Math.max(o,y),T=Math.min(Math.floor(_/p),Math.floor(v/y)),M=Math.floor((_-h*T)/2),z=Math.floor((v-f*T)/2),W=this.createSVGElement(_,v);for(let K=0,J=z;K<f;K++,J+=T)for(let le=0,ue=M;le<h;le++,ue+=T)if(c.get(le,K)===1){const ie=this.createSvgRectElement(ue,J,T,T);W.appendChild(ie)}return W}createSVGElement(r,s){const o=document.createElementNS(_r.SVG_NS,"svg");return o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",s.toString()),o}createSvgRectElement(r,s,o,l){const c=document.createElementNS(_r.SVG_NS,"rect");return c.setAttributeNS(null,"x",r.toString()),c.setAttributeNS(null,"y",s.toString()),c.setAttributeNS(null,"height",o.toString()),c.setAttributeNS(null,"width",l.toString()),c.setAttributeNS(null,"fill","#000000"),c}}_r.QUIET_ZONE_SIZE=4,_r.SVG_NS="http://www.w3.org/2000/svg";class Kt{encode(r,s,o,l,c){if(r.length===0)throw new S("Found empty contents");if(s!==Ee.QR_CODE)throw new S("Can only encode QR_CODE, but got "+s);if(o<0||l<0)throw new S(`Requested dimensions are too small: ${o}x${l}`);let h=Ue.L,f=Kt.QUIET_ZONE_SIZE;c!==null&&(c.get(Ft.ERROR_CORRECTION)!==void 0&&(h=Ue.fromString(c.get(Ft.ERROR_CORRECTION).toString())),c.get(Ft.MARGIN)!==void 0&&(f=Number.parseInt(c.get(Ft.MARGIN).toString(),10)));const p=ut.encode(r,h,c);return Kt.renderResult(p,o,l,f)}static renderResult(r,s,o,l){const c=r.getMatrix();if(c===null)throw new Un;const h=c.getWidth(),f=c.getHeight(),p=h+l*2,y=f+l*2,_=Math.max(s,p),v=Math.max(o,y),T=Math.min(Math.floor(_/p),Math.floor(v/y)),M=Math.floor((_-h*T)/2),z=Math.floor((v-f*T)/2),W=new $e(_,v);for(let K=0,J=z;K<f;K++,J+=T)for(let le=0,ue=M;le<h;le++,ue+=T)c.get(le,K)===1&&W.setRegion(ue,J,T,T);return W}}Kt.QUIET_ZONE_SIZE=4;class Ll{encode(r,s,o,l,c){let h;switch(s){case Ee.QR_CODE:h=new Kt;break;default:throw new S("No encoder available for format "+s)}return h.encode(r,s,o,l,c)}}class ar extends ge{constructor(r,s,o,l,c,h,f,p){if(super(h,f),this.yuvData=r,this.dataWidth=s,this.dataHeight=o,this.left=l,this.top=c,l+h>s||c+f>o)throw new S("Crop rectangle does not fit within image data.");p&&this.reverseHorizontal(h,f)}getRow(r,s){if(r<0||r>=this.getHeight())throw new S("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const l=(r+this.top)*this.dataWidth+this.left;return q.arraycopy(this.yuvData,l,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const o=r*s,l=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return q.arraycopy(this.yuvData,c,l,0,o),l;for(let h=0;h<s;h++){const f=h*r;q.arraycopy(this.yuvData,c,l,f,r),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(r,s,o,l){return new ar(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,o,l,!1)}renderThumbnail(){const r=this.getWidth()/ar.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/ar.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(r*s),l=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let h=0;h<s;h++){const f=h*r;for(let p=0;p<r;p++){const y=l[c+p*ar.THUMBNAIL_SCALE_FACTOR]&255;o[f+p]=4278190080|y*65793}c+=this.dataWidth*ar.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/ar.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ar.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const o=this.yuvData;for(let l=0,c=this.top*this.dataWidth+this.left;l<s;l++,c+=this.dataWidth){const h=c+r/2;for(let f=c,p=c+r-1;f<h;f++,p--){const y=o[f];o[f]=o[p],o[p]=y}}}invert(){return new Ce(this)}}ar.THUMBNAIL_SCALE_FACTOR=2;class Yr extends ge{constructor(r,s,o,l,c,h,f){if(super(s,o),this.dataWidth=l,this.dataHeight=c,this.left=h,this.top=f,r.BYTES_PER_ELEMENT===4){const p=s*o,y=new Uint8ClampedArray(p);for(let _=0;_<p;_++){const v=r[_],T=v>>16&255,M=v>>7&510,z=v&255;y[_]=(T+M+z)/4&255}this.luminances=y}else this.luminances=r;if(l===void 0&&(this.dataWidth=s),c===void 0&&(this.dataHeight=o),h===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+o>this.dataHeight)throw new S("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new S("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const l=(r+this.top)*this.dataWidth+this.left;return q.arraycopy(this.luminances,l,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const o=r*s,l=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return q.arraycopy(this.luminances,c,l,0,o),l;for(let h=0;h<s;h++){const f=h*r;q.arraycopy(this.luminances,c,l,f,r),c+=this.dataWidth}return l}isCropSupported(){return!0}crop(r,s,o,l){return new Yr(this.luminances,o,l,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new Ce(this)}}class d extends N{static forName(r){return this.getCharacterSetECIByName(r)}}class E{}E.ISO_8859_1=N.ISO8859_1;class A{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class R{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class j{constructor(r){this.previous=r}getPrevious(){return this.previous}}class $ extends j{constructor(r,s,o){super(r),this.value=s,this.bitCount=o}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new $(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new $(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+B.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class ce extends ${constructor(r,s,o){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=o}appendTo(r,s){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):o===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+o],8)}addBinaryShift(r,s){return new ce(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function it(C,r,s){return new ce(C,r,s)}function Dt(C,r,s){return new $(C,r,s)}const je=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],xt=0,Wt=1,nn=2,Gn=3,kn=4,fa=new $(null,0,0),Xc=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ty(C){for(let r of C)k.fill(r,-1);return C[xt][kn]=0,C[Wt][kn]=0,C[Wt][xt]=28,C[Gn][kn]=0,C[nn][kn]=0,C[nn][xt]=15,C}const wd=Ty(k.createInt32Array(6,6));class Qr{constructor(r,s,o,l){this.token=r,this.mode=s,this.binaryShiftByteCount=o,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let o=this.bitCount,l=this.token;if(r!==this.mode){let h=Xc[this.mode][r];l=Dt(l,h&65535,h>>16),o+=h>>16}let c=r===nn?4:5;return l=Dt(l,s,c),new Qr(l,r,0,o+c)}shiftAndAppend(r,s){let o=this.token,l=this.mode===nn?4:5;return o=Dt(o,wd[this.mode][r],l),o=Dt(o,s,5),new Qr(o,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(r){let s=this.token,o=this.mode,l=this.bitCount;if(this.mode===kn||this.mode===nn){let f=Xc[o][xt];s=Dt(s,f&65535,f>>16),l+=f>>16,o=xt}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new Qr(s,o,this.binaryShiftByteCount+1,l+c);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(r+1)),h}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=it(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Qr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(Xc[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=Qr.calculateBinaryShiftCost(r)-Qr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let l=this.endBinaryShift(r.length).token;l!==null;l=l.getPrevious())s.unshift(l);let o=new Q;for(const l of s)l.appendTo(o,r);return o}toString(){return H.format("%s bits=%d bytes=%d",je[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Qr.INITIAL_STATE=new Qr(fa,xt,0,0);function Sy(C){const r=H.getCharCode(" "),s=H.getCharCode("."),o=H.getCharCode(",");C[xt][r]=1;const l=H.getCharCode("Z"),c=H.getCharCode("A");for(let T=c;T<=l;T++)C[xt][T]=T-c+2;C[Wt][r]=1;const h=H.getCharCode("z"),f=H.getCharCode("a");for(let T=f;T<=h;T++)C[Wt][T]=T-f+2;C[nn][r]=1;const p=H.getCharCode("9"),y=H.getCharCode("0");for(let T=y;T<=p;T++)C[nn][T]=T-y+2;C[nn][o]=12,C[nn][s]=13;const _=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let T=0;T<_.length;T++)C[Gn][H.getCharCode(_[T])]=T;const v=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let T=0;T<v.length;T++)H.getCharCode(v[T])>0&&(C[kn][H.getCharCode(v[T])]=T);return C}const Kc=Sy(k.createInt32Array(5,256));class da{constructor(r){this.text=r}encode(){const r=H.getCharCode(" "),s=H.getCharCode(`
`);let o=R.singletonList(Qr.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let h,f=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case H.getCharCode("\r"):h=f===s?2:0;break;case H.getCharCode("."):h=f===r?3:0;break;case H.getCharCode(","):h=f===r?4:0;break;case H.getCharCode(":"):h=f===r?5:0;break;default:h=0}h>0?(o=da.updateStateListForPair(o,c,h),c++):o=this.updateStateListForChar(o,c)}return R.min(o,(c,h)=>c.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const o=[];for(let l of r)this.updateStateForChar(l,s,o);return da.simplifyStates(o)}updateStateForChar(r,s,o){let l=this.text[s]&255,c=Kc[r.getMode()][l]>0,h=null;for(let f=0;f<=kn;f++){let p=Kc[f][l];if(p>0){if(h==null&&(h=r.endBinaryShift(s)),!c||f===r.getMode()||f===nn){const y=h.latchAndAppend(f,p);o.push(y)}if(!c&&wd[r.getMode()][f]>=0){const y=h.shiftAndAppend(f,p);o.push(y)}}}if(r.getBinaryShiftByteCount()>0||Kc[r.getMode()][l]===0){let f=r.addBinaryShiftChar(s);o.push(f)}}static updateStateListForPair(r,s,o){const l=[];for(let c of r)this.updateStateForPair(c,s,o,l);return this.simplifyStates(l)}static updateStateForPair(r,s,o,l){let c=r.endBinaryShift(s);if(l.push(c.latchAndAppend(kn,o)),r.getMode()!==kn&&l.push(c.shiftAndAppend(kn,o)),o===3||o===4){let h=c.latchAndAppend(nn,16-o).latchAndAppend(nn,1);l.push(h)}if(r.getBinaryShiftByteCount()>0){let h=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);l.push(h)}}static simplifyStates(r){let s=[];for(const o of r){let l=!0;for(const c of s){if(c.isBetterThanOrEqualTo(o)){l=!1;break}o.isBetterThanOrEqualTo(c)&&(s=s.filter(h=>h!==c))}l&&s.push(o)}return s}}class qe{constructor(){}static encodeBytes(r){return qe.encode(r,qe.DEFAULT_EC_PERCENT,qe.DEFAULT_AZTEC_LAYERS)}static encode(r,s,o){let l=new da(r).encode(),c=B.truncDivision(l.getSize()*s,100)+11,h=l.getSize()+c,f,p,y,_,v;if(o!==qe.DEFAULT_AZTEC_LAYERS){if(f=o<0,p=Math.abs(o),p>(f?qe.MAX_NB_BITS_COMPACT:qe.MAX_NB_BITS))throw new S(H.format("Illegal value %s for layers",o));y=qe.totalBitsInLayer(p,f),_=qe.WORD_SIZE[p];let ie=y-y%_;if(v=qe.stuffBits(l,_),v.getSize()+c>ie)throw new S("Data to large for user specified layer");if(f&&v.getSize()>_*64)throw new S("Data to large for user specified layer")}else{_=0,v=null;for(let ie=0;;ie++){if(ie>qe.MAX_NB_BITS)throw new S("Data too large for an Aztec code");if(f=ie<=3,p=f?ie+1:ie,y=qe.totalBitsInLayer(p,f),h>y)continue;(v==null||_!==qe.WORD_SIZE[p])&&(_=qe.WORD_SIZE[p],v=qe.stuffBits(l,_));let ze=y-y%_;if(!(f&&v.getSize()>_*64)&&v.getSize()+c<=ze)break}}let T=qe.generateCheckWords(v,y,_),M=v.getSize()/_,z=qe.generateModeMessage(f,p,M),W=(f?11:14)+p*4,K=new Int32Array(W),J;if(f){J=W;for(let ie=0;ie<K.length;ie++)K[ie]=ie}else{J=W+1+2*B.truncDivision(B.truncDivision(W,2)-1,15);let ie=B.truncDivision(W,2),ze=B.truncDivision(J,2);for(let ke=0;ke<ie;ke++){let jn=ke+B.truncDivision(ke,15);K[ie-ke-1]=ze-jn-1,K[ie+ke]=ze+jn+1}}let le=new $e(J);for(let ie=0,ze=0;ie<p;ie++){let ke=(p-ie)*4+(f?9:12);for(let jn=0;jn<ke;jn++){let br=jn*2;for(let Xn=0;Xn<2;Xn++)T.get(ze+br+Xn)&&le.set(K[ie*2+Xn],K[ie*2+jn]),T.get(ze+ke*2+br+Xn)&&le.set(K[ie*2+jn],K[W-1-ie*2-Xn]),T.get(ze+ke*4+br+Xn)&&le.set(K[W-1-ie*2-Xn],K[W-1-ie*2-jn]),T.get(ze+ke*6+br+Xn)&&le.set(K[W-1-ie*2-jn],K[ie*2+Xn])}ze+=ke*8}if(qe.drawModeMessage(le,f,J,z),f)qe.drawBullsEye(le,B.truncDivision(J,2),5);else{qe.drawBullsEye(le,B.truncDivision(J,2),7);for(let ie=0,ze=0;ie<B.truncDivision(W,2)-1;ie+=15,ze+=16)for(let ke=B.truncDivision(J,2)&1;ke<J;ke+=2)le.set(B.truncDivision(J,2)-ze,ke),le.set(B.truncDivision(J,2)+ze,ke),le.set(ke,B.truncDivision(J,2)-ze),le.set(ke,B.truncDivision(J,2)+ze)}let ue=new A;return ue.setCompact(f),ue.setSize(J),ue.setLayers(p),ue.setCodeWords(M),ue.setMatrix(le),ue}static drawBullsEye(r,s,o){for(let l=0;l<o;l+=2)for(let c=s-l;c<=s+l;c++)r.set(c,s-l),r.set(c,s+l),r.set(s-l,c),r.set(s+l,c);r.set(s-o,s-o),r.set(s-o+1,s-o),r.set(s-o,s-o+1),r.set(s+o,s-o),r.set(s+o,s-o+1),r.set(s+o,s+o-1)}static generateModeMessage(r,s,o){let l=new Q;return r?(l.appendBits(s-1,2),l.appendBits(o-1,6),l=qe.generateCheckWords(l,28,4)):(l.appendBits(s-1,5),l.appendBits(o-1,11),l=qe.generateCheckWords(l,40,4)),l}static drawModeMessage(r,s,o,l){let c=B.truncDivision(o,2);if(s)for(let h=0;h<7;h++){let f=c-3+h;l.get(h)&&r.set(f,c-5),l.get(h+7)&&r.set(c+5,f),l.get(20-h)&&r.set(f,c+5),l.get(27-h)&&r.set(c-5,f)}else for(let h=0;h<10;h++){let f=c-5+h+B.truncDivision(h,5);l.get(h)&&r.set(f,c-7),l.get(h+10)&&r.set(c+7,f),l.get(29-h)&&r.set(f,c+7),l.get(39-h)&&r.set(c-7,f)}}static generateCheckWords(r,s,o){let l=r.getSize()/o,c=new Vi(qe.getGF(o)),h=B.truncDivision(s,o),f=qe.bitsToWords(r,o,h);c.encode(f,h-l);let p=s%o,y=new Q;y.appendBits(0,p);for(const _ of Array.from(f))y.appendBits(_,o);return y}static bitsToWords(r,s,o){let l=new Int32Array(o),c,h;for(c=0,h=r.getSize()/s;c<h;c++){let f=0;for(let p=0;p<s;p++)f|=r.get(c*s+p)?1<<s-p-1:0;l[c]=f}return l}static getGF(r){switch(r){case 4:return We.AZTEC_PARAM;case 6:return We.AZTEC_DATA_6;case 8:return We.AZTEC_DATA_8;case 10:return We.AZTEC_DATA_10;case 12:return We.AZTEC_DATA_12;default:throw new S("Unsupported word size "+r)}}static stuffBits(r,s){let o=new Q,l=r.getSize(),c=(1<<s)-2;for(let h=0;h<l;h+=s){let f=0;for(let p=0;p<s;p++)(h+p>=l||r.get(h+p))&&(f|=1<<s-1-p);(f&c)===c?(o.appendBits(f&c,s),h--):f&c?o.appendBits(f,s):(o.appendBits(f|1,s),h--)}return o}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}qe.DEFAULT_EC_PERCENT=33,qe.DEFAULT_AZTEC_LAYERS=0,qe.MAX_NB_BITS=32,qe.MAX_NB_BITS_COMPACT=4,qe.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Bl{encode(r,s,o,l){return this.encodeWithHints(r,s,o,l,null)}encodeWithHints(r,s,o,l,c){let h=E.ISO_8859_1,f=qe.DEFAULT_EC_PERCENT,p=qe.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(Ft.CHARACTER_SET)&&(h=d.forName(c.get(Ft.CHARACTER_SET).toString())),c.has(Ft.ERROR_CORRECTION)&&(f=B.parseInt(c.get(Ft.ERROR_CORRECTION).toString())),c.has(Ft.AZTEC_LAYERS)&&(p=B.parseInt(c.get(Ft.AZTEC_LAYERS).toString()))),Bl.encodeLayers(r,s,o,l,h,f,p)}static encodeLayers(r,s,o,l,c,h,f){if(s!==Ee.AZTEC)throw new S("Can only encode AZTEC, but got "+s);let p=qe.encode(H.getBytes(r,c),h,f);return Bl.renderResult(p,o,l)}static renderResult(r,s,o){let l=r.getMatrix();if(l==null)throw new Un;let c=l.getWidth(),h=l.getHeight(),f=Math.max(s,c),p=Math.max(o,h),y=Math.min(f/c,p/h),_=(f-c*y)/2,v=(p-h*y)/2,T=new $e(f,p);for(let M=0,z=v;M<h;M++,z+=y)for(let W=0,K=_;W<c;W++,K+=y)l.get(W,M)&&T.setRegion(K,z,y,y);return T}}n.AbstractExpandedDecoder=Mi,n.ArgumentException=I,n.ArithmeticException=Ni,n.AztecCode=A,n.AztecCodeReader=ro,n.AztecCodeWriter=Bl,n.AztecDecoder=at,n.AztecDetector=sa,n.AztecDetectorResult=to,n.AztecEncoder=qe,n.AztecHighLevelEncoder=da,n.AztecPoint=un,n.BarcodeFormat=Ee,n.Binarizer=Y,n.BinaryBitmap=P,n.BitArray=Q,n.BitMatrix=$e,n.BitSource=ao,n.BrowserAztecCodeReader=ps,n.BrowserBarcodeReader=Uc,n.BrowserCodeReader=nt,n.BrowserDatamatrixCodeReader=Hc,n.BrowserMultiFormatReader=Pl,n.BrowserPDF417Reader=Ml,n.BrowserQRCodeReader=ha,n.BrowserQRCodeSvgWriter=_r,n.CharacterSetECI=N,n.ChecksumException=U,n.Code128Reader=fe,n.Code39Reader=Nt,n.DataMatrixDecodedBitStreamParser=Xr,n.DataMatrixReader=Nr,n.DecodeHintType=re,n.DecoderResult=gs,n.DefaultGridSampler=ln,n.DetectorResult=eo,n.EAN13Reader=Rr,n.EncodeHintType=Ft,n.Exception=w,n.FormatException=D,n.GenericGF=We,n.GenericGFPoly=Qt,n.GlobalHistogramBinarizer=Ct,n.GridSampler=no,n.GridSamplerInstance=tr,n.HTMLCanvasElementLuminanceSource=Re,n.HybridBinarizer=Se,n.ITFReader=rt,n.IllegalArgumentException=S,n.IllegalStateException=Un,n.InvertedLuminanceSource=Ce,n.LuminanceSource=ge,n.MathUtils=Ve,n.MultiFormatOneDReader=jr,n.MultiFormatReader=Fi,n.MultiFormatWriter=Ll,n.NotFoundException=ee,n.OneDReader=Rt,n.PDF417DecodedBitStreamParser=Z,n.PDF417DecoderErrorCorrection=_s,n.PDF417Reader=tn,n.PDF417ResultMetadata=ua,n.PerspectiveTransform=lt,n.PlanarYUVLuminanceSource=ar,n.QRCodeByteMatrix=Ns,n.QRCodeDataMask=hn,n.QRCodeDecodedBitStreamParser=mt,n.QRCodeDecoderErrorCorrectionLevel=Ue,n.QRCodeDecoderFormatInformation=zt,n.QRCodeEncoder=ut,n.QRCodeEncoderQRCode=Mn,n.QRCodeMaskUtil=wt,n.QRCodeMatrixUtil=ve,n.QRCodeMode=Ae,n.QRCodeReader=Kr,n.QRCodeVersion=de,n.QRCodeWriter=Kt,n.RGBLuminanceSource=Yr,n.RSS14Reader=Je,n.RSSExpandedReader=ne,n.ReaderException=Ss,n.ReedSolomonDecoder=Oi,n.ReedSolomonEncoder=Vi,n.ReedSolomonException=Hr,n.Result=pt,n.ResultMetadataType=Xt,n.ResultPoint=we,n.StringUtils=H,n.UnsupportedOperationException=F,n.VideoInputDevice=ft,n.WhiteRectangleDetector=er,n.WriterException=tt,n.ZXingArrays=k,n.ZXingCharset=d,n.ZXingInteger=B,n.ZXingStandardCharsets=E,n.ZXingStringBuilder=L,n.ZXingStringEncoding=G,n.ZXingSystem=q,n.createAbstractExpandedDecoder=Rl,Object.defineProperty(n,"__esModule",{value:!0})})})(vf,vf.exports);var _t=vf.exports;const lE=Dy(_t),uE=Oy({__proto__:null,default:lE},[_t]);var D0=function(){function t(e,n,i){if(this.formatMap=new Map([[me.QR_CODE,_t.BarcodeFormat.QR_CODE],[me.AZTEC,_t.BarcodeFormat.AZTEC],[me.CODABAR,_t.BarcodeFormat.CODABAR],[me.CODE_39,_t.BarcodeFormat.CODE_39],[me.CODE_93,_t.BarcodeFormat.CODE_93],[me.CODE_128,_t.BarcodeFormat.CODE_128],[me.DATA_MATRIX,_t.BarcodeFormat.DATA_MATRIX],[me.MAXICODE,_t.BarcodeFormat.MAXICODE],[me.ITF,_t.BarcodeFormat.ITF],[me.EAN_13,_t.BarcodeFormat.EAN_13],[me.EAN_8,_t.BarcodeFormat.EAN_8],[me.PDF_417,_t.BarcodeFormat.PDF_417],[me.RSS_14,_t.BarcodeFormat.RSS_14],[me.RSS_EXPANDED,_t.BarcodeFormat.RSS_EXPANDED],[me.UPC_A,_t.BarcodeFormat.UPC_A],[me.UPC_E,_t.BarcodeFormat.UPC_E],[me.UPC_EAN_EXTENSION,_t.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!uE)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var a=this.createZXingFormats(e),u=new Map;u.set(_t.DecodeHintType.POSSIBLE_FORMATS,a),u.set(_t.DecodeHintType.TRY_HARDER,!1),this.hints=u}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,a){try{i(n.decode(e))}catch(u){a(u)}})},t.prototype.decode=function(e){var n=new _t.MultiFormatReader(this.verbose,this.hints),i=new _t.HTMLCanvasElementLuminanceSource(e),a=new _t.BinaryBitmap(new _t.HybridBinarizer(i)),u=n.decode(a);return{text:u.text,format:Km.create(this.toHtml5QrcodeSupportedFormats(u.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,a){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,a=e;i<a.length;i++){var u=a[i];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.logError("".concat(u," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),cE=function(t,e,n,i){function a(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function m(I){try{w(i.next(I))}catch(S){g(S)}}function x(I){try{w(i.throw(I))}catch(S){g(S)}}function w(I){I.done?u(I.value):a(I.value).then(m,x)}w((i=i.apply(t,e||[])).next())})},hE=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,g;return g={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function m(w){return function(I){return x([w,I])}}function x(w){if(i)throw new TypeError("Generator is already executing.");for(;g&&(g=0,w[0]&&(n=0)),n;)try{if(i=1,a&&(u=w[0]&2?a.return:w[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,w[1])).done)return u;switch(a=0,u&&(w=[w[0]&2,u.value]),w[0]){case 0:case 1:u=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,a=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!u||w[1]>u[0]&&w[1]<u[3])){n.label=w[1];break}if(w[0]===6&&n.label<u[1]){n.label=u[1],u=w;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(w);break}u[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(I){w=[6,I],a=0}finally{i=u=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},b0=function(){function t(e,n,i){if(this.formatMap=new Map([[me.QR_CODE,"qr_code"],[me.AZTEC,"aztec"],[me.CODABAR,"codabar"],[me.CODE_39,"code_39"],[me.CODE_93,"code_93"],[me.CODE_128,"code_128"],[me.DATA_MATRIX,"data_matrix"],[me.ITF,"itf"],[me.EAN_13,"ean_13"],[me.EAN_8,"ean_8"],[me.PDF_417,"pdf417"],[me.UPC_A,"upc_a"],[me.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var a=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return cE(this,void 0,void 0,function(){var n,i;return hE(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:Km.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,a=0,u=e;a<u.length;a++){var g=u[a],m=g.boundingBox.width*g.boundingBox.height;m>i&&(i=m,n=g)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,a=e;i<a.length;i++){var u=a[i];this.formatMap.has(u)?n.push(this.formatMap.get(u)):this.logger.warn("".concat(u," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,a){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),P0=function(t,e,n,i){function a(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function m(I){try{w(i.next(I))}catch(S){g(S)}}function x(I){try{w(i.throw(I))}catch(S){g(S)}}function w(I){I.done?u(I.value):a(I.value).then(m,x)}w((i=i.apply(t,e||[])).next())})},M0=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,g;return g={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function m(w){return function(I){return x([w,I])}}function x(w){if(i)throw new TypeError("Generator is already executing.");for(;g&&(g=0,w[0]&&(n=0)),n;)try{if(i=1,a&&(u=w[0]&2?a.return:w[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,w[1])).done)return u;switch(a=0,u&&(w=[w[0]&2,u.value]),w[0]){case 0:case 1:u=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,a=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!u||w[1]>u[0]&&w[1]<u[3])){n.label=w[1];break}if(w[0]===6&&n.label<u[1]){n.label=u[1],u=w;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(w);break}u[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(I){w=[6,I],a=0}finally{i=u=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},fE=function(){function t(e,n,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&b0.isSupported()?(this.primaryDecoder=new b0(e,i,a),this.secondaryDecoder=new D0(e,i,a)):this.primaryDecoder=new D0(e,i,a)}return t.prototype.decodeAsync=function(e){return P0(this,void 0,void 0,function(){var n;return M0(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return P0(this,void 0,void 0,function(){var n,i;return M0(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var a=i[n];e+=a}var u=e/this.executionResults.length;console.log("".concat(u," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),V1=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ku=function(t,e,n,i){function a(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function m(I){try{w(i.next(I))}catch(S){g(S)}}function x(I){try{w(i.throw(I))}catch(S){g(S)}}function w(I){I.done?u(I.value):a(I.value).then(m,x)}w((i=i.apply(t,e||[])).next())})},qu=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,g;return g={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function m(w){return function(I){return x([w,I])}}function x(w){if(i)throw new TypeError("Generator is already executing.");for(;g&&(g=0,w[0]&&(n=0)),n;)try{if(i=1,a&&(u=w[0]&2?a.return:w[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,w[1])).done)return u;switch(a=0,u&&(w=[w[0]&2,u.value]),w[0]){case 0:case 1:u=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,a=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!u||w[1]>u[0]&&w[1]<u[3])){n.label=w[1];break}if(w[0]===6&&n.label<u[1]){n.label=u[1],u=w;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(w);break}u[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(I){w=[6,I],a=0}finally{i=u=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Ym=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),dE=function(t){V1(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var a={advanced:[i]};return this.track.applyConstraints(a)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Ym),gE=function(t){V1(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(dE),pE=function(t){V1(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(Ym),mE=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new gE(this.track)},t.prototype.torchFeature=function(){return new pE(this.track)},t}(),yE=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,a=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,a),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,a){return Ku(this,void 0,void 0,function(){var u,g;return qu(this,function(m){switch(m.label){case 0:return u=new t(e,n,a),i.aspectRatio?(g={aspectRatio:i.aspectRatio},[4,u.getFirstTrackOrFail().applyConstraints(g)]):[3,2];case 1:m.sent(),m.label=2;case 2:return u.setupSurface(),[2,u]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Ku(this,void 0,void 0,function(){return qu(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var a=e.mediaStream.getVideoTracks(),u=a.length,g=0;e.mediaStream.getVideoTracks().forEach(function(m){e.mediaStream.removeTrack(m),m.stop(),++g,g>=u&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new mE(this.getFirstTrackOrFail())},t}(),wE=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return Ku(this,void 0,void 0,function(){return qu(this,function(a){return[2,yE.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return Ku(this,void 0,void 0,function(){var n,i;return qu(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=a.sent(),[2,new t(i)]}})})},t}(),k0=function(t,e,n,i){function a(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function m(I){try{w(i.next(I))}catch(S){g(S)}}function x(I){try{w(i.throw(I))}catch(S){g(S)}}function w(I){I.done?u(I.value):a(I.value).then(m,x)}w((i=i.apply(t,e||[])).next())})},L0=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,g;return g={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function m(w){return function(I){return x([w,I])}}function x(w){if(i)throw new TypeError("Generator is already executing.");for(;g&&(g=0,w[0]&&(n=0)),n;)try{if(i=1,a&&(u=w[0]&2?a.return:w[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,w[1])).done)return u;switch(a=0,u&&(w=[w[0]&2,u.value]),w[0]){case 0:case 1:u=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,a=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!u||w[1]>u[0]&&w[1]<u[3])){n.label=w[1];break}if(w[0]===6&&n.label<u[1]){n.label=u[1],u=w;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(w);break}u[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(I){w=[6,I],a=0}finally{i=u=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},xE=function(){function t(){}return t.failIfNotSupported=function(){return k0(this,void 0,void 0,function(){return L0(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return k0(this,void 0,void 0,function(){return L0(this,function(n){return[2,wE.create(e)]})})},t}(),EE=function(t,e,n,i){function a(u){return u instanceof n?u:new n(function(g){g(u)})}return new(n||(n=Promise))(function(u,g){function m(I){try{w(i.next(I))}catch(S){g(S)}}function x(I){try{w(i.throw(I))}catch(S){g(S)}}function w(I){I.done?u(I.value):a(I.value).then(m,x)}w((i=i.apply(t,e||[])).next())})},_E=function(t,e){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,g;return g={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function m(w){return function(I){return x([w,I])}}function x(w){if(i)throw new TypeError("Generator is already executing.");for(;g&&(g=0,w[0]&&(n=0)),n;)try{if(i=1,a&&(u=w[0]&2?a.return:w[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,w[1])).done)return u;switch(a=0,u&&(w=[w[0]&2,u.value]),w[0]){case 0:case 1:u=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,a=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!u||w[1]>u[0]&&w[1]<u[3])){n.label=w[1];break}if(w[0]===6&&n.label<u[1]){n.label=u[1],u=w;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(w);break}u[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(t,n)}catch(I){w=[6,I],a=0}finally{i=u=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},AE=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=No.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=No.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return EE(this,void 0,void 0,function(){var e,n,i,a,u,g,m;return _E(this,function(x){switch(x.label){case 0:return e=function(w){for(var I=w.getVideoTracks(),S=0,P=I;S<P.length;S++){var U=P[S];U.enabled=!1,U.stop(),w.removeTrack(U)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=x.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=x.sent(),a=[],u=0,g=i;u<g.length;u++)m=g[u],m.kind==="videoinput"&&a.push({id:m.deviceId,label:m.label});return e(n),[2,a]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(u){for(var g=[],m=0,x=u;m<x.length;m++){var w=x[m];w.kind==="video"&&g.push({id:w.id,label:w.label})}e(g)},a=MediaStreamTrack;a.getSources(i)})},t}(),Vt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Vt||(Vt={}));var CE=function(){function t(){this.state=Vt.NOT_STARTED,this.onGoingTransactionNewState=Vt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Vt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Vt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Vt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Vt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Vt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Vt.UNKNOWN:throw"Transition from unknown is not allowed";case Vt.NOT_STARTED:this.failIfNewStateIs(e,[Vt.PAUSED]);break;case Vt.SCANNING:break;case Vt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,a=n;i<a.length;i++){var u=a[i];if(e===u)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),vE=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Vt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Vt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Vt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Vt.PAUSED},t}(),IE=function(){function t(){}return t.create=function(){return new vE(new CE)},t}(),TE=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),ur=function(t){TE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(sE),SE=function(){function t(e,n){this.logger=n,this.fps=ur.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=ur.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?qm.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!di(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),RE=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new aE(this.verbose),this.qrcode=new fE(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=IE.create()}return t.prototype.start=function(e,n,i,a){var u=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var g;a?g=a:g=this.verbose?this.logger.log:function(){};var m=SE.create(n,this.logger);this.clearElement();var x=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?x=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=x,I=document.getElementById(this.elementId);I.clientWidth?I.clientWidth:ur.DEFAULT_WIDTH,I.style.position="relative",this.shouldScan=!0,this.element=I;var S=this,P=this.stateManagerProxy.startTransition(Vt.SCANNING);return new Promise(function(U,Y){var q=w?m.videoConstraints:S.createVideoConstraints(e);if(!q){P.cancel(),Y("videoConstraints should be defined");return}var te={};(!w||m.aspectRatio)&&(te.aspectRatio=m.aspectRatio);var V={onRenderSurfaceReady:function(k,B){S.setupUi(k,B,m),S.isScanning=!0,S.foreverScan(m,i,g)}};xE.failIfNotSupported().then(function(k){k.create(q).then(function(B){return B.render(u.element,te,V).then(function(Q){S.renderedCamera=Q,P.execute(),U(null)}).catch(function(Q){P.cancel(),Y(Q)})}).catch(function(B){P.cancel(),Y(No.errorGettingUserMedia(B))})}).catch(function(k){P.cancel(),Y(No.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Vt.PAUSED),this.showPausedState(),(di(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Vt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Vt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var u=document.getElementById(ur.SHADED_REGION_ELEMENT_ID);u&&e.element.removeChild(u)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(di(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,u){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var g=new Image;g.onload=function(){var m=g.width,x=g.height,w=document.getElementById(i.elementId),I=w.clientWidth?w.clientWidth:ur.DEFAULT_WIDTH,S=Math.max(w.clientHeight?w.clientHeight:x,ur.FILE_SCAN_MIN_HEIGHT),P=i.computeCanvasDrawConfig(m,x,I,S);if(n){var U=i.createCanvasElement(I,S,"qr-canvas-visible");U.style.display="inline-block",w.appendChild(U);var Y=U.getContext("2d");if(!Y)throw"Unable to get 2d context from canvas";Y.canvas.width=I,Y.canvas.height=S,Y.drawImage(g,0,0,m,x,P.x,P.y,P.width,P.height)}var q=ur.FILE_SCAN_HIDDEN_CANVAS_PADDING,te=Math.max(g.width,P.width),V=Math.max(g.height,P.height),k=te+2*q,B=V+2*q,Q=i.createCanvasElement(k,B);w.appendChild(Q);var he=Q.getContext("2d");if(!he)throw"Unable to get 2d context from canvas";he.canvas.width=k,he.canvas.height=B,he.drawImage(g,0,0,m,x,q,q,te,V);try{i.qrcode.decodeRobustlyAsync(Q).then(function(re){a(O0.createFromQrcodeResult(re))}).catch(u)}catch(re){u("QR code parse error, error = ".concat(re))}},g.onerror=u,g.onabort=u,g.onstalled=u,g.onsuspend=u,g.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return AE.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!qm.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[me.QR_CODE,me.AZTEC,me.CODABAR,me.CODE_39,me.CODE_93,me.CODE_128,me.DATA_MATRIX,me.MAXICODE,me.ITF,me.EAN_13,me.EAN_8,me.PDF_417,me.RSS_14,me.RSS_EXPANDED,me.UPC_A,me.UPC_E,me.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,u=e.formatsToSupport;a<u.length;a++){var g=u[a];iE(g)?i.push(g):this.logger.warn("Invalid format: ".concat(g," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(di(e))return!0;if(!di(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(di(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return di(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var a=this,u=i.qrbox;this.validateQrboxConfig(u);var g=this.toQrdimensions(e,n,u),m=function(w){if(w<ur.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ur.MIN_QR_BOX_SIZE,"px.")},x=function(w){return w>e&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=e),w};m(g.width),m(g.height),g.width=x(g.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var a=di(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(a);var u=this.toQrdimensions(e,n,a);u.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var g=i.isShadedBoxEnabled()&&u.height<=n,m={x:0,y:0,width:e,height:n},x=g?this.getShadedRegionBounds(e,n,u):m,w=this.createCanvasElement(x.width,x.height),I={willReadFrequently:!0},S=w.getContext("2d",I);S.canvas.width=x.width,S.canvas.height=x.height,this.element.append(w),g&&this.possiblyInsertShadingElement(this.element,e,n,u),this.createScannerPausedUiElement(this.element),this.qrRegion=x,this.context=S,this.canvasElement=w},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=No.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return e(a.text,O0.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var u=No.codeParseError(a);return n(u,oE.createFrom(u)),!1})},t.prototype.foreverScan=function(e,n,i){var a=this;if(this.shouldScan&&this.renderedCamera){var u=this.renderedCamera.getSurface(),g=u.videoWidth/u.clientWidth,m=u.videoHeight/u.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var x=this.qrRegion.width*g,w=this.qrRegion.height*m,I=this.qrRegion.x*g,S=this.qrRegion.y*m;this.context.drawImage(u,I,S,x,w,0,0,this.qrRegion.width,this.qrRegion.height);var P=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(e,n,i)},a.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(U){!U&&e.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,i).finally(function(){P()})):P()}).catch(function(U){a.logger.logError("Error happend while scanning context",U),P()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",a={user:!0,environment:!0},u="exact",g=function(Y){if(Y in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(Y,"'")},m=Object.keys(e);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var x=Object.keys(e)[0];if(x!==n&&x!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(x===n){var w=e.facingMode;if(typeof w=="string"){if(g(w))return{facingMode:w}}else if(typeof w=="object")if(u in w){if(g(w["".concat(u)]))return{facingMode:{exact:w["".concat(u)]}}}else throw"'facingMode' should be string or object with"+" ".concat(u," as key.");else{var I=typeof w;throw"Invalid type of 'facingMode' = ".concat(I)}}else{var S=e.deviceId;if(typeof S=="string")return{deviceId:S};if(typeof S=="object"){if(u in S)return{deviceId:{exact:S["".concat(u)]}};throw"'deviceId' should be string or object with"+" ".concat(u," as key.")}else{var P=typeof S;throw"Invalid type of 'deviceId' = ".concat(P)}}}var U=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(U)},t.prototype.computeCanvasDrawConfig=function(e,n,i,a){if(e<=i&&n<=a){var u=(i-e)/2,g=(a-n)/2;return{x:u,y:g,width:e,height:n}}else{var m=e,x=n;return e>i&&(n=i/e*n,e=i),n>a&&(e=a/n*e,n=a),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(x)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,a)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?ur.BORDER_SHADER_MATCH_COLOR:ur.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var a=e,u=n,g=document.createElement("canvas");return g.style.width="".concat(a,"px"),g.style.height="".concat(u,"px"),g.style.display="none",g.id=di(i)?"qr-canvas":i,g},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,a){if(!(n-a.width<1||i-a.height<1)){var u=document.createElement("div");u.style.position="absolute";var g=(n-a.width)/2,m=(i-a.height)/2;if(u.style.borderLeft="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderRight="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),u.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),u.style.boxSizing="border-box",u.style.top="0px",u.style.bottom="0px",u.style.left="0px",u.style.right="0px",u.id="".concat(ur.SHADED_REGION_ELEMENT_ID),n-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var x=5,w=40;this.insertShaderBorders(u,w,x,-x,null,0,!0),this.insertShaderBorders(u,w,x,-x,null,0,!1),this.insertShaderBorders(u,w,x,null,-x,0,!0),this.insertShaderBorders(u,w,x,null,-x,0,!1),this.insertShaderBorders(u,x,w+x,-x,null,-x,!0),this.insertShaderBorders(u,x,w+x,null,-x,-x,!0),this.insertShaderBorders(u,x,w+x,-x,null,-x,!1),this.insertShaderBorders(u,x,w+x,null,-x,-x,!1),this.hasBorderShaders=!0}e.append(u)}},t.prototype.insertShaderBorders=function(e,n,i,a,u,g,m){var x=document.createElement("div");x.style.position="absolute",x.style.backgroundColor=ur.BORDER_SHADER_DEFAULT_COLOR,x.style.width="".concat(n,"px"),x.style.height="".concat(i,"px"),a!==null&&(x.style.top="".concat(a,"px")),u!==null&&(x.style.bottom="".concat(u,"px")),m?x.style.left="".concat(g,"px"):x.style.right="".concat(g,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(x),e.appendChild(x)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),B0;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(B0||(B0={}));var F0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},NE=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const u=t[n++];e[i++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=t[n++],g=t[n++],m=t[n++],x=((a&7)<<18|(u&63)<<12|(g&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(x>>10)),e[i++]=String.fromCharCode(56320+(x&1023))}else{const u=t[n++],g=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(u&63)<<6|g&63)}}return e.join("")},Zm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const u=t[a],g=a+1<t.length,m=g?t[a+1]:0,x=a+2<t.length,w=x?t[a+2]:0,I=u>>2,S=(u&3)<<4|m>>4;let P=(m&15)<<2|w>>6,U=w&63;x||(U=64,g||(P=64)),i.push(n[I],n[S],n[P],n[U])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const u=n[t.charAt(a++)],m=a<t.length?n[t.charAt(a)]:0;++a;const w=a<t.length?n[t.charAt(a)]:64;++a;const S=a<t.length?n[t.charAt(a)]:64;if(++a,u==null||m==null||w==null||S==null)throw new OE;const P=u<<2|m>>4;if(i.push(P),w!==64){const U=m<<4&240|w>>2;if(i.push(U),S!==64){const Y=w<<6&192|S;i.push(Y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class OE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DE=function(t){const e=Qm(t);return Zm.encodeByteArray(e,!0)},Yu=function(t){return DE(t).replace(/\./g,"")},bE=function(t){try{return Zm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=()=>PE().__FIREBASE_DEFAULTS__,kE=()=>{if(typeof process>"u"||typeof F0>"u")return;const t=F0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bE(t[1]);return e&&JSON.parse(e)},U1=()=>{try{return ME()||kE()||LE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BE=t=>{var e,n;return(n=(e=U1())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},FE=t=>{const e=BE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},$m=()=>{var t;return(t=U1())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,u=t.sub||t.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const g=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Yu(JSON.stringify(n)),Yu(JSON.stringify(g)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HE(){var t;const e=(t=U1())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WE(){return!HE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GE(){try{return typeof indexedDB=="object"}catch{return!1}}function jE(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var u;e(((u=a.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="FirebaseError";class ta extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=XE,Object.setPrototypeOf(this,ta.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jm.prototype.create)}}class Jm{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,u=this.errors[e],g=u?KE(u,i):"Error",m=`${this.serviceName}: ${g} (${a}).`;return new ta(a,m,i)}}function KE(t,e){return t.replace(qE,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const qE=/\{\$([^}]+)}/g;function If(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const u=t[a],g=e[a];if(V0(u)&&V0(g)){if(!If(u,g))return!1}else if(u!==g)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function V0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t){return t&&t._delegate?t._delegate:t}class ll{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new VE;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZE(e))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:a});i.resolve(u)}catch{}}}}clearInstance(e=bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bs){return this.instances.has(e)}getOptions(e=bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,g]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);i===m&&g.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),u=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;u.add(e),this.onInitCallbacks.set(a,u);const g=this.instances.get(a);return g&&e(g,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:QE(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=bs){return this.component?this.component.multipleInstances?e:bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QE(t){return t===bs?void 0:t}function ZE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ye||(Ye={}));const JE={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},e_=Ye.INFO,t_={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},n_=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=t_[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e2{constructor(e){this.name=e,this._logLevel=e_,this._logHandler=n_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const r_=(t,e)=>e.some(n=>t instanceof n);let U0,z0;function i_(){return U0||(U0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function s_(){return z0||(z0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t2=new WeakMap,Tf=new WeakMap,n2=new WeakMap,Eh=new WeakMap,z1=new WeakMap;function o_(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",u),t.removeEventListener("error",g)},u=()=>{n(ns(t.result)),a()},g=()=>{i(t.error),a()};t.addEventListener("success",u),t.addEventListener("error",g)});return e.then(n=>{n instanceof IDBCursor&&t2.set(n,t)}).catch(()=>{}),z1.set(e,t),e}function a_(t){if(Tf.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",u),t.removeEventListener("error",g),t.removeEventListener("abort",g)},u=()=>{n(),a()},g=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",u),t.addEventListener("error",g),t.addEventListener("abort",g)});Tf.set(t,e)}let Sf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||n2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ns(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function l_(t){Sf=t(Sf)}function u_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(_h(this),e,...n);return n2.set(i,e.sort?e.sort():[e]),ns(i)}:s_().includes(t)?function(...e){return t.apply(_h(this),e),ns(t2.get(this))}:function(...e){return ns(t.apply(_h(this),e))}}function c_(t){return typeof t=="function"?u_(t):(t instanceof IDBTransaction&&a_(t),r_(t,i_())?new Proxy(t,Sf):t)}function ns(t){if(t instanceof IDBRequest)return o_(t);if(Eh.has(t))return Eh.get(t);const e=c_(t);return e!==t&&(Eh.set(t,e),z1.set(e,t)),e}const _h=t=>z1.get(t);function h_(t,e,{blocked:n,upgrade:i,blocking:a,terminated:u}={}){const g=indexedDB.open(t,e),m=ns(g);return i&&g.addEventListener("upgradeneeded",x=>{i(ns(g.result),x.oldVersion,x.newVersion,ns(g.transaction),x)}),n&&g.addEventListener("blocked",x=>n(x.oldVersion,x.newVersion,x)),m.then(x=>{u&&x.addEventListener("close",()=>u()),a&&x.addEventListener("versionchange",w=>a(w.oldVersion,w.newVersion,w))}).catch(()=>{}),m}const f_=["get","getKey","getAll","getAllKeys","count"],d_=["put","add","delete","clear"],Ah=new Map;function H0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ah.get(e))return Ah.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=d_.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||f_.includes(n)))return;const u=async function(g,...m){const x=this.transaction(g,a?"readwrite":"readonly");let w=x.store;return i&&(w=w.index(m.shift())),(await Promise.all([w[n](...m),a&&x.done]))[0]};return Ah.set(e,u),u}l_(t=>({...t,get:(e,n,i)=>H0(e,n)||t.get(e,n,i),has:(e,n)=>!!H0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(p_(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function p_(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rf="@firebase/app",W0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=new e2("@firebase/app"),m_="@firebase/app-compat",y_="@firebase/analytics-compat",w_="@firebase/analytics",x_="@firebase/app-check-compat",E_="@firebase/app-check",__="@firebase/auth",A_="@firebase/auth-compat",C_="@firebase/database",v_="@firebase/data-connect",I_="@firebase/database-compat",T_="@firebase/functions",S_="@firebase/functions-compat",R_="@firebase/installations",N_="@firebase/installations-compat",O_="@firebase/messaging",D_="@firebase/messaging-compat",b_="@firebase/performance",P_="@firebase/performance-compat",M_="@firebase/remote-config",k_="@firebase/remote-config-compat",L_="@firebase/storage",B_="@firebase/storage-compat",F_="@firebase/firestore",V_="@firebase/vertexai-preview",U_="@firebase/firestore-compat",z_="firebase",H_="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="[DEFAULT]",W_={[Rf]:"fire-core",[m_]:"fire-core-compat",[w_]:"fire-analytics",[y_]:"fire-analytics-compat",[E_]:"fire-app-check",[x_]:"fire-app-check-compat",[__]:"fire-auth",[A_]:"fire-auth-compat",[C_]:"fire-rtdb",[v_]:"fire-data-connect",[I_]:"fire-rtdb-compat",[T_]:"fire-fn",[S_]:"fire-fn-compat",[R_]:"fire-iid",[N_]:"fire-iid-compat",[O_]:"fire-fcm",[D_]:"fire-fcm-compat",[b_]:"fire-perf",[P_]:"fire-perf-compat",[M_]:"fire-rc",[k_]:"fire-rc-compat",[L_]:"fire-gcs",[B_]:"fire-gcs-compat",[F_]:"fire-fst",[U_]:"fire-fst-compat",[V_]:"fire-vertex","fire-js":"fire-js",[z_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=new Map,G_=new Map,Of=new Map;function G0(t,e){try{t.container.addComponent(e)}catch(n){Ii.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zu(t){const e=t.name;if(Of.has(e))return Ii.debug(`There were multiple attempts to register component ${e}.`),!1;Of.set(e,t);for(const n of Qu.values())G0(n,t);for(const n of G_.values())G0(n,t);return!0}function j_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rs=new Jm("app","Firebase",X_);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ll("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=H_;function r2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Nf,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw rs.create("bad-app-name",{appName:String(a)});if(n||(n=$m()),!n)throw rs.create("no-options");const u=Qu.get(a);if(u){if(If(n,u.options)&&If(i,u.config))return u;throw rs.create("duplicate-app",{appName:a})}const g=new $E(a);for(const x of Of.values())g.addComponent(x);const m=new K_(n,i,g);return Qu.set(a,m),m}function Y_(t=Nf){const e=Qu.get(t);if(!e&&t===Nf&&$m())return r2();if(!e)throw rs.create("no-app",{appName:t});return e}function Lo(t,e,n){var i;let a=(i=W_[t])!==null&&i!==void 0?i:t;n&&(a+=`-${n}`);const u=a.match(/\s|\//),g=e.match(/\s|\//);if(u||g){const m=[`Unable to register library "${a}" with version "${e}":`];u&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&g&&m.push("and"),g&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ii.warn(m.join(" "));return}Zu(new ll(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="firebase-heartbeat-database",Z_=1,ul="firebase-heartbeat-store";let Ch=null;function i2(){return Ch||(Ch=h_(Q_,Z_,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ul)}catch(n){console.warn(n)}}}}).catch(t=>{throw rs.create("idb-open",{originalErrorMessage:t.message})})),Ch}async function $_(t){try{const n=(await i2()).transaction(ul),i=await n.objectStore(ul).get(s2(t));return await n.done,i}catch(e){if(e instanceof ta)Ii.warn(e.message);else{const n=rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ii.warn(n.message)}}}async function j0(t,e){try{const i=(await i2()).transaction(ul,"readwrite");await i.objectStore(ul).put(e,s2(t)),await i.done}catch(n){if(n instanceof ta)Ii.warn(n.message);else{const i=rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ii.warn(i.message)}}}function s2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=1024,eA=30*24*60*60*1e3;class tA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=X0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(g=>g.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(g=>{const m=new Date(g.date).valueOf();return Date.now()-m<=eA}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ii.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=X0(),{heartbeatsToSend:i,unsentEntries:a}=nA(this._heartbeatsCache.heartbeats),u=Yu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Ii.warn(n),""}}}function X0(){return new Date().toISOString().substring(0,10)}function nA(t,e=J_){const n=[];let i=t.slice();for(const a of t){const u=n.find(g=>g.agent===a.agent);if(u){if(u.dates.push(a.date),K0(n)>e){u.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),K0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class rA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GE()?jE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $_(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return j0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return j0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function K0(t){return Yu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){Zu(new ll("platform-logger",e=>new g_(e),"PRIVATE")),Zu(new ll("heartbeat",e=>new tA(e),"PRIVATE")),Lo(Rf,W0,t),Lo(Rf,W0,"esm2017"),Lo("fire-js","")}iA("");var sA="firebase",oA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lo(sA,oA,"app");var q0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vs,o2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,O){function N(){}N.prototype=O.prototype,D.D=O.prototype,D.prototype=new N,D.prototype.constructor=D,D.C=function(F,G,H){for(var L=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)L[$e-2]=arguments[$e];return O.prototype[G].apply(F,L)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,O,N){N||(N=0);var F=Array(16);if(typeof O=="string")for(var G=0;16>G;++G)F[G]=O.charCodeAt(N++)|O.charCodeAt(N++)<<8|O.charCodeAt(N++)<<16|O.charCodeAt(N++)<<24;else for(G=0;16>G;++G)F[G]=O[N++]|O[N++]<<8|O[N++]<<16|O[N++]<<24;O=D.g[0],N=D.g[1],G=D.g[2];var H=D.g[3],L=O+(H^N&(G^H))+F[0]+3614090360&4294967295;O=N+(L<<7&4294967295|L>>>25),L=H+(G^O&(N^G))+F[1]+3905402710&4294967295,H=O+(L<<12&4294967295|L>>>20),L=G+(N^H&(O^N))+F[2]+606105819&4294967295,G=H+(L<<17&4294967295|L>>>15),L=N+(O^G&(H^O))+F[3]+3250441966&4294967295,N=G+(L<<22&4294967295|L>>>10),L=O+(H^N&(G^H))+F[4]+4118548399&4294967295,O=N+(L<<7&4294967295|L>>>25),L=H+(G^O&(N^G))+F[5]+1200080426&4294967295,H=O+(L<<12&4294967295|L>>>20),L=G+(N^H&(O^N))+F[6]+2821735955&4294967295,G=H+(L<<17&4294967295|L>>>15),L=N+(O^G&(H^O))+F[7]+4249261313&4294967295,N=G+(L<<22&4294967295|L>>>10),L=O+(H^N&(G^H))+F[8]+1770035416&4294967295,O=N+(L<<7&4294967295|L>>>25),L=H+(G^O&(N^G))+F[9]+2336552879&4294967295,H=O+(L<<12&4294967295|L>>>20),L=G+(N^H&(O^N))+F[10]+4294925233&4294967295,G=H+(L<<17&4294967295|L>>>15),L=N+(O^G&(H^O))+F[11]+2304563134&4294967295,N=G+(L<<22&4294967295|L>>>10),L=O+(H^N&(G^H))+F[12]+1804603682&4294967295,O=N+(L<<7&4294967295|L>>>25),L=H+(G^O&(N^G))+F[13]+4254626195&4294967295,H=O+(L<<12&4294967295|L>>>20),L=G+(N^H&(O^N))+F[14]+2792965006&4294967295,G=H+(L<<17&4294967295|L>>>15),L=N+(O^G&(H^O))+F[15]+1236535329&4294967295,N=G+(L<<22&4294967295|L>>>10),L=O+(G^H&(N^G))+F[1]+4129170786&4294967295,O=N+(L<<5&4294967295|L>>>27),L=H+(N^G&(O^N))+F[6]+3225465664&4294967295,H=O+(L<<9&4294967295|L>>>23),L=G+(O^N&(H^O))+F[11]+643717713&4294967295,G=H+(L<<14&4294967295|L>>>18),L=N+(H^O&(G^H))+F[0]+3921069994&4294967295,N=G+(L<<20&4294967295|L>>>12),L=O+(G^H&(N^G))+F[5]+3593408605&4294967295,O=N+(L<<5&4294967295|L>>>27),L=H+(N^G&(O^N))+F[10]+38016083&4294967295,H=O+(L<<9&4294967295|L>>>23),L=G+(O^N&(H^O))+F[15]+3634488961&4294967295,G=H+(L<<14&4294967295|L>>>18),L=N+(H^O&(G^H))+F[4]+3889429448&4294967295,N=G+(L<<20&4294967295|L>>>12),L=O+(G^H&(N^G))+F[9]+568446438&4294967295,O=N+(L<<5&4294967295|L>>>27),L=H+(N^G&(O^N))+F[14]+3275163606&4294967295,H=O+(L<<9&4294967295|L>>>23),L=G+(O^N&(H^O))+F[3]+4107603335&4294967295,G=H+(L<<14&4294967295|L>>>18),L=N+(H^O&(G^H))+F[8]+1163531501&4294967295,N=G+(L<<20&4294967295|L>>>12),L=O+(G^H&(N^G))+F[13]+2850285829&4294967295,O=N+(L<<5&4294967295|L>>>27),L=H+(N^G&(O^N))+F[2]+4243563512&4294967295,H=O+(L<<9&4294967295|L>>>23),L=G+(O^N&(H^O))+F[7]+1735328473&4294967295,G=H+(L<<14&4294967295|L>>>18),L=N+(H^O&(G^H))+F[12]+2368359562&4294967295,N=G+(L<<20&4294967295|L>>>12),L=O+(N^G^H)+F[5]+4294588738&4294967295,O=N+(L<<4&4294967295|L>>>28),L=H+(O^N^G)+F[8]+2272392833&4294967295,H=O+(L<<11&4294967295|L>>>21),L=G+(H^O^N)+F[11]+1839030562&4294967295,G=H+(L<<16&4294967295|L>>>16),L=N+(G^H^O)+F[14]+4259657740&4294967295,N=G+(L<<23&4294967295|L>>>9),L=O+(N^G^H)+F[1]+2763975236&4294967295,O=N+(L<<4&4294967295|L>>>28),L=H+(O^N^G)+F[4]+1272893353&4294967295,H=O+(L<<11&4294967295|L>>>21),L=G+(H^O^N)+F[7]+4139469664&4294967295,G=H+(L<<16&4294967295|L>>>16),L=N+(G^H^O)+F[10]+3200236656&4294967295,N=G+(L<<23&4294967295|L>>>9),L=O+(N^G^H)+F[13]+681279174&4294967295,O=N+(L<<4&4294967295|L>>>28),L=H+(O^N^G)+F[0]+3936430074&4294967295,H=O+(L<<11&4294967295|L>>>21),L=G+(H^O^N)+F[3]+3572445317&4294967295,G=H+(L<<16&4294967295|L>>>16),L=N+(G^H^O)+F[6]+76029189&4294967295,N=G+(L<<23&4294967295|L>>>9),L=O+(N^G^H)+F[9]+3654602809&4294967295,O=N+(L<<4&4294967295|L>>>28),L=H+(O^N^G)+F[12]+3873151461&4294967295,H=O+(L<<11&4294967295|L>>>21),L=G+(H^O^N)+F[15]+530742520&4294967295,G=H+(L<<16&4294967295|L>>>16),L=N+(G^H^O)+F[2]+3299628645&4294967295,N=G+(L<<23&4294967295|L>>>9),L=O+(G^(N|~H))+F[0]+4096336452&4294967295,O=N+(L<<6&4294967295|L>>>26),L=H+(N^(O|~G))+F[7]+1126891415&4294967295,H=O+(L<<10&4294967295|L>>>22),L=G+(O^(H|~N))+F[14]+2878612391&4294967295,G=H+(L<<15&4294967295|L>>>17),L=N+(H^(G|~O))+F[5]+4237533241&4294967295,N=G+(L<<21&4294967295|L>>>11),L=O+(G^(N|~H))+F[12]+1700485571&4294967295,O=N+(L<<6&4294967295|L>>>26),L=H+(N^(O|~G))+F[3]+2399980690&4294967295,H=O+(L<<10&4294967295|L>>>22),L=G+(O^(H|~N))+F[10]+4293915773&4294967295,G=H+(L<<15&4294967295|L>>>17),L=N+(H^(G|~O))+F[1]+2240044497&4294967295,N=G+(L<<21&4294967295|L>>>11),L=O+(G^(N|~H))+F[8]+1873313359&4294967295,O=N+(L<<6&4294967295|L>>>26),L=H+(N^(O|~G))+F[15]+4264355552&4294967295,H=O+(L<<10&4294967295|L>>>22),L=G+(O^(H|~N))+F[6]+2734768916&4294967295,G=H+(L<<15&4294967295|L>>>17),L=N+(H^(G|~O))+F[13]+1309151649&4294967295,N=G+(L<<21&4294967295|L>>>11),L=O+(G^(N|~H))+F[4]+4149444226&4294967295,O=N+(L<<6&4294967295|L>>>26),L=H+(N^(O|~G))+F[11]+3174756917&4294967295,H=O+(L<<10&4294967295|L>>>22),L=G+(O^(H|~N))+F[2]+718787259&4294967295,G=H+(L<<15&4294967295|L>>>17),L=N+(H^(G|~O))+F[9]+3951481745&4294967295,D.g[0]=D.g[0]+O&4294967295,D.g[1]=D.g[1]+(G+(L<<21&4294967295|L>>>11))&4294967295,D.g[2]=D.g[2]+G&4294967295,D.g[3]=D.g[3]+H&4294967295}i.prototype.u=function(D,O){O===void 0&&(O=D.length);for(var N=O-this.blockSize,F=this.B,G=this.h,H=0;H<O;){if(G==0)for(;H<=N;)a(this,D,H),H+=this.blockSize;if(typeof D=="string"){for(;H<O;)if(F[G++]=D.charCodeAt(H++),G==this.blockSize){a(this,F),G=0;break}}else for(;H<O;)if(F[G++]=D[H++],G==this.blockSize){a(this,F),G=0;break}}this.h=G,this.o+=O},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var O=1;O<D.length-8;++O)D[O]=0;var N=8*this.o;for(O=D.length-8;O<D.length;++O)D[O]=N&255,N/=256;for(this.u(D),D=Array(16),O=N=0;4>O;++O)for(var F=0;32>F;F+=8)D[N++]=this.g[O]>>>F&255;return D};function u(D,O){var N=m;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=O(D)}function g(D,O){this.h=O;for(var N=[],F=!0,G=D.length-1;0<=G;G--){var H=D[G]|0;F&&H==O||(N[G]=H,F=!1)}this.g=N}var m={};function x(D){return-128<=D&&128>D?u(D,function(O){return new g([O|0],0>O?-1:0)}):new g([D|0],0>D?-1:0)}function w(D){if(isNaN(D)||!isFinite(D))return S;if(0>D)return te(w(-D));for(var O=[],N=1,F=0;D>=N;F++)O[F]=D/N|0,N*=4294967296;return new g(O,0)}function I(D,O){if(D.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(D.charAt(0)=="-")return te(I(D.substring(1),O));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=w(Math.pow(O,8)),F=S,G=0;G<D.length;G+=8){var H=Math.min(8,D.length-G),L=parseInt(D.substring(G,G+H),O);8>H?(H=w(Math.pow(O,H)),F=F.j(H).add(w(L))):(F=F.j(N),F=F.add(w(L)))}return F}var S=x(0),P=x(1),U=x(16777216);t=g.prototype,t.m=function(){if(q(this))return-te(this).m();for(var D=0,O=1,N=0;N<this.g.length;N++){var F=this.i(N);D+=(0<=F?F:4294967296+F)*O,O*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(Y(this))return"0";if(q(this))return"-"+te(this).toString(D);for(var O=w(Math.pow(D,6)),N=this,F="";;){var G=Q(N,O).g;N=V(N,G.j(O));var H=((0<N.g.length?N.g[0]:N.h)>>>0).toString(D);if(N=G,Y(N))return H+F;for(;6>H.length;)H="0"+H;F=H+F}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function Y(D){if(D.h!=0)return!1;for(var O=0;O<D.g.length;O++)if(D.g[O]!=0)return!1;return!0}function q(D){return D.h==-1}t.l=function(D){return D=V(this,D),q(D)?-1:Y(D)?0:1};function te(D){for(var O=D.g.length,N=[],F=0;F<O;F++)N[F]=~D.g[F];return new g(N,~D.h).add(P)}t.abs=function(){return q(this)?te(this):this},t.add=function(D){for(var O=Math.max(this.g.length,D.g.length),N=[],F=0,G=0;G<=O;G++){var H=F+(this.i(G)&65535)+(D.i(G)&65535),L=(H>>>16)+(this.i(G)>>>16)+(D.i(G)>>>16);F=L>>>16,H&=65535,L&=65535,N[G]=L<<16|H}return new g(N,N[N.length-1]&-2147483648?-1:0)};function V(D,O){return D.add(te(O))}t.j=function(D){if(Y(this)||Y(D))return S;if(q(this))return q(D)?te(this).j(te(D)):te(te(this).j(D));if(q(D))return te(this.j(te(D)));if(0>this.l(U)&&0>D.l(U))return w(this.m()*D.m());for(var O=this.g.length+D.g.length,N=[],F=0;F<2*O;F++)N[F]=0;for(F=0;F<this.g.length;F++)for(var G=0;G<D.g.length;G++){var H=this.i(F)>>>16,L=this.i(F)&65535,$e=D.i(G)>>>16,ee=D.i(G)&65535;N[2*F+2*G]+=L*ee,k(N,2*F+2*G),N[2*F+2*G+1]+=H*ee,k(N,2*F+2*G+1),N[2*F+2*G+1]+=L*$e,k(N,2*F+2*G+1),N[2*F+2*G+2]+=H*$e,k(N,2*F+2*G+2)}for(F=0;F<O;F++)N[F]=N[2*F+1]<<16|N[2*F];for(F=O;F<2*O;F++)N[F]=0;return new g(N,0)};function k(D,O){for(;(D[O]&65535)!=D[O];)D[O+1]+=D[O]>>>16,D[O]&=65535,O++}function B(D,O){this.g=D,this.h=O}function Q(D,O){if(Y(O))throw Error("division by zero");if(Y(D))return new B(S,S);if(q(D))return O=Q(te(D),O),new B(te(O.g),te(O.h));if(q(O))return O=Q(D,te(O)),new B(te(O.g),O.h);if(30<D.g.length){if(q(D)||q(O))throw Error("slowDivide_ only works with positive integers.");for(var N=P,F=O;0>=F.l(D);)N=he(N),F=he(F);var G=re(N,1),H=re(F,1);for(F=re(F,2),N=re(N,2);!Y(F);){var L=H.add(F);0>=L.l(D)&&(G=G.add(N),H=L),F=re(F,1),N=re(N,1)}return O=V(D,G.j(O)),new B(G,O)}for(G=S;0<=D.l(O);){for(N=Math.max(1,Math.floor(D.m()/O.m())),F=Math.ceil(Math.log(N)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),H=w(N),L=H.j(O);q(L)||0<L.l(D);)N-=F,H=w(N),L=H.j(O);Y(H)&&(H=P),G=G.add(H),D=V(D,L)}return new B(G,D)}t.A=function(D){return Q(this,D).h},t.and=function(D){for(var O=Math.max(this.g.length,D.g.length),N=[],F=0;F<O;F++)N[F]=this.i(F)&D.i(F);return new g(N,this.h&D.h)},t.or=function(D){for(var O=Math.max(this.g.length,D.g.length),N=[],F=0;F<O;F++)N[F]=this.i(F)|D.i(F);return new g(N,this.h|D.h)},t.xor=function(D){for(var O=Math.max(this.g.length,D.g.length),N=[],F=0;F<O;F++)N[F]=this.i(F)^D.i(F);return new g(N,this.h^D.h)};function he(D){for(var O=D.g.length+1,N=[],F=0;F<O;F++)N[F]=D.i(F)<<1|D.i(F-1)>>>31;return new g(N,D.h)}function re(D,O){var N=O>>5;O%=32;for(var F=D.g.length-N,G=[],H=0;H<F;H++)G[H]=0<O?D.i(H+N)>>>O|D.i(H+N+1)<<32-O:D.i(H+N);return new g(G,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,o2=i,g.prototype.add=g.prototype.add,g.prototype.multiply=g.prototype.j,g.prototype.modulo=g.prototype.A,g.prototype.compare=g.prototype.l,g.prototype.toNumber=g.prototype.m,g.prototype.toString=g.prototype.toString,g.prototype.getBits=g.prototype.i,g.fromNumber=w,g.fromString=I,Vs=g}).apply(typeof q0<"u"?q0:typeof self<"u"?self:typeof window<"u"?window:{});var tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a2,Ra,l2,yu,Df,u2,c2,h2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,E,A){return d==Array.prototype||d==Object.prototype||(d[E]=A.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof tu=="object"&&tu];for(var E=0;E<d.length;++E){var A=d[E];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=n(this);function a(d,E){if(E)e:{var A=i;d=d.split(".");for(var R=0;R<d.length-1;R++){var j=d[R];if(!(j in A))break e;A=A[j]}d=d[d.length-1],R=A[d],E=E(R),E!=R&&E!=null&&e(A,d,{configurable:!0,writable:!0,value:E})}}function u(d,E){d instanceof String&&(d+="");var A=0,R=!1,j={next:function(){if(!R&&A<d.length){var $=A++;return{value:E($,d[$]),done:!1}}return R=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}a("Array.prototype.values",function(d){return d||function(){return u(this,function(E,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var g=g||{},m=this||self;function x(d){var E=typeof d;return E=E!="object"?E:d?Array.isArray(d)?"array":E:"null",E=="array"||E=="object"&&typeof d.length=="number"}function w(d){var E=typeof d;return E=="object"&&d!=null||E=="function"}function I(d,E,A){return d.call.apply(d.bind,arguments)}function S(d,E,A){if(!d)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,R),d.apply(E,j)}}return function(){return d.apply(E,arguments)}}function P(d,E,A){return P=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?I:S,P.apply(null,arguments)}function U(d,E){var A=Array.prototype.slice.call(arguments,1);return function(){var R=A.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function Y(d,E){function A(){}A.prototype=E.prototype,d.aa=E.prototype,d.prototype=new A,d.prototype.constructor=d,d.Qb=function(R,j,$){for(var ce=Array(arguments.length-2),it=2;it<arguments.length;it++)ce[it-2]=arguments[it];return E.prototype[j].apply(R,ce)}}function q(d){const E=d.length;if(0<E){const A=Array(E);for(let R=0;R<E;R++)A[R]=d[R];return A}return[]}function te(d,E){for(let A=1;A<arguments.length;A++){const R=arguments[A];if(x(R)){const j=d.length||0,$=R.length||0;d.length=j+$;for(let ce=0;ce<$;ce++)d[j+ce]=R[ce]}else d.push(R)}}class V{constructor(E,A){this.i=E,this.j=A,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function k(d){return/^[\s\xa0]*$/.test(d)}function B(){var d=m.navigator;return d&&(d=d.userAgent)?d:""}function Q(d){return Q[" "](d),d}Q[" "]=function(){};var he=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function re(d,E,A){for(const R in d)E.call(A,d[R],R,d)}function D(d,E){for(const A in d)E.call(void 0,d[A],A,d)}function O(d){const E={};for(const A in d)E[A]=d[A];return E}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(d,E){let A,R;for(let j=1;j<arguments.length;j++){R=arguments[j];for(A in R)d[A]=R[A];for(let $=0;$<N.length;$++)A=N[$],Object.prototype.hasOwnProperty.call(R,A)&&(d[A]=R[A])}}function G(d){var E=1;d=d.split(":");const A=[];for(;0<E&&d.length;)A.push(d.shift()),E--;return d.length&&A.push(d.join(":")),A}function H(d){m.setTimeout(()=>{throw d},0)}function L(){var d=Ce;let E=null;return d.g&&(E=d.g,d.g=d.g.next,d.g||(d.h=null),E.next=null),E}class $e{constructor(){this.h=this.g=null}add(E,A){const R=ee.get();R.set(E,A),this.h?this.h.next=R:this.g=R,this.h=R}}var ee=new V(()=>new Ct,d=>d.reset());class Ct{constructor(){this.next=this.g=this.h=null}set(E,A){this.h=E,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,ge=!1,Ce=new $e,Re=()=>{const d=m.Promise.resolve(void 0);Se=()=>{d.then(ft)}};var ft=()=>{for(var d;d=L();){try{d.h.call(d.g)}catch(A){H(A)}var E=ee;E.j(d),100>E.h&&(E.h++,d.next=E.g,E.g=d)}ge=!1};function Me(){this.s=this.s,this.C=this.C}Me.prototype.s=!1,Me.prototype.ma=function(){this.s||(this.s=!0,this.N())},Me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(d,E){this.type=d,this.g=this.target=E,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var pt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var d=!1,E=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const A=()=>{};m.addEventListener("test",A,E),m.removeEventListener("test",A,E)}catch{}return d}();function $n(d,E){if(nt.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var A=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=E,E=d.relatedTarget){if(he){e:{try{Q(E.nodeName);var j=!0;break e}catch{}j=!1}j||(E=null)}}else A=="mouseover"?E=d.fromElement:A=="mouseout"&&(E=d.toElement);this.relatedTarget=E,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ee[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&$n.aa.h.call(this)}}Y($n,nt);var Ee={2:"touch",3:"pen",4:"mouse"};$n.prototype.h=function(){$n.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Jn="closure_listenable_"+(1e6*Math.random()|0),Xt=0;function gs(d,E,A,R,j){this.listener=d,this.proxy=null,this.src=E,this.type=A,this.capture=!!R,this.ha=j,this.key=++Xt,this.da=this.fa=!1}function zr(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Qt(d){this.src=d,this.g={},this.h=0}Qt.prototype.add=function(d,E,A,R,j){var $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);var ce=We(d,E,R,j);return-1<ce?(E=d[ce],A||(E.fa=!1)):(E=new gs(E,this.src,$,!!R,j),E.fa=A,d.push(E)),E};function Ni(d,E){var A=E.type;if(A in d.g){var R=d.g[A],j=Array.prototype.indexOf.call(R,E,void 0),$;($=0<=j)&&Array.prototype.splice.call(R,j,1),$&&(zr(E),d.g[A].length==0&&(delete d.g[A],d.h--))}}function We(d,E,A,R){for(var j=0;j<d.length;++j){var $=d[j];if(!$.da&&$.listener==E&&$.capture==!!A&&$.ha==R)return j}return-1}var Hr="closure_lm_"+(1e6*Math.random()|0),Un={};function Oi(d,E,A,R,j){if(Array.isArray(E)){for(var $=0;$<E.length;$++)Oi(d,E[$],A,R,j);return null}return A=no(A),d&&d[Jn]?d.K(E,A,w(R)?!!R.capture:!!R,j):Zt(d,E,A,!1,R,j)}function Zt(d,E,A,R,j,$){if(!E)throw Error("Invalid event type");var ce=w(j)?!!j.capture:!!j,it=to(d);if(it||(d[Hr]=it=new Qt(d)),A=it.add(E,A,R,ce,$),A.proxy)return A;if(R=at(),A.proxy=R,R.src=d,R.listener=A,d.addEventListener)pt||(j=ce),j===void 0&&(j=!1),d.addEventListener(E.toString(),R,j);else if(d.attachEvent)d.attachEvent(we(E.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return A}function at(){function d(A){return E.call(d.src,d.listener,A)}const E=eo;return d}function Ve(d,E,A,R,j){if(Array.isArray(E))for(var $=0;$<E.length;$++)Ve(d,E[$],A,R,j);else R=w(R)?!!R.capture:!!R,A=no(A),d&&d[Jn]?(d=d.i,E=String(E).toString(),E in d.g&&($=d.g[E],A=We($,A,R,j),-1<A&&(zr($[A]),Array.prototype.splice.call($,A,1),$.length==0&&(delete d.g[E],d.h--)))):d&&(d=to(d))&&(E=d.g[E.toString()],d=-1,E&&(d=We(E,A,R,j)),(A=-1<d?E[d]:null)&&Di(A))}function Di(d){if(typeof d!="number"&&d&&!d.da){var E=d.src;if(E&&E[Jn])Ni(E.i,d);else{var A=d.type,R=d.proxy;E.removeEventListener?E.removeEventListener(A,R,d.capture):E.detachEvent?E.detachEvent(we(A),R):E.addListener&&E.removeListener&&E.removeListener(R),(A=to(E))?(Ni(A,d),A.h==0&&(A.src=null,E[Hr]=null)):zr(d)}}}function we(d){return d in Un?Un[d]:Un[d]="on"+d}function eo(d,E){if(d.da)d=!0;else{E=new $n(E,this);var A=d.listener,R=d.ha||d.src;d.fa&&Di(d),d=A.call(R,E)}return d}function to(d){return d=d[Hr],d instanceof Qt?d:null}var er="__closure_events_fn_"+(1e9*Math.random()>>>0);function no(d){return typeof d=="function"?d:(d[er]||(d[er]=function(E){return d.handleEvent(E)}),d[er])}function lt(){Me.call(this),this.i=new Qt(this),this.M=this,this.F=null}Y(lt,Me),lt.prototype[Jn]=!0,lt.prototype.removeEventListener=function(d,E,A,R){Ve(this,d,E,A,R)};function ln(d,E){var A,R=d.F;if(R)for(A=[];R;R=R.F)A.push(R);if(d=d.M,R=E.type||E,typeof E=="string")E=new nt(E,d);else if(E instanceof nt)E.target=E.target||d;else{var j=E;E=new nt(R,d),F(E,j)}if(j=!0,A)for(var $=A.length-1;0<=$;$--){var ce=E.g=A[$];j=tr(ce,R,!0,E)&&j}if(ce=E.g=d,j=tr(ce,R,!0,E)&&j,j=tr(ce,R,!1,E)&&j,A)for($=0;$<A.length;$++)ce=E.g=A[$],j=tr(ce,R,!1,E)&&j}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var d=this.i,E;for(E in d.g){for(var A=d.g[E],R=0;R<A.length;R++)zr(A[R]);delete d.g[E],d.h--}}this.F=null},lt.prototype.K=function(d,E,A,R){return this.i.add(String(d),E,!1,A,R)},lt.prototype.L=function(d,E,A,R){return this.i.add(String(d),E,!0,A,R)};function tr(d,E,A,R){if(E=d.i.g[String(E)],!E)return!0;E=E.concat();for(var j=!0,$=0;$<E.length;++$){var ce=E[$];if(ce&&!ce.da&&ce.capture==A){var it=ce.listener,Dt=ce.ha||ce.src;ce.fa&&Ni(d.i,ce),j=it.call(Dt,R)!==!1&&j}}return j&&!R.defaultPrevented}function un(d,E,A){if(typeof d=="function")A&&(d=P(d,A));else if(d&&typeof d.handleEvent=="function")d=P(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:m.setTimeout(d,E||0)}function sa(d){d.g=un(()=>{d.g=null,d.i&&(d.i=!1,sa(d))},d.l);const E=d.h;d.h=null,d.m.apply(null,E)}class ro extends Me{constructor(E,A){super(),this.m=E,this.l=A,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:sa(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ps(d){Me.call(this),this.h=d,this.g={}}Y(ps,Me);var Rt=[];function fe(d){re(d.g,function(E,A){this.g.hasOwnProperty(A)&&Di(E)},d),d.g={}}ps.prototype.N=function(){ps.aa.N.call(this),fe(this)},ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nt=m.JSON.stringify,rt=m.JSON.parse,vt=class{stringify(d){return m.JSON.stringify(d,void 0)}parse(d){return m.JSON.parse(d,void 0)}};function ai(){}ai.prototype.h=null;function io(d){return d.h||(d.h=d.i())}function oa(){}var Be={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rr(){nt.call(this,"d")}Y(Rr,nt);function so(){nt.call(this,"c")}Y(so,nt);var Wr={},zn=null;function bi(){return zn=zn||new lt}Wr.La="serverreachability";function $t(d){nt.call(this,Wr.La,d)}Y($t,nt);function wr(d){const E=bi();ln(E,new $t(E))}Wr.STAT_EVENT="statevent";function ms(d,E){nt.call(this,Wr.STAT_EVENT,d),this.stat=E}Y(ms,nt);function dt(d){const E=bi();ln(E,new ms(E,d))}Wr.Ma="timingevent";function Tl(d,E){nt.call(this,Wr.Ma,d),this.size=E}Y(Tl,nt);function nr(d,E){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){d()},E)}function li(){this.g=!0}li.prototype.xa=function(){this.g=!1};function In(d,E,A,R,j,$){d.info(function(){if(d.g)if($)for(var ce="",it=$.split("&"),Dt=0;Dt<it.length;Dt++){var je=it[Dt].split("=");if(1<je.length){var xt=je[0];je=je[1];var Wt=xt.split("_");ce=2<=Wt.length&&Wt[1]=="type"?ce+(xt+"="+je+"&"):ce+(xt+"=redacted&")}}else ce=null;else ce=$;return"XMLHTTP REQ ("+R+") [attempt "+j+"]: "+E+`
`+A+`
`+ce})}function ui(d,E,A,R,j,$,ce){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+j+"]: "+E+`
`+A+`
`+$+" "+ce})}function Jt(d,E,A,R){d.info(function(){return"XMLHTTP TEXT ("+E+"): "+Pi(d,A)+(R?" "+R:"")})}function pe(d,E){d.info(function(){return"TIMEOUT: "+E})}li.prototype.info=function(){};function Pi(d,E){if(!d.g)return E;if(!E)return null;try{var A=JSON.parse(E);if(A){for(d=0;d<A.length;d++)if(Array.isArray(A[d])){var R=A[d];if(!(2>R.length)){var j=R[1];if(Array.isArray(j)&&!(1>j.length)){var $=j[0];if($!="noop"&&$!="stop"&&$!="close")for(var ce=1;ce<j.length;ce++)j[ce]=""}}}}return Nt(A)}catch{return E}}var Mi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gr;function ci(){}Y(ci,ai),ci.prototype.g=function(){return new XMLHttpRequest},ci.prototype.i=function(){return{}},Gr=new ci;function rr(d,E,A,R){this.j=d,this.i=E,this.l=A,this.R=R||1,this.U=new ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ir}function ir(){this.i=null,this.g="",this.h=!1}var Sl={},aa={};function Hn(d,E,A){d.L=1,d.v=Ot(Ue(E)),d.m=A,d.P=!0,cn(d,null)}function cn(d,E){d.F=Date.now(),sr(d),d.A=Ue(d.v);var A=d.A,R=d.R;Array.isArray(R)||(R=[String(R)]),Ht(A.i,"t",R),d.C=0,A=d.j.J,d.h=new ir,d.g=kl(d.j,A?E:null,!d.m),0<d.O&&(d.M=new ro(P(d.Y,d,d.g),d.O)),E=d.U,A=d.g,R=d.ca;var j="readystatechange";Array.isArray(j)||(j&&(Rt[0]=j.toString()),j=Rt);for(var $=0;$<j.length;$++){var ce=Oi(A,j[$],R||E.handleEvent,!1,E.h||E);if(!ce)break;E.g[ce.key]=ce}E=d.H?O(d.H):{},d.m?(d.u||(d.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,E)):(d.u="GET",d.g.ea(d.A,d.u,null,E)),wr(),In(d.i,d.u,d.A,d.l,d.R,d.m)}rr.prototype.ca=function(d){d=d.target;const E=this.M;E&&Dr(d)==3?E.j():this.Y(d)},rr.prototype.Y=function(d){try{if(d==this.g)e:{const Wt=Dr(this.g);var E=this.g.Ba();const nn=this.g.Z();if(!(3>Wt)&&(Wt!=3||this.g&&(this.h.h||this.g.oa()||bl(this.g)))){this.J||Wt!=4||E==7||(E==8||0>=nn?wr(3):wr(2)),ne(this);var A=this.g.Z();this.X=A;t:if(ct(this)){var R=bl(this.g);d="";var j=R.length,$=Dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Je(this),ys(this);var ce="";break t}this.h.i=new m.TextDecoder}for(E=0;E<j;E++)this.h.h=!0,d+=this.h.i.decode(R[E],{stream:!($&&E==j-1)});R.length=0,this.h.g+=d,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=A==200,ui(this.i,this.u,this.A,this.l,this.R,Wt,A),this.o){if(this.T&&!this.K){t:{if(this.g){var it,Dt=this.g;if((it=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(it)){var je=it;break t}}je=null}if(A=je)Jt(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jr(this,A);else{this.o=!1,this.s=3,dt(12),Je(this),ys(this);break e}}if(this.P){A=!0;let Gn;for(;!this.J&&this.C<ce.length;)if(Gn=Rl(this,ce),Gn==aa){Wt==4&&(this.s=4,dt(14),A=!1),Jt(this.i,this.l,null,"[Incomplete Response]");break}else if(Gn==Sl){this.s=4,dt(15),Jt(this.i,this.l,ce,"[Invalid Chunk]"),A=!1;break}else Jt(this.i,this.l,Gn,null),jr(this,Gn);if(ct(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||ce.length!=0||this.h.h||(this.s=1,dt(16),A=!1),this.o=this.o&&A,!A)Jt(this.i,this.l,ce,"[Invalid Chunked Response]"),Je(this),ys(this);else if(0<ce.length&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.ba&&!xt.M&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Rs(xt),xt.M=!0,dt(11))}}else Jt(this.i,this.l,ce,null),jr(this,ce);Wt==4&&Je(this),this.o&&!this.J&&(Wt==4?wt(this.j,this):(this.o=!1,sr(this)))}else et(this.g),A==400&&0<ce.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Je(this),ys(this)}}}catch{}finally{}};function ct(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Rl(d,E){var A=d.C,R=E.indexOf(`
`,A);return R==-1?aa:(A=Number(E.substring(A,R)),isNaN(A)?Sl:(R+=1,R+A>E.length?aa:(E=E.slice(R,R+A),d.C=R+A,E)))}rr.prototype.cancel=function(){this.J=!0,Je(this)};function sr(d){d.S=Date.now()+d.I,oo(d,d.I)}function oo(d,E){if(d.B!=null)throw Error("WatchDog timer not null");d.B=nr(P(d.ba,d),E)}function ne(d){d.B&&(m.clearTimeout(d.B),d.B=null)}rr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(pe(this.i,this.A),this.L!=2&&(wr(),dt(17)),Je(this),this.s=2,ys(this)):oo(this,this.S-d)};function ys(d){d.j.G==0||d.J||wt(d.j,d)}function Je(d){ne(d);var E=d.M;E&&typeof E.ma=="function"&&E.ma(),d.M=null,fe(d.U),d.g&&(E=d.g,d.g=null,E.abort(),E.ma())}function jr(d,E){try{var A=d.j;if(A.G!=0&&(A.g==d||ws(A.h,d))){if(!d.K&&ws(A.h,d)&&A.G==3){try{var R=A.Da.g.parse(E)}catch{R=null}if(Array.isArray(R)&&R.length==3){var j=R;if(j[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<d.F)Vi(A),uo(A);else break e;ha(A),dt(18)}}else A.za=j[1],0<A.za-A.T&&37500>j[2]&&A.F&&A.v==0&&!A.C&&(A.C=nr(P(A.Za,A),6e3));if(1>=Le(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Mn(A,11)}else if((d.K||A.g==d)&&Vi(A),!k(E))for(j=A.Da.g.parse(E),E=0;E<j.length;E++){let je=j[E];if(A.T=je[0],je=je[1],A.G==2)if(je[0]=="c"){A.K=je[1],A.ia=je[2];const xt=je[3];xt!=null&&(A.la=xt,A.j.info("VER="+A.la));const Wt=je[4];Wt!=null&&(A.Aa=Wt,A.j.info("SVER="+A.Aa));const nn=je[5];nn!=null&&typeof nn=="number"&&0<nn&&(R=1.5*nn,A.L=R,A.j.info("backChannelRequestTimeoutMs_="+R)),R=A;const Gn=d.g;if(Gn){const kn=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kn){var $=R.h;$.g||kn.indexOf("spdy")==-1&&kn.indexOf("quic")==-1&&kn.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(xs($,$.h),$.h=null))}if(R.D){const fa=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;fa&&(R.ya=fa,de(R.I,R.D,fa))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-d.F,A.j.info("Handshake RTT: "+A.R+"ms")),R=A;var ce=d;if(R.qa=ve(R,R.J?R.ia:null,R.W),ce.K){ao(R.h,ce);var it=ce,Dt=R.L;Dt&&(it.I=Dt),it.B&&(ne(it),sr(it)),R.g=ce}else Ml(R);0<A.i.length&&De(A)}else je[0]!="stop"&&je[0]!="close"||Mn(A,7);else A.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Mn(A,7):Er(A):je[0]!="noop"&&A.l&&A.l.ta(je),A.v=0)}}wr(4)}catch{}}var Uc=class{constructor(d,E){this.g=d,this.map=E}};function Ke(d){this.l=d||10,m.PerformanceNavigationTiming?(d=m.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ge(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Le(d){return d.h?1:d.g?d.g.size:0}function ws(d,E){return d.h?d.h==E:d.g?d.g.has(E):!1}function xs(d,E){d.g?d.g.add(E):d.h=E}function ao(d,E){d.h&&d.h==E?d.h=null:d.g&&d.g.has(E)&&d.g.delete(E)}Ke.prototype.cancel=function(){if(this.i=Bt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Bt(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let E=d.i;for(const A of d.g.values())E=E.concat(A.D);return E}return q(d.i)}function Xr(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(x(d)){for(var E=[],A=d.length,R=0;R<A;R++)E.push(d[R]);return E}E=[],A=0;for(R in d)E[A++]=d[R];return E}function zc(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(x(d)||typeof d=="string"){var E=[];d=d.length;for(var A=0;A<d;A++)E.push(A);return E}E=[],A=0;for(const R in d)E[A++]=R;return E}}}function It(d,E){if(d.forEach&&typeof d.forEach=="function")d.forEach(E,void 0);else if(x(d)||typeof d=="string")Array.prototype.forEach.call(d,E,void 0);else for(var A=zc(d),R=Xr(d),j=R.length,$=0;$<j;$++)E.call(void 0,R[$],A&&A[$],d)}var Nr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hc(d,E){if(d){d=d.split("&");for(var A=0;A<d.length;A++){var R=d[A].indexOf("="),j=null;if(0<=R){var $=d[A].substring(0,R);j=d[A].substring(R+1)}else $=d[A];E($,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Wn(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Wn){this.h=d.h,zt(this,d.j),this.o=d.o,this.g=d.g,X(this,d.s),this.l=d.l;var E=d.i,A=new hi;A.i=E.i,E.g&&(A.g=new Map(E.g),A.h=E.h),b(this,A),this.m=d.m}else d&&(E=String(d).match(Nr))?(this.h=!1,zt(this,E[1]||"",!0),this.o=hn(E[2]||""),this.g=hn(E[3]||"",!0),X(this,E[4]),this.l=hn(E[5]||"",!0),b(this,E[6]||"",!0),this.m=hn(E[7]||"")):(this.h=!1,this.i=new hi(null,this.h))}Wn.prototype.toString=function(){var d=[],E=this.j;E&&d.push(Es(E,Pn,!0),":");var A=this.g;return(A||E=="file")&&(d.push("//"),(E=this.o)&&d.push(Es(E,Pn,!0),"@"),d.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&d.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&d.push("/"),d.push(Es(A,A.charAt(0)=="/"?mt:Ae,!0))),(A=this.i.toString())&&d.push("?",A),(A=this.m)&&d.push("#",Es(A,Wc)),d.join("")};function Ue(d){return new Wn(d)}function zt(d,E,A){d.j=A?hn(E,!0):E,d.j&&(d.j=d.j.replace(/:$/,""))}function X(d,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);d.s=E}else d.s=null}function b(d,E,A){E instanceof hi?(d.i=E,Kr(d.i,d.h)):(A||(E=Es(E,Nl)),d.i=new hi(E,d.h))}function de(d,E,A){d.i.set(E,A)}function Ot(d){return de(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function hn(d,E){return d?E?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Es(d,E,A){return typeof d=="string"?(d=encodeURI(d).replace(E,la),A&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function la(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Pn=/[#\/\?@]/g,Ae=/[#\?:]/g,mt=/[#\?]/g,Nl=/[#\?@]/g,Wc=/#/g;function hi(d,E){this.h=this.g=null,this.i=d||null,this.j=!!E}function or(d){d.g||(d.g=new Map,d.h=0,d.i&&Hc(d.i,function(E,A){d.add(decodeURIComponent(E.replace(/\+/g," ")),A)}))}t=hi.prototype,t.add=function(d,E){or(this),this.i=null,d=xr(this,d);var A=this.g.get(d);return A||this.g.set(d,A=[]),A.push(E),this.h+=1,this};function lo(d,E){or(d),E=xr(d,E),d.g.has(E)&&(d.i=null,d.h-=d.g.get(E).length,d.g.delete(E))}function Ol(d,E){return or(d),E=xr(d,E),d.g.has(E)}t.forEach=function(d,E){or(this),this.g.forEach(function(A,R){A.forEach(function(j){d.call(E,j,R,this)},this)},this)},t.na=function(){or(this);const d=Array.from(this.g.values()),E=Array.from(this.g.keys()),A=[];for(let R=0;R<E.length;R++){const j=d[R];for(let $=0;$<j.length;$++)A.push(E[R])}return A},t.V=function(d){or(this);let E=[];if(typeof d=="string")Ol(this,d)&&(E=E.concat(this.g.get(xr(this,d))));else{d=Array.from(this.g.values());for(let A=0;A<d.length;A++)E=E.concat(d[A])}return E},t.set=function(d,E){return or(this),this.i=null,d=xr(this,d),Ol(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[E]),this.h+=1,this},t.get=function(d,E){return d?(d=this.V(d),0<d.length?String(d[0]):E):E};function Ht(d,E,A){lo(d,E),0<A.length&&(d.i=null,d.g.set(xr(d,E),q(A)),d.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],E=Array.from(this.g.keys());for(var A=0;A<E.length;A++){var R=E[A];const $=encodeURIComponent(String(R)),ce=this.V(R);for(R=0;R<ce.length;R++){var j=$;ce[R]!==""&&(j+="="+encodeURIComponent(String(ce[R]))),d.push(j)}}return this.i=d.join("&")};function xr(d,E){return E=String(E),d.j&&(E=E.toLowerCase()),E}function Kr(d,E){E&&!d.j&&(or(d),d.i=null,d.g.forEach(function(A,R){var j=R.toLowerCase();R!=j&&(lo(this,R),Ht(this,j,A))},d)),d.j=E}function Te(d,E){const A=new li;if(m.Image){const R=new Image;R.onload=U(Ne,A,"TestLoadImage: loaded",!0,E,R),R.onerror=U(Ne,A,"TestLoadImage: error",!1,E,R),R.onabort=U(Ne,A,"TestLoadImage: abort",!1,E,R),R.ontimeout=U(Ne,A,"TestLoadImage: timeout",!1,E,R),m.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else E(!1)}function Gc(d,E){const A=new li,R=new AbortController,j=setTimeout(()=>{R.abort(),Ne(A,"TestPingServer: timeout",!1,E)},1e4);fetch(d,{signal:R.signal}).then($=>{clearTimeout(j),$.ok?Ne(A,"TestPingServer: ok",!0,E):Ne(A,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(j),Ne(A,"TestPingServer: error",!1,E)})}function Ne(d,E,A,R,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),R(A)}catch{}}function en(){this.g=new vt}function jc(d,E,A){const R=A||"";try{It(d,function(j,$){let ce=j;w(j)&&(ce=Nt(j)),E.push(R+$+"="+encodeURIComponent(ce))})}catch(j){throw E.push(R+"type="+encodeURIComponent("_badmap")),j}}function ki(d){this.l=d.Ub||null,this.j=d.eb||!1}Y(ki,ai),ki.prototype.g=function(){return new _s(this.l,this.j)},ki.prototype.i=function(d){return function(){return d}}({});function _s(d,E){lt.call(this),this.D=d,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(_s,lt),t=_s.prototype,t.open=function(d,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=E,this.readyState=1,Or(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(E.body=d),(this.D||m).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Or(this)),this.g&&(this.readyState=3,Or(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qr(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function qr(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var E=d.value?d.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!d.done}))&&(this.response=this.responseText+=E)}d.done?As(this):Or(this),this.readyState==3&&qr(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,As(this))},t.Qa=function(d){this.g&&(this.response=d,As(this))},t.ga=function(){this.g&&As(this)};function As(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Or(d)}t.setRequestHeader=function(d,E){this.u.append(d,E)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],E=this.h.entries();for(var A=E.next();!A.done;)A=A.value,d.push(A[0]+": "+A[1]),A=E.next();return d.join(`\r
`)};function Or(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(_s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Li(d){let E="";return re(d,function(A,R){E+=R,E+=":",E+=A,E+=`\r
`}),E}function fi(d,E,A){e:{for(R in A){var R=!1;break e}R=!0}R||(A=Li(A),typeof d=="string"?A!=null&&encodeURIComponent(String(A)):de(d,E,A))}function yt(d){lt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(yt,lt);var Cs=/^https?$/i,vs=["POST","PUT"];t=yt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,E,A,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);E=E?E.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gr.g(),this.v=this.o?io(this.o):io(Gr),this.g.onreadystatechange=P(this.Ea,this);try{this.B=!0,this.g.open(E,String(d),!0),this.B=!1}catch($){mn(this,$);return}if(d=A||"",A=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var j in R)A.set(j,R[j]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const $ of R.keys())A.set($,R.get($));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(A.keys()).find($=>$.toLowerCase()=="content-type"),j=m.FormData&&d instanceof m.FormData,!(0<=Array.prototype.indexOf.call(vs,E,void 0))||R||j||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ce]of A)this.g.setRequestHeader($,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dl(this),this.u=!0,this.g.send(d),this.u=!1}catch($){mn(this,$)}};function mn(d,E){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=E,d.m=5,ua(d),Is(d)}function ua(d){d.A||(d.A=!0,ln(d,"complete"),ln(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ln(this,"complete"),ln(this,"abort"),Is(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Is(this,!0)),yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ca(this):this.bb())},t.bb=function(){ca(this)};function ca(d){if(d.h&&typeof g<"u"&&(!d.v[1]||Dr(d)!=4||d.Z()!=2)){if(d.u&&Dr(d)==4)un(d.Ea,0,d);else if(ln(d,"readystatechange"),Dr(d)==4){d.h=!1;try{const ce=d.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var A;if(!(A=E)){var R;if(R=ce===0){var j=String(d.D).match(Nr)[1]||null;!j&&m.self&&m.self.location&&(j=m.self.location.protocol.slice(0,-1)),R=!Cs.test(j?j.toLowerCase():"")}A=R}if(A)ln(d,"complete"),ln(d,"success");else{d.m=6;try{var $=2<Dr(d)?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.Z()+"]",ua(d)}}finally{Is(d)}}}}function Is(d,E){if(d.g){Dl(d);const A=d.g,R=d.v[0]?()=>{}:null;d.g=null,d.v=null,E||ln(d,"ready");try{A.onreadystatechange=R}catch{}}}function Dl(d){d.I&&(m.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Dr(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Dr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var E=this.g.responseText;return d&&E.indexOf(d)==0&&(E=E.substring(d.length)),rt(E)}};function bl(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function et(d){const E={};d=(d.g&&2<=Dr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(k(d[R]))continue;var A=G(d[R]);const j=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const $=E[j]||[];E[j]=$,$.push(A)}D(E,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(d,E,A){return A&&A.internalChannelParams&&A.internalChannelParams[d]||E}function Ts(d){this.Aa=0,this.i=[],this.j=new li,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bi("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bi("baseRetryDelayMs",5e3,d),this.cb=Bi("retryDelaySeedMs",1e4,d),this.Wa=Bi("forwardChannelMaxRetries",2,d),this.wa=Bi("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ke(d&&d.concurrentRequestLimit),this.Da=new en,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ts.prototype,t.la=8,t.G=1,t.connect=function(d,E,A,R){dt(0),this.W=d,this.H=E||{},A&&R!==void 0&&(this.H.OSID=A,this.H.OAID=R),this.F=this.X,this.I=ve(this,null,this.W),De(this)};function Er(d){if(Z(d),d.G==3){var E=d.U++,A=Ue(d.I);if(de(A,"SID",d.K),de(A,"RID",E),de(A,"TYPE","terminate"),Fi(d,A),E=new rr(d,d.j,E),E.L=2,E.v=Ot(Ue(A)),A=!1,m.navigator&&m.navigator.sendBeacon)try{A=m.navigator.sendBeacon(E.v.toString(),"")}catch{}!A&&m.Image&&(new Image().src=E.v,A=!0),A||(E.g=kl(E.j,null),E.g.ea(E.v)),E.F=Date.now(),sr(E)}tt(d)}function uo(d){d.g&&(Rs(d),d.g.cancel(),d.g=null)}function Z(d){uo(d),d.u&&(m.clearTimeout(d.u),d.u=null),Vi(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&m.clearTimeout(d.s),d.s=null)}function De(d){if(!Ge(d.h)&&!d.s){d.s=!0;var E=d.Ga;Se||Re(),ge||(Se(),ge=!0),Ce.add(E,d),d.B=0}}function tn(d,E){return Le(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=E.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=nr(P(d.Ga,d,E),Ns(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const j=new rr(this,this.j,d);let $=this.o;if(this.S&&($?($=O($),F($,this.S)):$=this.S),this.m!==null||this.O||(j.H=$,$=null),this.P)e:{for(var E=0,A=0;A<this.i.length;A++){t:{var R=this.i[A];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(E+=R,4096<E){E=A;break e}if(E===4096||A===this.i.length-1){E=A+1;break e}}E=1e3}else E=1e3;E=Pl(this,j,E),A=Ue(this.I),de(A,"RID",d),de(A,"CVER",22),this.D&&de(A,"X-HTTP-Session-Id",this.D),Fi(this,A),$&&(this.O?E="headers="+encodeURIComponent(String(Li($)))+"&"+E:this.m&&fi(A,this.m,$)),xs(this.h,j),this.Ua&&de(A,"TYPE","init"),this.P?(de(A,"$req",E),de(A,"SID","null"),j.T=!0,Hn(j,A,null)):Hn(j,A,E),this.G=2}}else this.G==3&&(d?Ss(this,d):this.i.length==0||Ge(this.h)||Ss(this))};function Ss(d,E){var A;E?A=E.l:A=d.U++;const R=Ue(d.I);de(R,"SID",d.K),de(R,"RID",A),de(R,"AID",d.T),Fi(d,R),d.m&&d.o&&fi(R,d.m,d.o),A=new rr(d,d.j,A,d.B+1),d.m===null&&(A.H=d.o),E&&(d.i=E.D.concat(d.i)),E=Pl(d,A,1e3),A.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),xs(d.h,A),Hn(A,R,E)}function Fi(d,E){d.H&&re(d.H,function(A,R){de(E,R,A)}),d.l&&It({},function(A,R){de(E,R,A)})}function Pl(d,E,A){A=Math.min(d.i.length,A);var R=d.l?P(d.l.Na,d.l,d):null;e:{var j=d.i;let $=-1;for(;;){const ce=["count="+A];$==-1?0<A?($=j[0].g,ce.push("ofs="+$)):$=0:ce.push("ofs="+$);let it=!0;for(let Dt=0;Dt<A;Dt++){let je=j[Dt].g;const xt=j[Dt].map;if(je-=$,0>je)$=Math.max(0,j[Dt].g-100),it=!1;else try{jc(xt,ce,"req"+je+"_")}catch{R&&R(xt)}}if(it){R=ce.join("&");break e}}}return d=d.i.splice(0,A),E.D=d,R}function Ml(d){if(!d.g&&!d.u){d.Y=1;var E=d.Fa;Se||Re(),ge||(Se(),ge=!0),Ce.add(E,d),d.v=0}}function ha(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=nr(P(d.Fa,d),Ns(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,Ft(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=nr(P(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),uo(this),Ft(this))};function Rs(d){d.A!=null&&(m.clearTimeout(d.A),d.A=null)}function Ft(d){d.g=new rr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var E=Ue(d.qa);de(E,"RID","rpc"),de(E,"SID",d.K),de(E,"AID",d.T),de(E,"CI",d.F?"0":"1"),!d.F&&d.ja&&de(E,"TO",d.ja),de(E,"TYPE","xmlhttp"),Fi(d,E),d.m&&d.o&&fi(E,d.m,d.o),d.L&&(d.g.I=d.L);var A=d.g;d=d.ia,A.L=1,A.v=Ot(Ue(E)),A.m=null,A.P=!0,cn(A,d)}t.Za=function(){this.C!=null&&(this.C=null,uo(this),ha(this),dt(19))};function Vi(d){d.C!=null&&(m.clearTimeout(d.C),d.C=null)}function wt(d,E){var A=null;if(d.g==E){Vi(d),Rs(d),d.g=null;var R=2}else if(ws(d.h,E))A=E.D,ao(d.h,E),R=1;else return;if(d.G!=0){if(E.o)if(R==1){A=E.m?E.m.length:0,E=Date.now()-E.F;var j=d.B;R=bi(),ln(R,new Tl(R,A)),De(d)}else Ml(d);else if(j=E.s,j==3||j==0&&0<E.X||!(R==1&&tn(d,E)||R==2&&ha(d)))switch(A&&0<A.length&&(E=d.h,E.i=E.i.concat(A)),j){case 1:Mn(d,5);break;case 4:Mn(d,10);break;case 3:Mn(d,6);break;default:Mn(d,2)}}}function Ns(d,E){let A=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(A*=2),A*E}function Mn(d,E){if(d.j.info("Error code "+E),E==2){var A=P(d.fb,d),R=d.Xa;const j=!R;R=new Wn(R||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||zt(R,"https"),Ot(R),j?Te(R.toString(),A):Gc(R.toString(),A)}else dt(2);d.G=0,d.l&&d.l.sa(E),tt(d),Z(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function tt(d){if(d.G=0,d.ka=[],d.l){const E=Bt(d.h);(E.length!=0||d.i.length!=0)&&(te(d.ka,E),te(d.ka,d.i),d.h.i.length=0,q(d.i),d.i.length=0),d.l.ra()}}function ve(d,E,A){var R=A instanceof Wn?Ue(A):new Wn(A);if(R.g!="")E&&(R.g=E+"."+R.g),X(R,R.s);else{var j=m.location;R=j.protocol,E=E?E+"."+j.hostname:j.hostname,j=+j.port;var $=new Wn(null);R&&zt($,R),E&&($.g=E),j&&X($,j),A&&($.l=A),R=$}return A=d.D,E=d.ya,A&&E&&de(R,A,E),de(R,"VER",d.la),Fi(d,R),R}function kl(d,E,A){if(E&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=d.Ca&&!d.pa?new yt(new ki({eb:A})):new yt(d.pa),E.Ha(d.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ut(){}t=ut.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _r(){}_r.prototype.g=function(d,E){return new Kt(d,E)};function Kt(d,E){lt.call(this),this.g=new Ts(E),this.l=d,this.h=E&&E.messageUrlParams||null,d=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(d?d["X-WebChannel-Content-Type"]=E.messageContentType:d={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(d?d["X-WebChannel-Client-Profile"]=E.va:d={"X-WebChannel-Client-Profile":E.va}),this.g.S=d,(d=E&&E.Sb)&&!k(d)&&(this.g.m=d),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!k(E)&&(this.g.D=E,d=this.h,d!==null&&E in d&&(d=this.h,E in d&&delete d[E])),this.j=new Yr(this)}Y(Kt,lt),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Er(this.g)},Kt.prototype.o=function(d){var E=this.g;if(typeof d=="string"){var A={};A.__data__=d,d=A}else this.u&&(A={},A.__data__=Nt(d),d=A);E.i.push(new Uc(E.Ya++,d)),E.G==3&&De(E)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Er(this.g),delete this.g,Kt.aa.N.call(this)};function Ll(d){Rr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var E=d.__sm__;if(E){e:{for(const A in E){d=A;break e}d=void 0}(this.i=d)&&(d=this.i,E=E!==null&&d in E?E[d]:void 0),this.data=E}else this.data=d}Y(Ll,Rr);function ar(){so.call(this),this.status=1}Y(ar,so);function Yr(d){this.g=d}Y(Yr,ut),Yr.prototype.ua=function(){ln(this.g,"a")},Yr.prototype.ta=function(d){ln(this.g,new Ll(d))},Yr.prototype.sa=function(d){ln(this.g,new ar)},Yr.prototype.ra=function(){ln(this.g,"b")},_r.prototype.createWebChannel=_r.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,h2=function(){return new _r},c2=function(){return bi()},u2=Wr,Df={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,yu=Mi,pn.COMPLETE="complete",l2=pn,oa.EventType=Be,Be.OPEN="a",Be.CLOSE="b",Be.ERROR="c",Be.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Ra=oa,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,a2=yt}).apply(typeof tu<"u"?tu:typeof self<"u"?self:typeof window<"u"?window:{});const Y0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new e2("@firebase/firestore");function Ca(){return js.logLevel}function xe(t,...e){if(js.logLevel<=Ye.DEBUG){const n=e.map(H1);js.debug(`Firestore (${na}): ${t}`,...n)}}function Ti(t,...e){if(js.logLevel<=Ye.ERROR){const n=e.map(H1);js.error(`Firestore (${na}): ${t}`,...n)}}function jo(t,...e){if(js.logLevel<=Ye.WARN){const n=e.map(H1);js.warn(`Firestore (${na}): ${t}`,...n)}}function H1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t="Unexpected state"){const e=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: `+t;throw Ti(e),new Error(e)}function ot(t,e){t||Oe()}function Pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ta{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nn.UNAUTHENTICATED))}shutdown(){}}class lA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uA{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ot(this.o===void 0);let i=this.i;const a=x=>this.i!==i?(i=this.i,n(x)):Promise.resolve();let u=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new xi,e.enqueueRetryable(()=>a(this.currentUser))};const g=()=>{const x=u;e.enqueueRetryable(async()=>{await x.promise,await a(this.currentUser)})},m=x=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),g())};this.t.onInit(x=>m(x)),setTimeout(()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?m(x):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new xi)}},0),g()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ot(typeof i.accessToken=="string"),new f2(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string"),new Nn(e)}}class cA{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hA{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new cA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ot(this.o===void 0);const i=u=>{u.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const g=u.token!==this.R;return this.R=u.token,xe("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>i(u))};const a=u=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>a(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?a(u):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ot(typeof n.token=="string"),this.R=n.token,new fA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const a=gA(40);for(let u=0;u<a.length;++u)i.length<20&&a[u]<n&&(i+=e.charAt(a[u]%e.length))}return i}}function Ze(t,e){return t<e?-1:t>e?1:0}function Xo(t,e,n){return t.length===e.length&&t.every((i,a)=>n(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _e(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _e(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new _e(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return an.fromMillis(Date.now())}static fromDate(e){return an.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new an(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new an(0,0))}static max(){return new be(new an(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n,i){n===void 0?n=0:n>e.length&&Oe(),i===void 0?i=e.length-n:i>e.length-n&&Oe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return cl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const u=e.get(a),g=n.get(a);if(u<g)return-1;if(u>g)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class St extends cl{construct(e,n,i){return new St(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(se.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(a=>a.length>0))}return new St(n)}static emptyPath(){return new St([])}}const pA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends cl{construct(e,n,i){return new En(e,n,i)}static isValidIdentifier(e){return pA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new En(["__name__"])}static fromServerFormat(e){const n=[];let i="",a=0;const u=()=>{if(i.length===0)throw new _e(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let g=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new _e(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[a+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new _e(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=x,a+=2}else m==="`"?(g=!g,a++):m!=="."||g?(i+=m,a++):(u(),a++)}if(u(),g)throw new _e(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(n)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(St.fromString(e))}static fromName(e){return new Ie(St.fromString(e).popFirst(5))}static empty(){return new Ie(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return St.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new St(e.slice()))}}function mA(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,a=be.fromTimestamp(i===1e9?new an(n+1,0):new an(n,i));return new ls(a,Ie.empty(),e)}function yA(t){return new ls(t.readTime,t.key,-1)}class ls{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ls(be.min(),Ie.empty(),-1)}static max(){return new ls(be.max(),Ie.empty(),-1)}}function wA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(t){if(t.code!==se.FAILED_PRECONDITION||t.message!==xA)throw t;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe((i,a)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,a)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):oe.reject(n)}static resolve(e){return new oe((n,i)=>{n(e)})}static reject(e){return new oe((n,i)=>{i(e)})}static waitFor(e){return new oe((n,i)=>{let a=0,u=0,g=!1;e.forEach(m=>{++a,m.next(()=>{++u,g&&u===a&&n()},x=>i(x))}),g=!0,u===a&&n()})}static or(e){let n=oe.resolve(!1);for(const i of e)n=n.next(a=>a?oe.resolve(a):i());return n}static forEach(e,n){const i=[];return e.forEach((a,u)=>{i.push(n.call(this,a,u))}),this.waitFor(i)}static mapArray(e,n){return new oe((i,a)=>{const u=e.length,g=new Array(u);let m=0;for(let x=0;x<u;x++){const w=x;n(e[w]).next(I=>{g[w]=I,++m,m===u&&i(g)},I=>a(I))}})}static doWhile(e,n){return new oe((i,a)=>{const u=()=>{e()===!0?n().next(()=>{u()},a):i()};u()})}}function _A(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Al(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}W1.oe=-1;function Cc(t){return t==null}function $u(t){return t===0&&1/t==-1/0}function AA(t){return typeof t=="number"&&Number.isInteger(t)&&!$u(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function g2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){this.comparator=e,this.root=n||xn.EMPTY}insert(e,n){return new Lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nu(this.root,e,this.comparator,!1)}getReverseIterator(){return new nu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nu(this.root,e,this.comparator,!0)}}class nu{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&a&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xn{constructor(e,n,i,a,u){this.key=e,this.value=n,this.color=i??xn.RED,this.left=a??xn.EMPTY,this.right=u??xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,u){return new xn(e??this.key,n??this.value,i??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const u=i(e,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(e,n,i),null):u===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return xn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Oe();const e=this.left.check();if(e!==this.right.check())throw Oe();return e+(this.isRed()?0:1)}}xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe()}get value(){throw Oe()}get color(){throw Oe()}get left(){throw Oe()}get right(){throw Oe()}copy(e,n,i,a,u){return this}insert(e,n,i){return new xn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Z0(this.data.getIterator())}getIteratorFrom(e){return new Z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,u=i.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new An(this.comparator);return n.data=e,n}}class Z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new Br([])}unionWith(e){let n=new An(En.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Br(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new p2("Invalid base64 string: "+u):u}}(e);return new vn(n)}static fromUint8Array(e){const n=function(a){let u="";for(let g=0;g<a.length;++g)u+=String.fromCharCode(a[g]);return u}(e);return new vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vn.EMPTY_BYTE_STRING=new vn("");const CA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function us(t){if(ot(!!t),typeof t=="string"){let e=0;const n=CA.exec(t);if(ot(!!n),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gt(t.seconds),nanos:Gt(t.nanos)}}function Gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xs(t){return typeof t=="string"?vn.fromBase64String(t):vn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function j1(t){const e=t.mapValue.fields.__previous_value__;return G1(e)?j1(e):e}function hl(t){const e=us(t.mapValue.fields.__local_write_time__.timestampValue);return new an(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n,i,a,u,g,m,x,w){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=u,this.forceLongPolling=g,this.autoDetectLongPolling=m,this.longPollingOptions=x,this.useFetchStreams=w}}class fl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ks(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?G1(t)?4:TA(t)?9007199254740991:IA(t)?10:11:Oe()}function si(t,e){if(t===e)return!0;const n=Ks(t);if(n!==Ks(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hl(t).isEqual(hl(e));case 3:return function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const g=us(a.timestampValue),m=us(u.timestampValue);return g.seconds===m.seconds&&g.nanos===m.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,u){return Xs(a.bytesValue).isEqual(Xs(u.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,u){return Gt(a.geoPointValue.latitude)===Gt(u.geoPointValue.latitude)&&Gt(a.geoPointValue.longitude)===Gt(u.geoPointValue.longitude)}(t,e);case 2:return function(a,u){if("integerValue"in a&&"integerValue"in u)return Gt(a.integerValue)===Gt(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const g=Gt(a.doubleValue),m=Gt(u.doubleValue);return g===m?$u(g)===$u(m):isNaN(g)&&isNaN(m)}return!1}(t,e);case 9:return Xo(t.arrayValue.values||[],e.arrayValue.values||[],si);case 10:case 11:return function(a,u){const g=a.mapValue.fields||{},m=u.mapValue.fields||{};if(Q0(g)!==Q0(m))return!1;for(const x in g)if(g.hasOwnProperty(x)&&(m[x]===void 0||!si(g[x],m[x])))return!1;return!0}(t,e);default:return Oe()}}function dl(t,e){return(t.values||[]).find(n=>si(n,e))!==void 0}function Ko(t,e){if(t===e)return 0;const n=Ks(t),i=Ks(e);if(n!==i)return Ze(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(t.booleanValue,e.booleanValue);case 2:return function(u,g){const m=Gt(u.integerValue||u.doubleValue),x=Gt(g.integerValue||g.doubleValue);return m<x?-1:m>x?1:m===x?0:isNaN(m)?isNaN(x)?0:-1:1}(t,e);case 3:return $0(t.timestampValue,e.timestampValue);case 4:return $0(hl(t),hl(e));case 5:return Ze(t.stringValue,e.stringValue);case 6:return function(u,g){const m=Xs(u),x=Xs(g);return m.compareTo(x)}(t.bytesValue,e.bytesValue);case 7:return function(u,g){const m=u.split("/"),x=g.split("/");for(let w=0;w<m.length&&w<x.length;w++){const I=Ze(m[w],x[w]);if(I!==0)return I}return Ze(m.length,x.length)}(t.referenceValue,e.referenceValue);case 8:return function(u,g){const m=Ze(Gt(u.latitude),Gt(g.latitude));return m!==0?m:Ze(Gt(u.longitude),Gt(g.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return J0(t.arrayValue,e.arrayValue);case 10:return function(u,g){var m,x,w,I;const S=u.fields||{},P=g.fields||{},U=(m=S.value)===null||m===void 0?void 0:m.arrayValue,Y=(x=P.value)===null||x===void 0?void 0:x.arrayValue,q=Ze(((w=U==null?void 0:U.values)===null||w===void 0?void 0:w.length)||0,((I=Y==null?void 0:Y.values)===null||I===void 0?void 0:I.length)||0);return q!==0?q:J0(U,Y)}(t.mapValue,e.mapValue);case 11:return function(u,g){if(u===ru.mapValue&&g===ru.mapValue)return 0;if(u===ru.mapValue)return 1;if(g===ru.mapValue)return-1;const m=u.fields||{},x=Object.keys(m),w=g.fields||{},I=Object.keys(w);x.sort(),I.sort();for(let S=0;S<x.length&&S<I.length;++S){const P=Ze(x[S],I[S]);if(P!==0)return P;const U=Ko(m[x[S]],w[I[S]]);if(U!==0)return U}return Ze(x.length,I.length)}(t.mapValue,e.mapValue);default:throw Oe()}}function $0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ze(t,e);const n=us(t),i=us(e),a=Ze(n.seconds,i.seconds);return a!==0?a:Ze(n.nanos,i.nanos)}function J0(t,e){const n=t.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const u=Ko(n[a],i[a]);if(u)return u}return Ze(n.length,i.length)}function qo(t){return bf(t)}function bf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=us(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",a=!0;for(const u of n.values||[])a?a=!1:i+=",",i+=bf(u);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let a="{",u=!0;for(const g of i)u?u=!1:a+=",",a+=`${g}:${bf(n.fields[g])}`;return a+"}"}(t.mapValue):Oe()}function Pf(t){return!!t&&"integerValue"in t}function X1(t){return!!t&&"arrayValue"in t}function eg(t){return!!t&&"nullValue"in t}function tg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wu(t){return!!t&&"mapValue"in t}function IA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function za(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=za(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=za(t.arrayValue.values[n]);return e}return Object.assign({},t)}function TA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.value=e}static empty(){return new hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!wu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=za(n)}setAll(e){let n=En.emptyPath(),i={},a=[];e.forEach((g,m)=>{if(!n.isImmediateParentOf(m)){const x=this.getFieldsMap(n);this.applyChanges(x,i,a),i={},a=[],n=m.popLast()}g?i[m.lastSegment()]=za(g):a.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,i,a)}delete(e){const n=this.field(e.popLast());wu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];wu(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){Zs(n,(a,u)=>e[a]=u);for(const a of i)delete e[a]}clone(){return new hr(za(this.value))}}function m2(t){const e=[];return Zs(t.fields,(n,i)=>{const a=new En([n]);if(wu(i)){const u=m2(i.mapValue).fields;if(u.length===0)e.push(a);else for(const g of u)e.push(a.child(g))}else e.push(a)}),new Br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n,i,a,u,g,m){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=u,this.data=g,this.documentState=m}static newInvalidDocument(e){return new Dn(e,0,be.min(),be.min(),be.min(),hr.empty(),0)}static newFoundDocument(e,n,i,a){return new Dn(e,1,n,be.min(),i,a,0)}static newNoDocument(e,n){return new Dn(e,2,n,be.min(),be.min(),hr.empty(),0)}static newUnknownDocument(e,n){return new Dn(e,3,n,be.min(),be.min(),hr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n){this.position=e,this.inclusive=n}}function ng(t,e,n){let i=0;for(let a=0;a<t.position.length;a++){const u=e[a],g=t.position[a];if(u.field.isKeyField()?i=Ie.comparator(Ie.fromName(g.referenceValue),n.key):i=Ko(g,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function rg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!si(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n="asc"){this.field=e,this.dir=n}}function SA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{}class sn extends y2{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new NA(e,n,i):n==="array-contains"?new bA(e,i):n==="in"?new PA(e,i):n==="not-in"?new MA(e,i):n==="array-contains-any"?new kA(e,i):new sn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new OA(e,i):new DA(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ko(n,this.value)):n!==null&&Ks(this.value)===Ks(n)&&this.matchesComparison(Ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends y2{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new oi(e,n)}matches(e){return w2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function w2(t){return t.op==="and"}function x2(t){return RA(t)&&w2(t)}function RA(t){for(const e of t.filters)if(e instanceof oi)return!1;return!0}function Mf(t){if(t instanceof sn)return t.field.canonicalString()+t.op.toString()+qo(t.value);if(x2(t))return t.filters.map(e=>Mf(e)).join(",");{const e=t.filters.map(n=>Mf(n)).join(",");return`${t.op}(${e})`}}function E2(t,e){return t instanceof sn?function(i,a){return a instanceof sn&&i.op===a.op&&i.field.isEqual(a.field)&&si(i.value,a.value)}(t,e):t instanceof oi?function(i,a){return a instanceof oi&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((u,g,m)=>u&&E2(g,a.filters[m]),!0):!1}(t,e):void Oe()}function _2(t){return t instanceof sn?function(n){return`${n.field.canonicalString()} ${n.op} ${qo(n.value)}`}(t):t instanceof oi?function(n){return n.op.toString()+" {"+n.getFilters().map(_2).join(" ,")+"}"}(t):"Filter"}class NA extends sn{constructor(e,n,i){super(e,n,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class OA extends sn{constructor(e,n){super(e,"in",n),this.keys=A2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DA extends sn{constructor(e,n){super(e,"not-in",n),this.keys=A2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function A2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Ie.fromName(i.referenceValue))}class bA extends sn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return X1(n)&&dl(n.arrayValue,this.value)}}class PA extends sn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&dl(this.value.arrayValue,n)}}class MA extends sn{constructor(e,n){super(e,"not-in",n)}matches(e){if(dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!dl(this.value.arrayValue,n)}}class kA extends sn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!X1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>dl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n=null,i=[],a=[],u=null,g=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=u,this.startAt=g,this.endAt=m,this.ue=null}}function ig(t,e=null,n=[],i=[],a=null,u=null,g=null){return new LA(t,e,n,i,a,u,g)}function K1(t){const e=Pe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Mf(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(u){return u.field.canonicalString()+u.dir}(i)).join(","),Cc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>qo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>qo(i)).join(",")),e.ue=n}return e.ue}function q1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!E2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rg(t.startAt,e.startAt)&&rg(t.endAt,e.endAt)}function kf(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n=null,i=[],a=[],u=null,g="F",m=null,x=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=u,this.limitType=g,this.startAt=m,this.endAt=x,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function BA(t,e,n,i,a,u,g,m){return new vc(t,e,n,i,a,u,g,m)}function Y1(t){return new vc(t)}function sg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FA(t){return t.collectionGroup!==null}function Ha(t){const e=Pe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let m=new An(En.comparator);return g.filters.forEach(x=>{x.getFlattenedFilters().forEach(w=>{w.isInequality()&&(m=m.add(w.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.ce.push(new ec(u,i))}),n.has(En.keyField().canonicalString())||e.ce.push(new ec(En.keyField(),i))}return e.ce}function ri(t){const e=Pe(t);return e.le||(e.le=VA(e,Ha(t))),e.le}function VA(t,e){if(t.limitType==="F")return ig(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const u=a.dir==="desc"?"asc":"desc";return new ec(a.field,u)});const n=t.endAt?new Ju(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ju(t.startAt.position,t.startAt.inclusive):null;return ig(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Lf(t,e,n){return new vc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ic(t,e){return q1(ri(t),ri(e))&&t.limitType===e.limitType}function C2(t){return`${K1(ri(t))}|lt:${t.limitType}`}function go(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(a=>_2(a)).join(", ")}]`),Cc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(a=>function(g){return`${g.field.canonicalString()} (${g.dir})`}(a)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(a=>qo(a)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(a=>qo(a)).join(",")),`Target(${i})`}(ri(t))}; limitType=${t.limitType})`}function Tc(t,e){return e.isFoundDocument()&&function(i,a){const u=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Ie.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)}(t,e)&&function(i,a){for(const u of Ha(i))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0}(t,e)&&function(i,a){for(const u of i.filters)if(!u.matches(a))return!1;return!0}(t,e)&&function(i,a){return!(i.startAt&&!function(g,m,x){const w=ng(g,m,x);return g.inclusive?w<=0:w<0}(i.startAt,Ha(i),a)||i.endAt&&!function(g,m,x){const w=ng(g,m,x);return g.inclusive?w>=0:w>0}(i.endAt,Ha(i),a))}(t,e)}function UA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function v2(t){return(e,n)=>{let i=!1;for(const a of Ha(t)){const u=zA(a,e,n);if(u!==0)return u;i=i||a.field.isKeyField()}return 0}}function zA(t,e,n){const i=t.field.isKeyField()?Ie.comparator(e.key,n.key):function(u,g,m){const x=g.data.field(u),w=m.data.field(u);return x!==null&&w!==null?Ko(x,w):Oe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[a,u]of i)if(this.equalsFn(a,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return void(a[u]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[n]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Zs(this.inner,(n,i)=>{for(const[a,u]of i)e(a,u)})}isEmpty(){return g2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=new Lt(Ie.comparator);function Si(){return HA}const I2=new Lt(Ie.comparator);function Na(...t){let e=I2;for(const n of t)e=e.insert(n.key,n);return e}function T2(t){let e=I2;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Ls(){return Wa()}function S2(){return Wa()}function Wa(){return new ra(t=>t.toString(),(t,e)=>t.isEqual(e))}const WA=new Lt(Ie.comparator),GA=new An(Ie.comparator);function He(...t){let e=GA;for(const n of t)e=e.add(n);return e}const jA=new An(Ze);function XA(){return jA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$u(e)?"-0":e}}function R2(t){return{integerValue:""+t}}function KA(t,e){return AA(e)?R2(e):Q1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(){this._=void 0}}function qA(t,e,n){return t instanceof tc?function(a,u){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&G1(u)&&(u=j1(u)),u&&(g.fields.__previous_value__=u),{mapValue:g}}(n,e):t instanceof gl?O2(t,e):t instanceof pl?D2(t,e):function(a,u){const g=N2(a,u),m=og(g)+og(a.Pe);return Pf(g)&&Pf(a.Pe)?R2(m):Q1(a.serializer,m)}(t,e)}function YA(t,e,n){return t instanceof gl?O2(t,e):t instanceof pl?D2(t,e):n}function N2(t,e){return t instanceof nc?function(i){return Pf(i)||function(u){return!!u&&"doubleValue"in u}(i)}(e)?e:{integerValue:0}:null}class tc extends Sc{}class gl extends Sc{constructor(e){super(),this.elements=e}}function O2(t,e){const n=b2(e);for(const i of t.elements)n.some(a=>si(a,i))||n.push(i);return{arrayValue:{values:n}}}class pl extends Sc{constructor(e){super(),this.elements=e}}function D2(t,e){let n=b2(e);for(const i of t.elements)n=n.filter(a=>!si(a,i));return{arrayValue:{values:n}}}class nc extends Sc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function og(t){return Gt(t.integerValue||t.doubleValue)}function b2(t){return X1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function QA(t,e){return t.field.isEqual(e.field)&&function(i,a){return i instanceof gl&&a instanceof gl||i instanceof pl&&a instanceof pl?Xo(i.elements,a.elements,si):i instanceof nc&&a instanceof nc?si(i.Pe,a.Pe):i instanceof tc&&a instanceof tc}(t.transform,e.transform)}class ZA{constructor(e,n){this.version=e,this.transformResults=n}}class Ei{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ei}static exists(e){return new Ei(void 0,e)}static updateTime(e){return new Ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rc{}function P2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new k2(t.key,Ei.none()):new Nc(t.key,t.data,Ei.none());{const n=t.data,i=hr.empty();let a=new An(En.comparator);for(let u of e.fields)if(!a.has(u)){let g=n.field(u);g===null&&u.length>1&&(u=u.popLast(),g=n.field(u)),g===null?i.delete(u):i.set(u,g),a=a.add(u)}return new $s(t.key,i,new Br(a.toArray()),Ei.none())}}function $A(t,e,n){t instanceof Nc?function(a,u,g){const m=a.value.clone(),x=lg(a.fieldTransforms,u,g.transformResults);m.setAll(x),u.convertToFoundDocument(g.version,m).setHasCommittedMutations()}(t,e,n):t instanceof $s?function(a,u,g){if(!xu(a.precondition,u))return void u.convertToUnknownDocument(g.version);const m=lg(a.fieldTransforms,u,g.transformResults),x=u.data;x.setAll(M2(a)),x.setAll(m),u.convertToFoundDocument(g.version,x).setHasCommittedMutations()}(t,e,n):function(a,u,g){u.convertToNoDocument(g.version).setHasCommittedMutations()}(0,e,n)}function Ga(t,e,n,i){return t instanceof Nc?function(u,g,m,x){if(!xu(u.precondition,g))return m;const w=u.value.clone(),I=ug(u.fieldTransforms,x,g);return w.setAll(I),g.convertToFoundDocument(g.version,w).setHasLocalMutations(),null}(t,e,n,i):t instanceof $s?function(u,g,m,x){if(!xu(u.precondition,g))return m;const w=ug(u.fieldTransforms,x,g),I=g.data;return I.setAll(M2(u)),I.setAll(w),g.convertToFoundDocument(g.version,I).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(S=>S.field))}(t,e,n,i):function(u,g,m){return xu(u.precondition,g)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):m}(t,e,n)}function JA(t,e){let n=null;for(const i of t.fieldTransforms){const a=e.data.field(i.field),u=N2(i.transform,a||null);u!=null&&(n===null&&(n=hr.empty()),n.set(i.field,u))}return n||null}function ag(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Xo(i,a,(u,g)=>QA(u,g))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nc extends Rc{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class $s extends Rc{constructor(e,n,i,a,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function M2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function lg(t,e,n){const i=new Map;ot(t.length===n.length);for(let a=0;a<n.length;a++){const u=t[a],g=u.transform,m=e.data.field(u.field);i.set(u.field,YA(g,m,n[a]))}return i}function ug(t,e,n){const i=new Map;for(const a of t){const u=a.transform,g=n.data.field(a.field);i.set(a.field,qA(u,g,e))}return i}class k2 extends Rc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e3 extends Rc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n,i,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(e.key)&&$A(u,e,i[a])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ga(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ga(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=S2();return this.mutations.forEach(a=>{const u=e.get(a.key),g=u.overlayedDocument;let m=this.applyToLocalView(g,u.mutatedFields);m=n.has(a.key)?null:m;const x=P2(g,m);x!==null&&i.set(a.key,x),g.isValidDocument()||g.convertToNoDocument(be.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),He())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(n,i)=>ag(n,i))&&Xo(this.baseMutations,e.baseMutations,(n,i)=>ag(n,i))}}class Z1{constructor(e,n,i,a){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=a}static from(e,n,i){ot(e.mutations.length===i.length);let a=function(){return WA}();const u=e.mutations;for(let g=0;g<u.length;g++)a=a.insert(u[g].key,i[g].version);return new Z1(e,n,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Xe;function i3(t){switch(t){default:return Oe();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function L2(t){if(t===void 0)return Ti("GRPC error has no .code"),se.UNKNOWN;switch(t){case qt.OK:return se.OK;case qt.CANCELLED:return se.CANCELLED;case qt.UNKNOWN:return se.UNKNOWN;case qt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case qt.INTERNAL:return se.INTERNAL;case qt.UNAVAILABLE:return se.UNAVAILABLE;case qt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case qt.NOT_FOUND:return se.NOT_FOUND;case qt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case qt.ABORTED:return se.ABORTED;case qt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case qt.DATA_LOSS:return se.DATA_LOSS;default:return Oe()}}(Xe=qt||(qt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3=new Vs([4294967295,4294967295],0);function cg(t){const e=s3().encode(t),n=new o2;return n.update(e),new Uint8Array(n.digest())}function hg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Vs([n,i],0),new Vs([a,u],0)]}class $1{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Oa(`Invalid padding: ${n}`);if(i<0)throw new Oa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Oa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Oa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Vs.fromNumber(this.Ie)}Ee(e,n,i){let a=e.add(n.multiply(Vs.fromNumber(i)));return a.compare(o3)===1&&(a=new Vs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=cg(e),[i,a]=hg(n);for(let u=0;u<this.hashCount;u++){const g=this.Ee(i,a,u);if(!this.de(g))return!1}return!0}static create(e,n,i){const a=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),g=new $1(u,a,n);return i.forEach(m=>g.insert(m)),g}insert(e){if(this.Ie===0)return;const n=cg(e),[i,a]=hg(n);for(let u=0;u<this.hashCount;u++){const g=this.Ee(i,a,u);this.Ae(g)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Oa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n,i,a,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const a=new Map;return a.set(e,Cl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Oc(be.min(),a,new Lt(Ze),Si(),He())}}class Cl{constructor(e,n,i,a,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Cl(i,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,i,a){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=a}}class B2{constructor(e,n){this.targetId=e,this.me=n}}class F2{constructor(e,n,i=vn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=a}}class fg{constructor(){this.fe=0,this.ge=gg(),this.pe=vn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=He(),n=He(),i=He();return this.ge.forEach((a,u)=>{switch(u){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:i=i.add(a);break;default:Oe()}}),new Cl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=gg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ot(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class a3{constructor(e){this.Le=e,this.Be=new Map,this.ke=Si(),this.qe=dg(),this.Qe=new Lt(Ze)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,a)=>{this.ze(a)&&n(a)})}He(e){const n=e.targetId,i=e.me.count,a=this.Je(n);if(a){const u=a.target;if(kf(u))if(i===0){const g=new Ie(u.path);this.Ue(n,g,Dn.newNoDocument(g,be.min()))}else ot(i===1);else{const g=this.Ye(n);if(g!==i){const m=this.Ze(e),x=m?this.Xe(m,e,g):1;if(x!==0){this.je(n);const w=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,w)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:u=0}=n;let g,m;try{g=Xs(i).toUint8Array()}catch(x){if(x instanceof p2)return jo("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{m=new $1(g,a,u)}catch(x){return jo(x instanceof Oa?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return m.Ie===0?null:m}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let a=0;return i.forEach(u=>{const g=this.Le.tt(),m=`projects/${g.projectId}/databases/${g.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.Ue(n,u,null),a++)}),a}rt(e){const n=new Map;this.Be.forEach((u,g)=>{const m=this.Je(g);if(m){if(u.current&&kf(m.target)){const x=new Ie(m.target.path);this.ke.get(x)!==null||this.it(g,x)||this.Ue(g,x,Dn.newNoDocument(x,e))}u.be&&(n.set(g,u.ve()),u.Ce())}});let i=He();this.qe.forEach((u,g)=>{let m=!0;g.forEachWhile(x=>{const w=this.Je(x);return!w||w.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(i=i.add(u))}),this.ke.forEach((u,g)=>g.setReadTime(e));const a=new Oc(e,n,this.Qe,this.ke,i);return this.ke=Si(),this.qe=dg(),this.Qe=new Lt(Ze),a}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,n)?a.Fe(n,1):a.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new fg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new An(Ze),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||xe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new fg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function dg(){return new Lt(Ie.comparator)}function gg(){return new Lt(Ie.comparator)}const l3={asc:"ASCENDING",desc:"DESCENDING"},u3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c3={and:"AND",or:"OR"};class h3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bf(t,e){return t.useProto3Json||Cc(e)?e:{value:e}}function rc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function f3(t,e){return rc(t,e.toTimestamp())}function ii(t){return ot(!!t),be.fromTimestamp(function(n){const i=us(n);return new an(i.seconds,i.nanos)}(t))}function J1(t,e){return Ff(t,e).canonicalString()}function Ff(t,e){const n=function(a){return new St(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?n:n.child(e)}function U2(t){const e=St.fromString(t);return ot(j2(e)),e}function Vf(t,e){return J1(t.databaseId,e.path)}function vh(t,e){const n=U2(e);if(n.get(1)!==t.databaseId.projectId)throw new _e(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _e(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(H2(n))}function z2(t,e){return J1(t.databaseId,e)}function d3(t){const e=U2(t);return e.length===4?St.emptyPath():H2(e)}function Uf(t){return new St(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function H2(t){return ot(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pg(t,e,n){return{name:Vf(t,e),fields:n.value.mapValue.fields}}function g3(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:Oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],u=function(w,I){return w.useProto3Json?(ot(I===void 0||typeof I=="string"),vn.fromBase64String(I||"")):(ot(I===void 0||I instanceof Buffer||I instanceof Uint8Array),vn.fromUint8Array(I||new Uint8Array))}(t,e.targetChange.resumeToken),g=e.targetChange.cause,m=g&&function(w){const I=w.code===void 0?se.UNKNOWN:L2(w.code);return new _e(I,w.message||"")}(g);n=new F2(i,a,u,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=vh(t,i.document.name),u=ii(i.document.updateTime),g=i.document.createTime?ii(i.document.createTime):be.min(),m=new hr({mapValue:{fields:i.document.fields}}),x=Dn.newFoundDocument(a,u,g,m),w=i.targetIds||[],I=i.removedTargetIds||[];n=new Eu(w,I,x.key,x)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=vh(t,i.document),u=i.readTime?ii(i.readTime):be.min(),g=Dn.newNoDocument(a,u),m=i.removedTargetIds||[];n=new Eu([],m,g.key,g)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=vh(t,i.document),u=i.removedTargetIds||[];n=new Eu([],u,a,null)}else{if(!("filter"in e))return Oe();{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:u}=i,g=new r3(a,u),m=i.targetId;n=new B2(m,g)}}return n}function p3(t,e){let n;if(e instanceof Nc)n={update:pg(t,e.key,e.value)};else if(e instanceof k2)n={delete:Vf(t,e.key)};else if(e instanceof $s)n={update:pg(t,e.key,e.data),updateMask:v3(e.fieldMask)};else{if(!(e instanceof e3))return Oe();n={verify:Vf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(u,g){const m=g.transform;if(m instanceof tc)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof gl)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof pl)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof nc)return{fieldPath:g.field.canonicalString(),increment:m.Pe};throw Oe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(a,u){return u.updateTime!==void 0?{updateTime:f3(a,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Oe()}(t,e.precondition)),n}function m3(t,e){return t&&t.length>0?(ot(e!==void 0),t.map(n=>function(a,u){let g=a.updateTime?ii(a.updateTime):ii(u);return g.isEqual(be.min())&&(g=ii(u)),new ZA(g,a.transformResults||[])}(n,e))):[]}function y3(t,e){return{documents:[z2(t,e.path)]}}function w3(t,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=z2(t,a);const u=function(w){if(w.length!==0)return G2(oi.create(w,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const g=function(w){if(w.length!==0)return w.map(I=>function(P){return{field:po(P.field),direction:_3(P.dir)}}(I))}(e.orderBy);g&&(n.structuredQuery.orderBy=g);const m=Bf(t,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(w){return{before:w.inclusive,values:w.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(w){return{before:!w.inclusive,values:w.position}}(e.endAt)),{_t:n,parent:a}}function x3(t){let e=d3(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let a=null;if(i>0){ot(i===1);const I=n.from[0];I.allDescendants?a=I.collectionId:e=e.child(I.collectionId)}let u=[];n.where&&(u=function(S){const P=W2(S);return P instanceof oi&&x2(P)?P.getFilters():[P]}(n.where));let g=[];n.orderBy&&(g=function(S){return S.map(P=>function(Y){return new ec(mo(Y.field),function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Y.direction))}(P))}(n.orderBy));let m=null;n.limit&&(m=function(S){let P;return P=typeof S=="object"?S.value:S,Cc(P)?null:P}(n.limit));let x=null;n.startAt&&(x=function(S){const P=!!S.before,U=S.values||[];return new Ju(U,P)}(n.startAt));let w=null;return n.endAt&&(w=function(S){const P=!S.before,U=S.values||[];return new Ju(U,P)}(n.endAt)),BA(e,a,g,u,m,"F",x,w)}function E3(t,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function W2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=mo(n.unaryFilter.field);return sn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=mo(n.unaryFilter.field);return sn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=mo(n.unaryFilter.field);return sn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=mo(n.unaryFilter.field);return sn.create(g,"!=",{nullValue:"NULL_VALUE"});default:return Oe()}}(t):t.fieldFilter!==void 0?function(n){return sn.create(mo(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return oi.create(n.compositeFilter.filters.map(i=>W2(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Oe()}}(n.compositeFilter.op))}(t):Oe()}function _3(t){return l3[t]}function A3(t){return u3[t]}function C3(t){return c3[t]}function po(t){return{fieldPath:t.canonicalString()}}function mo(t){return En.fromServerFormat(t.fieldPath)}function G2(t){return t instanceof sn?function(n){if(n.op==="=="){if(tg(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NAN"}};if(eg(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tg(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NAN"}};if(eg(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(n.field),op:A3(n.op),value:n.value}}}(t):t instanceof oi?function(n){const i=n.getFilters().map(a=>G2(a));return i.length===1?i[0]:{compositeFilter:{op:C3(n.op),filters:i}}}(t):Oe()}function v3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function j2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n,i,a,u=be.min(),g=be.min(),m=vn.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=m,this.expectedCount=x}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e){this.ct=e}}function T3(t){const e=x3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(){this.un=new R3}addToCollectionParentIndex(e,n){return this.un.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(ls.min())}updateCollectionGroup(e,n,i){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class R3{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n]||new An(St.comparator),u=!a.has(i);return this.index[n]=a.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),a=this.index[n];return a&&a.has(i)}getEntries(e){return(this.index[e]||new An(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Yo(0)}static kn(){return new Yo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.changes=new ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?oe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,n,i,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(i!==null&&Ga(i.mutation,a,Br.empty(),an.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,He()).next(()=>i))}getLocalViewOfDocuments(e,n,i=He()){const a=Ls();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,i).next(u=>{let g=Na();return u.forEach((m,x)=>{g=g.insert(m,x.overlayedDocument)}),g}))}getOverlayedDocuments(e,n){const i=Ls();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,He()))}populateOverlays(e,n,i){const a=[];return i.forEach(u=>{n.has(u)||a.push(u)}),this.documentOverlayCache.getOverlays(e,a).next(u=>{u.forEach((g,m)=>{n.set(g,m)})})}computeViews(e,n,i,a){let u=Si();const g=Wa(),m=function(){return Wa()}();return n.forEach((x,w)=>{const I=i.get(w.key);a.has(w.key)&&(I===void 0||I.mutation instanceof $s)?u=u.insert(w.key,w):I!==void 0?(g.set(w.key,I.mutation.getFieldMask()),Ga(I.mutation,w,I.mutation.getFieldMask(),an.now())):g.set(w.key,Br.empty())}),this.recalculateAndSaveOverlays(e,u).next(x=>(x.forEach((w,I)=>g.set(w,I)),n.forEach((w,I)=>{var S;return m.set(w,new O3(I,(S=g.get(w))!==null&&S!==void 0?S:null))}),m))}recalculateAndSaveOverlays(e,n){const i=Wa();let a=new Lt((g,m)=>g-m),u=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(g=>{for(const m of g)m.keys().forEach(x=>{const w=n.get(x);if(w===null)return;let I=i.get(x)||Br.empty();I=m.applyToLocalView(w,I),i.set(x,I);const S=(a.get(m.batchId)||He()).add(x);a=a.insert(m.batchId,S)})}).next(()=>{const g=[],m=a.getReverseIterator();for(;m.hasNext();){const x=m.getNext(),w=x.key,I=x.value,S=S2();I.forEach(P=>{if(!u.has(P)){const U=P2(n.get(P),i.get(P));U!==null&&S.set(P,U),u=u.add(P)}}),g.push(this.documentOverlayCache.saveOverlays(e,w,S))}return oe.waitFor(g)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,a){return function(g){return Ie.isDocumentKey(g.path)&&g.collectionGroup===null&&g.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,a):this.getDocumentsMatchingCollectionQuery(e,n,i,a)}getNextDocuments(e,n,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,a).next(u=>{const g=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,a-u.size):oe.resolve(Ls());let m=-1,x=u;return g.next(w=>oe.forEach(w,(I,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(I)?oe.resolve():this.remoteDocumentCache.getEntry(e,I).next(P=>{x=x.insert(I,P)}))).next(()=>this.populateOverlays(e,w,u)).next(()=>this.computeViews(e,x,w,He())).next(I=>({batchId:m,changes:T2(I)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next(i=>{let a=Na();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,i,a){const u=n.collectionGroup;let g=Na();return this.indexManager.getCollectionParents(e,u).next(m=>oe.forEach(m,x=>{const w=function(S,P){return new vc(P,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,x.child(u));return this.getDocumentsMatchingCollectionQuery(e,w,i,a).next(I=>{I.forEach((S,P)=>{g=g.insert(S,P)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,n,i,a){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(g=>(u=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,a))).next(g=>{u.forEach((x,w)=>{const I=w.getKey();g.get(I)===null&&(g=g.insert(I,Dn.newInvalidDocument(I)))});let m=Na();return g.forEach((x,w)=>{const I=u.get(x);I!==void 0&&Ga(I.mutation,w,Br.empty(),an.now()),Tc(n,w)&&(m=m.insert(x,w))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return oe.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:ii(a.createTime)}}(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(a){return{name:a.name,query:T3(a.bundledQuery),readTime:ii(a.readTime)}}(n)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(){this.overlays=new Lt(Ie.comparator),this.Ir=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Ls();return oe.forEach(n,a=>this.getOverlay(e,a).next(u=>{u!==null&&i.set(a,u)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((a,u)=>{this.ht(e,n,u)}),oe.resolve()}removeOverlaysForBatchId(e,n,i){const a=this.Ir.get(i);return a!==void 0&&(a.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ir.delete(i)),oe.resolve()}getOverlaysForCollection(e,n,i){const a=Ls(),u=n.length+1,g=new Ie(n.child("")),m=this.overlays.getIteratorFrom(g);for(;m.hasNext();){const x=m.getNext().value,w=x.getKey();if(!n.isPrefixOf(w.path))break;w.path.length===u&&x.largestBatchId>i&&a.set(x.getKey(),x)}return oe.resolve(a)}getOverlaysForCollectionGroup(e,n,i,a){let u=new Lt((w,I)=>w-I);const g=this.overlays.getIterator();for(;g.hasNext();){const w=g.getNext().value;if(w.getKey().getCollectionGroup()===n&&w.largestBatchId>i){let I=u.get(w.largestBatchId);I===null&&(I=Ls(),u=u.insert(w.largestBatchId,I)),I.set(w.getKey(),w)}}const m=Ls(),x=u.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach((w,I)=>m.set(w,I)),!(m.size()>=a)););return oe.resolve(m)}ht(e,n,i){const a=this.overlays.get(i.key);if(a!==null){const g=this.Ir.get(a.largestBatchId).delete(i.key);this.Ir.set(a.largestBatchId,g)}this.overlays=this.overlays.insert(i.key,new n3(n,i));let u=this.Ir.get(n);u===void 0&&(u=He(),this.Ir.set(n,u)),this.Ir.set(n,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.sessionToken=vn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this.Tr=new An(fn.Er),this.dr=new An(fn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new fn(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new fn(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Ie(new St([])),i=new fn(n,e),a=new fn(n,e+1),u=[];return this.dr.forEachInRange([i,a],g=>{this.Vr(g),u.push(g.key)}),u}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Ie(new St([])),i=new fn(n,e),a=new fn(n,e+1);let u=He();return this.dr.forEachInRange([i,a],g=>{u=u.add(g.key)}),u}containsKey(e){const n=new fn(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class fn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Ie.comparator(e.key,n.key)||Ze(e.wr,n.wr)}static Ar(e,n){return Ze(e.wr,n.wr)||Ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new An(fn.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,a){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const g=new t3(u,n,i,a);this.mutationQueue.push(g);for(const m of a)this.br=this.br.add(new fn(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return oe.resolve(g)}lookupMutationBatch(e,n){return oe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,a=this.vr(i),u=a<0?0:a;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new fn(n,0),a=new fn(n,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([i,a],g=>{const m=this.Dr(g.wr);u.push(m)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new An(Ze);return n.forEach(a=>{const u=new fn(a,0),g=new fn(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,g],m=>{i=i.add(m.wr)})}),oe.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,a=i.length+1;let u=i;Ie.isDocumentKey(u)||(u=u.child(""));const g=new fn(new Ie(u),0);let m=new An(Ze);return this.br.forEachWhile(x=>{const w=x.key.path;return!!i.isPrefixOf(w)&&(w.length===a&&(m=m.add(x.wr)),!0)},g),oe.resolve(this.Cr(m))}Cr(e){const n=[];return e.forEach(i=>{const a=this.Dr(i);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){ot(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return oe.forEach(n.mutations,a=>{const u=new fn(a.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new fn(n,0),a=this.br.firstAfterOrEqual(i);return oe.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.Mr=e,this.docs=function(){return new Lt(Ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,a=this.docs.get(i),u=a?a.size:0,g=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:g}),this.size+=g-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return oe.resolve(i?i.document.mutableCopy():Dn.newInvalidDocument(n))}getEntries(e,n){let i=Si();return n.forEach(a=>{const u=this.docs.get(a);i=i.insert(a,u?u.document.mutableCopy():Dn.newInvalidDocument(a))}),oe.resolve(i)}getDocumentsMatchingQuery(e,n,i,a){let u=Si();const g=n.path,m=new Ie(g.child("")),x=this.docs.getIteratorFrom(m);for(;x.hasNext();){const{key:w,value:{document:I}}=x.getNext();if(!g.isPrefixOf(w.path))break;w.path.length>g.length+1||wA(yA(I),i)<=0||(a.has(I.key)||Tc(n,I))&&(u=u.insert(I.key,I.mutableCopy()))}return oe.resolve(u)}getAllFromCollectionGroup(e,n,i,a){Oe()}Or(e,n){return oe.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new B3(this)}getSize(e){return oe.resolve(this.size)}}class B3 extends N3{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?n.push(this.cr.addEntry(e,a)):this.cr.removeEntry(i)}),oe.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e){this.persistence=e,this.Nr=new ra(n=>K1(n),q1),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ed,this.targetCount=0,this.kr=Yo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,a)=>n(a)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Yo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Kn(n),oe.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,i){let a=0;const u=[];return this.Nr.forEach((g,m)=>{m.sequenceNumber<=n&&i.get(m.targetId)===null&&(this.Nr.delete(g),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),oe.waitFor(u).next(()=>a)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return oe.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),oe.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const a=this.persistence.referenceDelegate,u=[];return a&&n.forEach(g=>{u.push(a.markPotentiallyOrphaned(e,g))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return oe.resolve(i)}containsKey(e,n){return oe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n){this.qr={},this.overlays={},this.Qr=new W1(0),this.Kr=!1,this.Kr=!0,this.$r=new M3,this.referenceDelegate=e(this),this.Ur=new F3(this),this.indexManager=new S3,this.remoteDocumentCache=function(a){return new L3(a)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new I3(n),this.Gr=new b3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new P3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new k3(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){xe("MemoryPersistence","Starting transaction:",e);const a=new U3(this.Qr.next());return this.referenceDelegate.zr(),i(a).next(u=>this.referenceDelegate.jr(a).next(()=>u)).toPromise().then(u=>(a.raiseOnCommittedEvent(),u))}Hr(e,n){return oe.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class U3 extends EA{constructor(e){super(),this.currentSequenceNumber=e}}class td{constructor(e){this.persistence=e,this.Jr=new ed,this.Yr=null}static Zr(e){return new td(e)}get Xr(){if(this.Yr)return this.Yr;throw Oe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),oe.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(a=>this.Xr.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(u=>this.Xr.add(u.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,i=>{const a=Ie.fromPath(i);return this.ei(e,a).next(u=>{u||n.removeEntry(a,be.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return oe.or([()=>oe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n,i,a){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=a}static Wi(e,n){let i=He(),a=He();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new nd(e,n.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return WE()?8:_A(zE())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,a){const u={result:null};return this.Yi(e,n).next(g=>{u.result=g}).next(()=>{if(!u.result)return this.Zi(e,n,a,i).next(g=>{u.result=g})}).next(()=>{if(u.result)return;const g=new z3;return this.Xi(e,n,g).next(m=>{if(u.result=m,this.zi)return this.es(e,n,g,m.size)})}).next(()=>u.result)}es(e,n,i,a){return i.documentReadCount<this.ji?(Ca()<=Ye.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(Ca()<=Ye.DEBUG&&xe("QueryEngine","Query:",go(n),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.Hi*a?(Ca()<=Ye.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ri(n))):oe.resolve())}Yi(e,n){if(sg(n))return oe.resolve(null);let i=ri(n);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=Lf(n,null,"F"),i=ri(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(u=>{const g=He(...u);return this.Ji.getDocuments(e,g).next(m=>this.indexManager.getMinOffset(e,i).next(x=>{const w=this.ts(n,m);return this.ns(n,w,g,x.readTime)?this.Yi(e,Lf(n,null,"F")):this.rs(e,w,n,x)}))})))}Zi(e,n,i,a){return sg(n)||a.isEqual(be.min())?oe.resolve(null):this.Ji.getDocuments(e,i).next(u=>{const g=this.ts(n,u);return this.ns(n,g,i,a)?oe.resolve(null):(Ca()<=Ye.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),go(n)),this.rs(e,g,n,mA(a,-1)).next(m=>m))})}ts(e,n){let i=new An(v2(e));return n.forEach((a,u)=>{Tc(e,u)&&(i=i.add(u))}),i}ns(e,n,i,a){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}Xi(e,n,i){return Ca()<=Ye.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",go(n)),this.Ji.getDocumentsMatchingQuery(e,n,ls.min(),i)}rs(e,n,i,a){return this.Ji.getDocumentsMatchingQuery(e,i,a).next(u=>(n.forEach(g=>{u=u.insert(g.key,g)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,n,i,a){this.persistence=e,this.ss=n,this.serializer=a,this.os=new Lt(Ze),this._s=new ra(u=>K1(u),q1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D3(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function G3(t,e,n,i){return new W3(t,e,n,i)}async function X2(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let a;return n.mutationQueue.getAllMutationBatches(i).next(u=>(a=u,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(u=>{const g=[],m=[];let x=He();for(const w of a){g.push(w.batchId);for(const I of w.mutations)x=x.add(I.key)}for(const w of u){m.push(w.batchId);for(const I of w.mutations)x=x.add(I.key)}return n.localDocuments.getDocuments(i,x).next(w=>({hs:w,removedBatchIds:g,addedBatchIds:m}))})})}function j3(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),u=n.cs.newChangeBuffer({trackRemovals:!0});return function(m,x,w,I){const S=w.batch,P=S.keys();let U=oe.resolve();return P.forEach(Y=>{U=U.next(()=>I.getEntry(x,Y)).next(q=>{const te=w.docVersions.get(Y);ot(te!==null),q.version.compareTo(te)<0&&(S.applyToRemoteDocument(q,w),q.isValidDocument()&&(q.setReadTime(w.commitVersion),I.addEntry(q)))})}),U.next(()=>m.mutationQueue.removeMutationBatch(x,S))}(n,i,e,u).next(()=>u.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(m){let x=He();for(let w=0;w<m.mutationResults.length;++w)m.mutationResults[w].transformResults.length>0&&(x=x.add(m.batch.mutations[w].key));return x}(e))).next(()=>n.localDocuments.getDocuments(i,a))})}function K2(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function X3(t,e){const n=Pe(t),i=e.snapshotVersion;let a=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const g=n.cs.newChangeBuffer({trackRemovals:!0});a=n.os;const m=[];e.targetChanges.forEach((I,S)=>{const P=a.get(S);if(!P)return;m.push(n.Ur.removeMatchingKeys(u,I.removedDocuments,S).next(()=>n.Ur.addMatchingKeys(u,I.addedDocuments,S)));let U=P.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?U=U.withResumeToken(vn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):I.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(I.resumeToken,i)),a=a.insert(S,U),function(q,te,V){return q.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(P,U,I)&&m.push(n.Ur.updateTargetData(u,U))});let x=Si(),w=He();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,I))}),m.push(K3(u,g,e.documentUpdates).next(I=>{x=I.Ps,w=I.Is})),!i.isEqual(be.min())){const I=n.Ur.getLastRemoteSnapshotVersion(u).next(S=>n.Ur.setTargetsMetadata(u,u.currentSequenceNumber,i));m.push(I)}return oe.waitFor(m).next(()=>g.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,x,w)).next(()=>x)}).then(u=>(n.os=a,u))}function K3(t,e,n){let i=He(),a=He();return n.forEach(u=>i=i.add(u)),e.getEntries(t,i).next(u=>{let g=Si();return n.forEach((m,x)=>{const w=u.get(m);x.isFoundDocument()!==w.isFoundDocument()&&(a=a.add(m)),x.isNoDocument()&&x.version.isEqual(be.min())?(e.removeEntry(m,x.readTime),g=g.insert(m,x)):!w.isValidDocument()||x.version.compareTo(w.version)>0||x.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(x),g=g.insert(m,x)):xe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",w.version," Watch version:",x.version)}),{Ps:g,Is:a}})}function q3(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Y3(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return n.Ur.getTargetData(i,e).next(u=>u?(a=u,oe.resolve(a)):n.Ur.allocateTargetId(i).next(g=>(a=new Ki(e,g,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=n.os.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function zf(t,e,n){const i=Pe(t),a=i.os.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,g=>i.persistence.referenceDelegate.removeTarget(g,a))}catch(g){if(!Al(g))throw g;xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}i.os=i.os.remove(e),i._s.delete(a.target)}function mg(t,e,n){const i=Pe(t);let a=be.min(),u=He();return i.persistence.runTransaction("Execute query","readwrite",g=>function(x,w,I){const S=Pe(x),P=S._s.get(I);return P!==void 0?oe.resolve(S.os.get(P)):S.Ur.getTargetData(w,I)}(i,g,ri(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(g,m.targetId).next(x=>{u=x})}).next(()=>i.ss.getDocumentsMatchingQuery(g,e,n?a:be.min(),n?u:He())).next(m=>(Q3(i,UA(e),m),{documents:m,Ts:u})))}function Q3(t,e,n){let i=t.us.get(e)||be.min();n.forEach((a,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)}),t.us.set(e,i)}class yg{constructor(){this.activeTargetIds=XA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Z3{constructor(){this.so=new yg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new yg,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iu=null;function Ih(){return iu===null?iu=function(){return 268435456+Math.round(2147483648*Math.random())}():iu++,"0x"+iu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn="WebChannelConnection";class tC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${a}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${u}`}get Fo(){return!1}Mo(n,i,a,u,g){const m=Ih(),x=this.xo(n,i.toUriEncodedString());xe("RestConnection",`Sending RPC '${n}' ${m}:`,x,a);const w={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(w,u,g),this.No(n,x,w,a).then(I=>(xe("RestConnection",`Received RPC '${n}' ${m}: `,I),I),I=>{throw jo("RestConnection",`RPC '${n}' ${m} failed with error: `,I,"url: ",x,"request:",a),I})}Lo(n,i,a,u,g,m){return this.Mo(n,i,a,u,g)}Oo(n,i,a){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+na}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((u,g)=>n[g]=u),a&&a.headers.forEach((u,g)=>n[g]=u)}xo(n,i){const a=J3[n];return`${this.Do}/v1/${i}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,a){const u=Ih();return new Promise((g,m)=>{const x=new a2;x.setWithCredentials(!0),x.listenOnce(l2.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case yu.NO_ERROR:const I=x.getResponseJson();xe(Rn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(I)),g(I);break;case yu.TIMEOUT:xe(Rn,`RPC '${e}' ${u} timed out`),m(new _e(se.DEADLINE_EXCEEDED,"Request time out"));break;case yu.HTTP_ERROR:const S=x.getStatus();if(xe(Rn,`RPC '${e}' ${u} failed with status:`,S,"response text:",x.getResponseText()),S>0){let P=x.getResponseJson();Array.isArray(P)&&(P=P[0]);const U=P==null?void 0:P.error;if(U&&U.status&&U.message){const Y=function(te){const V=te.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(V)>=0?V:se.UNKNOWN}(U.status);m(new _e(Y,U.message))}else m(new _e(se.UNKNOWN,"Server responded with status "+x.getStatus()))}else m(new _e(se.UNAVAILABLE,"Connection failed."));break;default:Oe()}}finally{xe(Rn,`RPC '${e}' ${u} completed.`)}});const w=JSON.stringify(a);xe(Rn,`RPC '${e}' ${u} sending request:`,a),x.send(n,"POST",w,i,15)})}Bo(e,n,i){const a=Ih(),u=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=h2(),m=c2(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(x.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(x.useFetchStreams=!0),this.Oo(x.initMessageHeaders,n,i),x.encodeInitMessageHeaders=!0;const I=u.join("");xe(Rn,`Creating RPC '${e}' stream ${a}: ${I}`,x);const S=g.createWebChannel(I,x);let P=!1,U=!1;const Y=new eC({Io:te=>{U?xe(Rn,`Not sending because RPC '${e}' stream ${a} is closed:`,te):(P||(xe(Rn,`Opening RPC '${e}' stream ${a} transport.`),S.open(),P=!0),xe(Rn,`RPC '${e}' stream ${a} sending:`,te),S.send(te))},To:()=>S.close()}),q=(te,V,k)=>{te.listen(V,B=>{try{k(B)}catch(Q){setTimeout(()=>{throw Q},0)}})};return q(S,Ra.EventType.OPEN,()=>{U||(xe(Rn,`RPC '${e}' stream ${a} transport opened.`),Y.yo())}),q(S,Ra.EventType.CLOSE,()=>{U||(U=!0,xe(Rn,`RPC '${e}' stream ${a} transport closed`),Y.So())}),q(S,Ra.EventType.ERROR,te=>{U||(U=!0,jo(Rn,`RPC '${e}' stream ${a} transport errored:`,te),Y.So(new _e(se.UNAVAILABLE,"The operation could not be completed")))}),q(S,Ra.EventType.MESSAGE,te=>{var V;if(!U){const k=te.data[0];ot(!!k);const B=k,Q=B.error||((V=B[0])===null||V===void 0?void 0:V.error);if(Q){xe(Rn,`RPC '${e}' stream ${a} received error:`,Q);const he=Q.status;let re=function(N){const F=qt[N];if(F!==void 0)return L2(F)}(he),D=Q.message;re===void 0&&(re=se.INTERNAL,D="Unknown error status: "+he+" with message "+Q.message),U=!0,Y.So(new _e(re,D)),S.close()}else xe(Rn,`RPC '${e}' stream ${a} received:`,k),Y.bo(k)}}),q(m,u2.STAT_EVENT,te=>{te.stat===Df.PROXY?xe(Rn,`RPC '${e}' stream ${a} detected buffering proxy`):te.stat===Df.NOPROXY&&xe(Rn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Y.wo()},0),Y}}function Th(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){return new h3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n,i=1e3,a=1.5,u=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=a,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),a=Math.max(0,n-i);a>0&&xe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n,i,a,u,g,m,x){this.ui=e,this.Ho=i,this.Jo=a,this.connection=u,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=m,this.listener=x,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new q2(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(Ti(n.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.Yo===n&&this.P_(i,a)},i=>{e(()=>{const a=new _e(se.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(a)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{i(()=>this.I_(a))}),this.stream.onMessage(a=>{i(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nC extends Y2{constructor(e,n,i,a,u,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,a,g),this.serializer=u}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=g3(this.serializer,e),i=function(u){if(!("targetChange"in u))return be.min();const g=u.targetChange;return g.targetIds&&g.targetIds.length?be.min():g.readTime?ii(g.readTime):be.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=Uf(this.serializer),n.addTarget=function(u,g){let m;const x=g.target;if(m=kf(x)?{documents:y3(u,x)}:{query:w3(u,x)._t},m.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){m.resumeToken=V2(u,g.resumeToken);const w=Bf(u,g.expectedCount);w!==null&&(m.expectedCount=w)}else if(g.snapshotVersion.compareTo(be.min())>0){m.readTime=rc(u,g.snapshotVersion.toTimestamp());const w=Bf(u,g.expectedCount);w!==null&&(m.expectedCount=w)}return m}(this.serializer,e);const i=E3(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=Uf(this.serializer),n.removeTarget=e,this.a_(n)}}class rC extends Y2{constructor(e,n,i,a,u,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,a,g),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ot(!!e.streamToken),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=m3(e.writeResults,e.commitTime),i=ii(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=Uf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>p3(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC extends class{}{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new _e(se.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,g])=>this.connection.Mo(e,Ff(n,i),a,u,g)).catch(u=>{throw u.name==="FirebaseError"?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new _e(se.UNKNOWN,u.toString())})}Lo(e,n,i,a,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,m])=>this.connection.Lo(e,Ff(n,i),a,g,m,u)).catch(g=>{throw g.name==="FirebaseError"?(g.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new _e(se.UNKNOWN,g.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class sC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ti(n),this.D_=!1):xe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,i,a,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o(g=>{i.enqueueAndForget(async()=>{Js(this)&&(xe("RemoteStore","Restarting streams for network reachability change."),await async function(x){const w=Pe(x);w.L_.add(4),await vl(w),w.q_.set("Unknown"),w.L_.delete(4),await bc(w)}(this))})}),this.q_=new sC(i,a)}}async function bc(t){if(Js(t))for(const e of t.B_)await e(!0)}async function vl(t){for(const e of t.B_)await e(!1)}function Q2(t,e){const n=Pe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),od(n)?sd(n):ia(n).r_()&&id(n,e))}function rd(t,e){const n=Pe(t),i=ia(n);n.N_.delete(e),i.r_()&&Z2(n,e),n.N_.size===0&&(i.r_()?i.o_():Js(n)&&n.q_.set("Unknown"))}function id(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ia(t).A_(e)}function Z2(t,e){t.Q_.xe(e),ia(t).R_(e)}function sd(t){t.Q_=new a3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ia(t).start(),t.q_.v_()}function od(t){return Js(t)&&!ia(t).n_()&&t.N_.size>0}function Js(t){return Pe(t).L_.size===0}function $2(t){t.Q_=void 0}async function aC(t){t.q_.set("Online")}async function lC(t){t.N_.forEach((e,n)=>{id(t,e)})}async function uC(t,e){$2(t),od(t)?(t.q_.M_(e),sd(t)):t.q_.set("Unknown")}async function cC(t,e,n){if(t.q_.set("Online"),e instanceof F2&&e.state===2&&e.cause)try{await async function(a,u){const g=u.cause;for(const m of u.targetIds)a.N_.has(m)&&(await a.remoteSyncer.rejectListen(m,g),a.N_.delete(m),a.Q_.removeTarget(m))}(t,e)}catch(i){xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ic(t,i)}else if(e instanceof Eu?t.Q_.Ke(e):e instanceof B2?t.Q_.He(e):t.Q_.We(e),!n.isEqual(be.min()))try{const i=await K2(t.localStore);n.compareTo(i)>=0&&await function(u,g){const m=u.Q_.rt(g);return m.targetChanges.forEach((x,w)=>{if(x.resumeToken.approximateByteSize()>0){const I=u.N_.get(w);I&&u.N_.set(w,I.withResumeToken(x.resumeToken,g))}}),m.targetMismatches.forEach((x,w)=>{const I=u.N_.get(x);if(!I)return;u.N_.set(x,I.withResumeToken(vn.EMPTY_BYTE_STRING,I.snapshotVersion)),Z2(u,x);const S=new Ki(I.target,x,w,I.sequenceNumber);id(u,S)}),u.remoteSyncer.applyRemoteEvent(m)}(t,n)}catch(i){xe("RemoteStore","Failed to raise snapshot:",i),await ic(t,i)}}async function ic(t,e,n){if(!Al(e))throw e;t.L_.add(1),await vl(t),t.q_.set("Offline"),n||(n=()=>K2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{xe("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await bc(t)})}function J2(t,e){return e().catch(n=>ic(t,n,e))}async function Pc(t){const e=Pe(t),n=cs(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;hC(e);)try{const a=await q3(e.localStore,i);if(a===null){e.O_.length===0&&n.o_();break}i=a.batchId,fC(e,a)}catch(a){await ic(e,a)}ey(e)&&ty(e)}function hC(t){return Js(t)&&t.O_.length<10}function fC(t,e){t.O_.push(e);const n=cs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ey(t){return Js(t)&&!cs(t).n_()&&t.O_.length>0}function ty(t){cs(t).start()}async function dC(t){cs(t).p_()}async function gC(t){const e=cs(t);for(const n of t.O_)e.m_(n.mutations)}async function pC(t,e,n){const i=t.O_.shift(),a=Z1.from(i,e,n);await J2(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Pc(t)}async function mC(t,e){e&&cs(t).V_&&await async function(i,a){if(function(g){return i3(g)&&g!==se.ABORTED}(a.code)){const u=i.O_.shift();cs(i).s_(),await J2(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,a)),await Pc(i)}}(t,e),ey(t)&&ty(t)}async function xg(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),xe("RemoteStore","RemoteStore received new credentials");const i=Js(n);n.L_.add(3),await vl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await bc(n)}async function yC(t,e){const n=Pe(t);e?(n.L_.delete(2),await bc(n)):e||(n.L_.add(2),await vl(n),n.q_.set("Unknown"))}function ia(t){return t.K_||(t.K_=function(n,i,a){const u=Pe(n);return u.w_(),new nC(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(t.datastore,t.asyncQueue,{Eo:aC.bind(null,t),Ro:lC.bind(null,t),mo:uC.bind(null,t),d_:cC.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),od(t)?sd(t):t.q_.set("Unknown")):(await t.K_.stop(),$2(t))})),t.K_}function cs(t){return t.U_||(t.U_=function(n,i,a){const u=Pe(n);return u.w_(),new rC(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:dC.bind(null,t),mo:mC.bind(null,t),f_:gC.bind(null,t),g_:pC.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Pc(t)):(await t.U_.stop(),t.O_.length>0&&(xe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,i,a,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=a,this.removalCallback=u,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,a,u){const g=Date.now()+i,m=new ad(e,n,g,a,u);return m.start(i),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ld(t,e){if(Ti("AsyncQueue",`${e}: ${t}`),Al(t))return new _e(se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ie.comparator(n.key,i.key):(n,i)=>Ie.comparator(n.key,i.key),this.keyedMap=Na(),this.sortedSet=new Lt(this.comparator)}static emptySet(e){return new Bo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Bo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,u=i.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Bo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(){this.W_=new Lt(Ie.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Qo{constructor(e,n,i,a,u,g,m,x,w){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=u,this.fromCache=g,this.syncStateChanged=m,this.excludesMetadataChanges=x,this.hasCachedResults=w}static fromInitialDocuments(e,n,i,a,u){const g=[];return n.forEach(m=>{g.push({type:0,doc:m})}),new Qo(e,n,Bo.emptySet(n),g,i,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==i[a].type||!n[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class xC{constructor(){this.queries=_g(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const a=Pe(n),u=a.queries;a.queries=_g(),u.forEach((g,m)=>{for(const x of m.j_)x.onError(i)})})(this,new _e(se.ABORTED,"Firestore shutting down"))}}function _g(){return new ra(t=>C2(t),Ic)}async function ny(t,e){const n=Pe(t);let i=3;const a=e.query;let u=n.queries.get(a);u?!u.H_()&&e.J_()&&(i=2):(u=new wC,i=e.J_()?0:1);try{switch(i){case 0:u.z_=await n.onListen(a,!0);break;case 1:u.z_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(g){const m=ld(g,`Initialization of query '${go(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,u),u.j_.push(e),e.Z_(n.onlineState),u.z_&&e.X_(u.z_)&&ud(n)}async function ry(t,e){const n=Pe(t),i=e.query;let a=3;const u=n.queries.get(i);if(u){const g=u.j_.indexOf(e);g>=0&&(u.j_.splice(g,1),u.j_.length===0?a=e.J_()?0:1:!u.H_()&&e.J_()&&(a=2))}switch(a){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function EC(t,e){const n=Pe(t);let i=!1;for(const a of e){const u=a.query,g=n.queries.get(u);if(g){for(const m of g.j_)m.X_(a)&&(i=!0);g.z_=a}}i&&ud(n)}function _C(t,e,n){const i=Pe(t),a=i.queries.get(e);if(a)for(const u of a.j_)u.onError(n);i.queries.delete(e)}function ud(t){t.Y_.forEach(e=>{e.next()})}var Hf,Ag;(Ag=Hf||(Hf={})).ea="default",Ag.Cache="cache";class iy{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Qo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Hf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.key=e}}class oy{constructor(e){this.key=e}}class AC{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=He(),this.mutatedKeys=He(),this.Aa=v2(e),this.Ra=new Bo(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new Eg,a=n?n.Ra:this.Ra;let u=n?n.mutatedKeys:this.mutatedKeys,g=a,m=!1;const x=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,w=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((I,S)=>{const P=a.get(I),U=Tc(this.query,S)?S:null,Y=!!P&&this.mutatedKeys.has(P.key),q=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let te=!1;P&&U?P.data.isEqual(U.data)?Y!==q&&(i.track({type:3,doc:U}),te=!0):this.ga(P,U)||(i.track({type:2,doc:U}),te=!0,(x&&this.Aa(U,x)>0||w&&this.Aa(U,w)<0)&&(m=!0)):!P&&U?(i.track({type:0,doc:U}),te=!0):P&&!U&&(i.track({type:1,doc:P}),te=!0,(x||w)&&(m=!0)),te&&(U?(g=g.add(U),u=q?u.add(I):u.delete(I)):(g=g.delete(I),u=u.delete(I)))}),this.query.limit!==null)for(;g.size>this.query.limit;){const I=this.query.limitType==="F"?g.last():g.first();g=g.delete(I.key),u=u.delete(I.key),i.track({type:1,doc:I})}return{Ra:g,fa:i,ns:m,mutatedKeys:u}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,a){const u=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const g=e.fa.G_();g.sort((I,S)=>function(U,Y){const q=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe()}};return q(U)-q(Y)}(I.type,S.type)||this.Aa(I.doc,S.doc)),this.pa(i),a=a!=null&&a;const m=n&&!a?this.ya():[],x=this.da.size===0&&this.current&&!a?1:0,w=x!==this.Ea;return this.Ea=x,g.length!==0||w?{snapshot:new Qo(this.query,e.Ra,u,g,e.mutatedKeys,x===0,w,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Eg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=He(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new oy(i))}),this.da.forEach(i=>{e.has(i)||n.push(new sy(i))}),n}ba(e){this.Ta=e.Ts,this.da=He();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Qo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class CC{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class vC{constructor(e){this.key=e,this.va=!1}}class IC{constructor(e,n,i,a,u,g){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=g,this.Ca={},this.Fa=new ra(m=>C2(m),Ic),this.Ma=new Map,this.xa=new Set,this.Oa=new Lt(Ie.comparator),this.Na=new Map,this.La=new ed,this.Ba={},this.ka=new Map,this.qa=Yo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function TC(t,e,n=!0){const i=fy(t);let a;const u=i.Fa.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.Da()):a=await ay(i,e,n,!0),a}async function SC(t,e){const n=fy(t);await ay(n,e,!0,!1)}async function ay(t,e,n,i){const a=await Y3(t.localStore,ri(e)),u=a.targetId,g=t.sharedClientState.addLocalQueryTarget(u,n);let m;return i&&(m=await RC(t,e,u,g==="current",a.resumeToken)),t.isPrimaryClient&&n&&Q2(t.remoteStore,a),m}async function RC(t,e,n,i,a){t.Ka=(S,P,U)=>async function(q,te,V,k){let B=te.view.ma(V);B.ns&&(B=await mg(q.localStore,te.query,!1).then(({documents:D})=>te.view.ma(D,B)));const Q=k&&k.targetChanges.get(te.targetId),he=k&&k.targetMismatches.get(te.targetId)!=null,re=te.view.applyChanges(B,q.isPrimaryClient,Q,he);return vg(q,te.targetId,re.wa),re.snapshot}(t,S,P,U);const u=await mg(t.localStore,e,!0),g=new AC(e,u.Ts),m=g.ma(u.documents),x=Cl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",a),w=g.applyChanges(m,t.isPrimaryClient,x);vg(t,n,w.wa);const I=new CC(e,n,g);return t.Fa.set(e,I),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),w.snapshot}async function NC(t,e,n){const i=Pe(t),a=i.Fa.get(e),u=i.Ma.get(a.targetId);if(u.length>1)return i.Ma.set(a.targetId,u.filter(g=>!Ic(g,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await zf(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),n&&rd(i.remoteStore,a.targetId),Wf(i,a.targetId)}).catch(_l)):(Wf(i,a.targetId),await zf(i.localStore,a.targetId,!0))}async function OC(t,e){const n=Pe(t),i=n.Fa.get(e),a=n.Ma.get(i.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),rd(n.remoteStore,i.targetId))}async function DC(t,e,n){const i=FC(t);try{const a=await function(g,m){const x=Pe(g),w=an.now(),I=m.reduce((U,Y)=>U.add(Y.key),He());let S,P;return x.persistence.runTransaction("Locally write mutations","readwrite",U=>{let Y=Si(),q=He();return x.cs.getEntries(U,I).next(te=>{Y=te,Y.forEach((V,k)=>{k.isValidDocument()||(q=q.add(V))})}).next(()=>x.localDocuments.getOverlayedDocuments(U,Y)).next(te=>{S=te;const V=[];for(const k of m){const B=JA(k,S.get(k.key).overlayedDocument);B!=null&&V.push(new $s(k.key,B,m2(B.value.mapValue),Ei.exists(!0)))}return x.mutationQueue.addMutationBatch(U,w,V,m)}).next(te=>{P=te;const V=te.applyToLocalDocumentSet(S,q);return x.documentOverlayCache.saveOverlays(U,te.batchId,V)})}).then(()=>({batchId:P.batchId,changes:T2(S)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(g,m,x){let w=g.Ba[g.currentUser.toKey()];w||(w=new Lt(Ze)),w=w.insert(m,x),g.Ba[g.currentUser.toKey()]=w}(i,a.batchId,n),await Il(i,a.changes),await Pc(i.remoteStore)}catch(a){const u=ld(a,"Failed to persist write");n.reject(u)}}async function ly(t,e){const n=Pe(t);try{const i=await X3(n.localStore,e);e.targetChanges.forEach((a,u)=>{const g=n.Na.get(u);g&&(ot(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?g.va=!0:a.modifiedDocuments.size>0?ot(g.va):a.removedDocuments.size>0&&(ot(g.va),g.va=!1))}),await Il(n,i,e)}catch(i){await _l(i)}}function Cg(t,e,n){const i=Pe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const a=[];i.Fa.forEach((u,g)=>{const m=g.view.Z_(e);m.snapshot&&a.push(m.snapshot)}),function(g,m){const x=Pe(g);x.onlineState=m;let w=!1;x.queries.forEach((I,S)=>{for(const P of S.j_)P.Z_(m)&&(w=!0)}),w&&ud(x)}(i.eventManager,e),a.length&&i.Ca.d_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function bC(t,e,n){const i=Pe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const a=i.Na.get(e),u=a&&a.key;if(u){let g=new Lt(Ie.comparator);g=g.insert(u,Dn.newNoDocument(u,be.min()));const m=He().add(u),x=new Oc(be.min(),new Map,new Lt(Ze),g,m);await ly(i,x),i.Oa=i.Oa.remove(u),i.Na.delete(e),cd(i)}else await zf(i.localStore,e,!1).then(()=>Wf(i,e,n)).catch(_l)}async function PC(t,e){const n=Pe(t),i=e.batch.batchId;try{const a=await j3(n.localStore,e);cy(n,i,null),uy(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Il(n,a)}catch(a){await _l(a)}}async function MC(t,e,n){const i=Pe(t);try{const a=await function(g,m){const x=Pe(g);return x.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let I;return x.mutationQueue.lookupMutationBatch(w,m).next(S=>(ot(S!==null),I=S.keys(),x.mutationQueue.removeMutationBatch(w,S))).next(()=>x.mutationQueue.performConsistencyCheck(w)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(w,I,m)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,I)).next(()=>x.localDocuments.getDocuments(w,I))})}(i.localStore,e);cy(i,e,n),uy(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Il(i,a)}catch(a){await _l(a)}}function uy(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function cy(t,e,n){const i=Pe(t);let a=i.Ba[i.currentUser.toKey()];if(a){const u=a.get(e);u&&(n?u.reject(n):u.resolve(),a=a.remove(e)),i.Ba[i.currentUser.toKey()]=a}}function Wf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||hy(t,i)})}function hy(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(rd(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),cd(t))}function vg(t,e,n){for(const i of n)i instanceof sy?(t.La.addReference(i.key,e),kC(t,i)):i instanceof oy?(xe("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||hy(t,i.key)):Oe()}function kC(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(xe("SyncEngine","New document in limbo: "+n),t.xa.add(i),cd(t))}function cd(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Ie(St.fromString(e)),i=t.qa.next();t.Na.set(i,new vC(n)),t.Oa=t.Oa.insert(n,i),Q2(t.remoteStore,new Ki(ri(Y1(n.path)),i,"TargetPurposeLimboResolution",W1.oe))}}async function Il(t,e,n){const i=Pe(t),a=[],u=[],g=[];i.Fa.isEmpty()||(i.Fa.forEach((m,x)=>{g.push(i.Ka(x,e,n).then(w=>{var I;if((w||n)&&i.isPrimaryClient){const S=w?!w.fromCache:(I=n==null?void 0:n.targetChanges.get(x.targetId))===null||I===void 0?void 0:I.current;i.sharedClientState.updateQueryState(x.targetId,S?"current":"not-current")}if(w){a.push(w);const S=nd.Wi(x.targetId,w);u.push(S)}}))}),await Promise.all(g),i.Ca.d_(a),await async function(x,w){const I=Pe(x);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>oe.forEach(w,P=>oe.forEach(P.$i,U=>I.persistence.referenceDelegate.addReference(S,P.targetId,U)).next(()=>oe.forEach(P.Ui,U=>I.persistence.referenceDelegate.removeReference(S,P.targetId,U)))))}catch(S){if(!Al(S))throw S;xe("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const P=S.targetId;if(!S.fromCache){const U=I.os.get(P),Y=U.snapshotVersion,q=U.withLastLimboFreeSnapshotVersion(Y);I.os=I.os.insert(P,q)}}}(i.localStore,u))}async function LC(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){xe("SyncEngine","User change. New user:",e.toKey());const i=await X2(n.localStore,e);n.currentUser=e,function(u,g){u.ka.forEach(m=>{m.forEach(x=>{x.reject(new _e(se.CANCELLED,g))})}),u.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Il(n,i.hs)}}function BC(t,e){const n=Pe(t),i=n.Na.get(e);if(i&&i.va)return He().add(i.key);{let a=He();const u=n.Ma.get(e);if(!u)return a;for(const g of u){const m=n.Fa.get(g);a=a.unionWith(m.view.Va)}return a}}function fy(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ly.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bC.bind(null,e),e.Ca.d_=EC.bind(null,e.eventManager),e.Ca.$a=_C.bind(null,e.eventManager),e}function FC(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MC.bind(null,e),e}class sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return G3(this.persistence,new H3,e.initialUser,this.serializer)}Ga(e){return new V3(td.Zr,this.serializer)}Wa(e){return new Z3}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sc.provider={build:()=>new sc};class Gf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Cg(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=LC.bind(null,this.syncEngine),await yC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xC}()}createDatastore(e){const n=Dc(e.databaseInfo.databaseId),i=function(u){return new tC(u)}(e.databaseInfo);return function(u,g,m,x){return new iC(u,g,m,x)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,a,u,g,m){return new oC(i,a,u,g,m)}(this.localStore,this.datastore,e.asyncQueue,n=>Cg(this.syncEngine,n,0),function(){return wg.D()?new wg:new $3}())}createSyncEngine(e,n){return function(a,u,g,m,x,w,I){const S=new IC(a,u,g,m,x,w);return I&&(S.Qa=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const u=Pe(a);xe("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await vl(u),u.k_.shutdown(),u.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Gf.provider={build:()=>new Gf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n,i,a,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=a,this.user=Nn.UNAUTHENTICATED,this.clientId=d2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,async g=>{xe("FirestoreClient","Received user=",g.uid),await this.authCredentialListener(g),this.user=g}),this.appCheckCredentials.start(i,g=>(xe("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ld(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Sh(t,e){t.asyncQueue.verifyOperationInProgress(),xe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async a=>{i.isEqual(a)||(await X2(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ig(t,e){t.asyncQueue.verifyOperationInProgress();const n=await UC(t);xe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>xg(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,a)=>xg(e.remoteStore,a)),t._onlineComponents=e}async function UC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){xe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===se.FAILED_PRECONDITION||a.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;jo("Error using user provided cache. Falling back to memory cache: "+n),await Sh(t,new sc)}}else xe("FirestoreClient","Using default OfflineComponentProvider"),await Sh(t,new sc);return t._offlineComponents}async function gy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(xe("FirestoreClient","Using user provided OnlineComponentProvider"),await Ig(t,t._uninitializedComponentsProvider._online)):(xe("FirestoreClient","Using default OnlineComponentProvider"),await Ig(t,new Gf))),t._onlineComponents}function zC(t){return gy(t).then(e=>e.syncEngine)}async function py(t){const e=await gy(t),n=e.eventManager;return n.onListen=TC.bind(null,e.syncEngine),n.onUnlisten=NC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OC.bind(null,e.syncEngine),n}function HC(t,e,n={}){const i=new xi;return t.asyncQueue.enqueueAndForget(async()=>function(u,g,m,x,w){const I=new dy({next:P=>{I.Za(),g.enqueueAndForget(()=>ry(u,S));const U=P.docs.has(m);!U&&P.fromCache?w.reject(new _e(se.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&P.fromCache&&x&&x.source==="server"?w.reject(new _e(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(P)},error:P=>w.reject(P)}),S=new iy(Y1(m.path),I,{includeMetadataChanges:!0,_a:!0});return ny(u,S)}(await py(t),t.asyncQueue,e,n,i)),i.promise}function WC(t,e,n={}){const i=new xi;return t.asyncQueue.enqueueAndForget(async()=>function(u,g,m,x,w){const I=new dy({next:P=>{I.Za(),g.enqueueAndForget(()=>ry(u,S)),P.fromCache&&x.source==="server"?w.reject(new _e(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(P)},error:P=>w.reject(P)}),S=new iy(m,I,{includeMetadataChanges:!0,_a:!0});return ny(u,S)}(await py(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t,e,n){if(!n)throw new _e(se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GC(t,e,n,i){if(e===!0&&i===!0)throw new _e(se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Sg(t){if(!Ie.isDocumentKey(t))throw new _e(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rg(t){if(Ie.isDocumentKey(t))throw new _e(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function hd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Oe()}function qs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _e(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hd(t);throw new _e(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _e(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=my((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new _e(se.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new _e(se.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new _e(se.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mc{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ng({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ng(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new aA;switch(i.type){case"firstParty":return new hA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Tg.get(n);i&&(xe("ComponentProvider","Removing Datastore"),Tg.delete(n),i.terminate())}(this),Promise.resolve()}}function jC(t,e,n,i={}){var a;const u=(t=qs(t,Mc))._getSettings(),g=`${e}:${n}`;if(u.host!=="firestore.googleapis.com"&&u.host!==g&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},u),{host:g,ssl:!1})),i.mockUserToken){let m,x;if(typeof i.mockUserToken=="string")m=i.mockUserToken,x=Nn.MOCK_USER;else{m=UE(i.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new _e(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Nn(w)}t._authCredentials=new lA(new f2(m,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new kc(this.firestore,e,this._query)}}class gr{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class is extends kc{constructor(e,n,i){super(e,n,Y1(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new Ie(e))}withConverter(e){return new is(this.firestore,e,this._path)}}function XC(t,e,...n){if(t=as(t),yy("collection","path",e),t instanceof Mc){const i=St.fromString(e,...n);return Rg(i),new is(t,null,i)}{if(!(t instanceof gr||t instanceof is))throw new _e(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(St.fromString(e,...n));return Rg(i),new is(t.firestore,null,i)}}function Og(t,e,...n){if(t=as(t),arguments.length===1&&(e=d2.newId()),yy("doc","path",e),t instanceof Mc){const i=St.fromString(e,...n);return Sg(i),new gr(t,null,new Ie(i))}{if(!(t instanceof gr||t instanceof is))throw new _e(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(St.fromString(e,...n));return Sg(i),new gr(t.firestore,t instanceof is?t.converter:null,new Ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new q2(this,"async_queue_retry"),this.Vu=()=>{const i=Th();i&&xe("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Th();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Th();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new xi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Al(e))throw e;xe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const a=function(g){let m=g.message||"";return g.stack&&(m=g.stack.includes(g.message)?g.stack:g.message+`
`+g.stack),m}(i);throw Ti("INTERNAL UNHANDLED ERROR: ",a),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const a=ad.createAndSchedule(this,e,n,i,u=>this.yu(u));return this.Tu.push(a),a}fu(){this.Eu&&Oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Lc extends Mc{constructor(e,n,i,a){super(e,n,i,a),this.type="firestore",this._queue=new Dg,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dg(e),this._firestoreClient=void 0,await e}}}function KC(t,e){const n=typeof t=="object"?t:Y_(),i=typeof t=="string"?t:"(default)",a=j_(n,"firestore").getImmediate({identifier:i});if(!a._initialized){const u=FE("firestore");u&&jC(a,...u)}return a}function fd(t){if(t._terminated)throw new _e(se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qC(t),t._firestoreClient}function qC(t){var e,n,i;const a=t._freezeSettings(),u=function(m,x,w,I){return new vA(m,x,w,I.host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,my(I.experimentalLongPollingOptions),I.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new VC(t._authCredentials,t._appCheckCredentials,t._queue,u,t._componentsProvider&&function(m){const x=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(x),_online:x}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zo(vn.fromBase64String(e))}catch(n){throw new _e(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zo(vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _e(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _e(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _e(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==a[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=/^__.*__$/;class wy{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new $s(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xy(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe()}}class md{constructor(e,n,i,a,u,g){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new md(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Fu({path:i,xu:!1});return a.Ou(e),a}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.Fu({path:i,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return oc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xy(this.Cu)&&YC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class QC{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Dc(e)}Qu(e,n,i,a=!1){return new md({Cu:e,methodName:n,qu:i,path:En.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ZC(t){const e=t._freezeSettings(),n=Dc(t._databaseId);return new QC(t._databaseId,!!e.ignoreUndefinedProperties,n)}class Fc extends dd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fc}}function $C(t,e,n,i){const a=t.Qu(1,e,n);_y("Data must be an object, but it was:",a,i);const u=[],g=hr.empty();Zs(i,(x,w)=>{const I=yd(e,x,n);w=as(w);const S=a.Nu(I);if(w instanceof Fc)u.push(I);else{const P=Vc(w,S);P!=null&&(u.push(I),g.set(I,P))}});const m=new Br(u);return new wy(g,m,a.fieldTransforms)}function JC(t,e,n,i,a,u){const g=t.Qu(1,e,n),m=[bg(e,i,n)],x=[a];if(u.length%2!=0)throw new _e(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<u.length;P+=2)m.push(bg(e,u[P])),x.push(u[P+1]);const w=[],I=hr.empty();for(let P=m.length-1;P>=0;--P)if(!nv(w,m[P])){const U=m[P];let Y=x[P];Y=as(Y);const q=g.Nu(U);if(Y instanceof Fc)w.push(U);else{const te=Vc(Y,q);te!=null&&(w.push(U),I.set(U,te))}}const S=new Br(w);return new wy(I,S,g.fieldTransforms)}function Vc(t,e){if(Ey(t=as(t)))return _y("Unsupported field value:",e,t),ev(t,e);if(t instanceof dd)return function(i,a){if(!xy(a.Cu))throw a.Bu(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(a);u&&a.fieldTransforms.push(u)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,a){const u=[];let g=0;for(const m of i){let x=Vc(m,a.Lu(g));x==null&&(x={nullValue:"NULL_VALUE"}),u.push(x),g++}return{arrayValue:{values:u}}}(t,e)}return function(i,a){if((i=as(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return KA(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=an.fromDate(i);return{timestampValue:rc(a.serializer,u)}}if(i instanceof an){const u=new an(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:rc(a.serializer,u)}}if(i instanceof gd)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Zo)return{bytesValue:V2(a.serializer,i._byteString)};if(i instanceof gr){const u=a.databaseId,g=i.firestore._databaseId;if(!g.isEqual(u))throw a.Bu(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:J1(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof pd)return function(g,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:g.toArray().map(x=>{if(typeof x!="number")throw m.Bu("VectorValues must only contain numeric values.");return Q1(m.serializer,x)})}}}}}}(i,a);throw a.Bu(`Unsupported field value: ${hd(i)}`)}(t,e)}function ev(t,e){const n={};return g2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zs(t,(i,a)=>{const u=Vc(a,e.Mu(i));u!=null&&(n[i]=u)}),{mapValue:{fields:n}}}function Ey(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof an||t instanceof gd||t instanceof Zo||t instanceof gr||t instanceof dd||t instanceof pd)}function _y(t,e,n){if(!Ey(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const i=hd(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function bg(t,e,n){if((e=as(e))instanceof Bc)return e._internalPath;if(typeof e=="string")return yd(t,e);throw oc("Field path arguments must be of type string or ",t,!1,void 0,n)}const tv=new RegExp("[~\\*/\\[\\]]");function yd(t,e,n){if(e.search(tv)>=0)throw oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bc(...e.split("."))._internalPath}catch{throw oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function oc(t,e,n,i,a){const u=i&&!i.isEmpty(),g=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let x="";return(u||g)&&(x+=" (found",u&&(x+=` in field ${i}`),g&&(x+=` in document ${a}`),x+=")"),new _e(se.INVALID_ARGUMENT,m+t+x)}function nv(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,n,i,a,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rv extends Ay{data(){return super.data()}}function Cy(t,e){return typeof e=="string"?yd(t,e):e instanceof Bc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _e(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sv{convertValue(e,n="none"){switch(Ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Zs(e,(a,u)=>{i[a]=this.convertValue(u,n)}),i}convertVectorValue(e){var n,i,a;const u=(a=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(g=>Gt(g.doubleValue));return new pd(u)}convertGeoPoint(e){return new gd(Gt(e.latitude),Gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=j1(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){const n=us(e);return new an(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=St.fromString(e);ot(j2(i));const a=new fl(i.get(1),i.get(3)),u=new Ie(i.popFirst(5));return a.isEqual(n)||Ti(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vy extends Ay{constructor(e,n,i,a,u,g){super(e,n,i,a,g),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Cy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class _u extends vy{data(e={}){return super.data(e)}}class ov{constructor(e,n,i,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Da(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new _u(this._firestore,this._userDataWriter,i.key,i,new Da(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _e(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,u){if(a._snapshot.oldDocs.isEmpty()){let g=0;return a._snapshot.docChanges.map(m=>{const x=new _u(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Da(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:x,oldIndex:-1,newIndex:g++}})}{let g=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const x=new _u(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Da(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let w=-1,I=-1;return m.type!==0&&(w=g.indexOf(m.doc.key),g=g.delete(m.doc.key)),m.type!==1&&(g=g.add(m.doc),I=g.indexOf(m.doc.key)),{type:av(m.type),doc:x,oldIndex:w,newIndex:I}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function av(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t){t=qs(t,gr);const e=qs(t.firestore,Lc);return HC(fd(e),t._key).then(n=>cv(e,t,n))}class Iy extends sv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,n)}}function lv(t){t=qs(t,kc);const e=qs(t.firestore,Lc),n=fd(e),i=new Iy(e);return iv(t._query),WC(n,t._query).then(a=>new ov(e,i,t,a))}function Rh(t,e,n,...i){t=qs(t,gr);const a=qs(t.firestore,Lc),u=ZC(a);let g;return g=typeof(e=as(e))=="string"||e instanceof Bc?JC(u,"updateDoc",t._key,e,n,i):$C(u,"updateDoc",t._key,e),uv(a,[g.toMutation(t._key,Ei.exists(!0))])}function uv(t,e){return function(i,a){const u=new xi;return i.asyncQueue.enqueueAndForget(async()=>DC(await zC(i),a,u)),u.promise}(fd(t),e)}function cv(t,e,n){const i=n.docs.get(e._key),a=new Iy(t);return new vy(t,a,e._key,i,new Da(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(a){na=a})(q_),Zu(new ll("firestore",(i,{instanceIdentifier:a,options:u})=>{const g=i.getProvider("app").getImmediate(),m=new Lc(new uA(i.getProvider("auth-internal")),new dA(i.getProvider("app-check-internal")),function(w,I){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new _e(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(w.options.projectId,I)}(g,a),g);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Lo(Y0,"4.7.3",e),Lo(Y0,"4.7.3","esm2017")})();const hv={apiKey:"AIzaSyDjdnkkPMD2PM7X1ilmDa56s4qeluZwX2A",authDomain:"aagaaz-fee3f.firebaseapp.com",projectId:"aagaaz-fee3f",storageBucket:"aagaaz-fee3f.appspot.com",messagingSenderId:"974694368221",appId:"1:974694368221:web:41552f4cd3c017d33e2c34",measurementId:"G-MSEQJN2PJY"},fv=r2(hv),Nh=KC(fv),dv=({message:t,color:e,onClose:n})=>bt.jsx("div",{className:"popup-modal",style:{backgroundColor:e},children:bt.jsxs("div",{className:"popup-content",children:[bt.jsx("h2",{children:t}),bt.jsx("button",{onClick:n,children:"Close"})]})});function gv(){const[t,e]=Jr.useState(""),[n,i]=Jr.useState(""),[a,u]=Jr.useState(!1),[g,m]=Jr.useState([]),[x,w]=Jr.useState(!0);Jr.useRef(null);const I=async()=>{const te=await lv(XC(Nh,"Attendees")),V=[];te.forEach(k=>{V.push({id:k.id,...k.data()})}),m(V),w(!1)};Jr.useEffect(()=>{I()},[]);const S=()=>{const te=new RE("qr-reader");te.start({facingMode:"environment"},{fps:10,qrbox:250},V=>{P(V),te.stop()},V=>{console.log("QR Code Error: ",V)}).catch(V=>{console.error("Unable to start scanning:",V)})},P=async te=>{const V=Og(Nh,"Attendees",te),k=await Pg(V);if(k.exists()){const B=k.data();B.event?B.food?U("Not allowed!","red"):(await Rh(V,{food:!0}),U("Food marked!","orange")):(await Rh(V,{event:!0}),U("Attendance marked!","green")),I()}else U("No attendee found with this USN.","red")},U=(te,V)=>{e(te),i(V),u(!0)},Y=()=>{u(!1)},q=async(te,V)=>{const k=Og(Nh,"Attendees",te),B=await Pg(k);if(B.exists()){const Q=B.data()[V];await Rh(k,{[V]:!Q}),I()}};return bt.jsxs("div",{className:"qr-scanner",children:[bt.jsxs("div",{className:"scan",children:[bt.jsx("h2",{children:"Scan QR Code"}),bt.jsx("div",{id:"qr-reader",style:{width:"300px"}}),bt.jsx("button",{className:"scannerbutton",onClick:S,children:"Start Scanner"}),a&&bt.jsx(dv,{message:t,color:n,onClose:Y}),bt.jsx("hr",{class:"rounded"})]}),bt.jsx("h2",{children:"Attendee List"}),x?bt.jsx("p",{children:"Loading..."}):bt.jsxs(bt.Fragment,{children:["  ",bt.jsxs("p",{children:["Total : ",g.length]}),g.map(te=>bt.jsxs("div",{className:"card",children:[bt.jsxs("p",{className:"card1",children:[te.name," - ",te.trimmedUsn]}),bt.jsx("button",{onClick:()=>q(te.id,"event"),children:te.event?"Mark as Not Attended":"Mark as Attended"}),bt.jsx("button",{onClick:()=>q(te.id,"food"),children:te.food?"Mark as Not Fed":"Mark as Fed"})]},te.id)),bt.jsx("p",{})]})]})}Xm(document.getElementById("root")).render(bt.jsx(Jr.StrictMode,{children:bt.jsx(gv,{})}));
